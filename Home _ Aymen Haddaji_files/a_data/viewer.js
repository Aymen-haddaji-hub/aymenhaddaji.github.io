(()=>{"use strict";var __webpack_modules__=[(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"PDFViewerApplicationOptions",{enumerable:!0,get:function(){return _app_options.AppOptions}}),Object.defineProperty(exports,"PDFViewerApplication",{enumerable:!0,get:function(){return _app.PDFViewerApplication}});var _app_options=__webpack_require__(1),_app=__webpack_require__(3);function webViewerLoad(){var config={appContainer:document.body,mainContainer:document.getElementById("viewerContainer"),viewerContainer:document.getElementById("viewer"),eventBus:null,toolbar:{container:document.getElementById("toolbarViewer"),numPages:document.getElementById("numPages"),pageNumber:document.getElementById("pageNumber"),scaleSelectContainer:document.getElementById("scaleSelectContainer"),scaleSelect:document.getElementById("scaleSelect"),customScaleOption:document.getElementById("customScaleOption"),previous:document.getElementById("previous"),next:document.getElementById("next"),zoomIn:document.getElementById("zoomIn"),zoomOut:document.getElementById("zoomOut"),viewFind:document.getElementById("viewFind"),openFile:document.getElementById("openFile"),print:document.getElementById("print"),presentationModeButton:document.getElementById("presentationMode"),download:document.getElementById("download"),viewBookmark:document.getElementById("viewBookmark")},secondaryToolbar:{toolbar:document.getElementById("secondaryToolbar"),toggleButton:document.getElementById("secondaryToolbarToggle"),toolbarButtonContainer:document.getElementById("secondaryToolbarButtonContainer"),presentationModeButton:document.getElementById("secondaryPresentationMode"),openFileButton:document.getElementById("secondaryOpenFile"),printButton:document.getElementById("secondaryPrint"),downloadButton:document.getElementById("secondaryDownload"),viewBookmarkButton:document.getElementById("secondaryViewBookmark"),firstPageButton:document.getElementById("firstPage"),lastPageButton:document.getElementById("lastPage"),pageRotateCwButton:document.getElementById("pageRotateCw"),pageRotateCcwButton:document.getElementById("pageRotateCcw"),cursorSelectToolButton:document.getElementById("cursorSelectTool"),cursorHandToolButton:document.getElementById("cursorHandTool"),scrollVerticalButton:document.getElementById("scrollVertical"),scrollHorizontalButton:document.getElementById("scrollHorizontal"),scrollWrappedButton:document.getElementById("scrollWrapped"),spreadNoneButton:document.getElementById("spreadNone"),spreadOddButton:document.getElementById("spreadOdd"),spreadEvenButton:document.getElementById("spreadEven"),documentPropertiesButton:document.getElementById("documentProperties")},fullscreen:{contextFirstPage:document.getElementById("contextFirstPage"),contextLastPage:document.getElementById("contextLastPage"),contextPageRotateCw:document.getElementById("contextPageRotateCw"),contextPageRotateCcw:document.getElementById("contextPageRotateCcw")},sidebar:{outerContainer:document.getElementById("outerContainer"),viewerContainer:document.getElementById("viewerContainer"),toggleButton:document.getElementById("sidebarToggle"),thumbnailButton:document.getElementById("viewThumbnail"),outlineButton:document.getElementById("viewOutline"),attachmentsButton:document.getElementById("viewAttachments"),layersButton:document.getElementById("viewLayers"),thumbnailView:document.getElementById("thumbnailView"),outlineView:document.getElementById("outlineView"),attachmentsView:document.getElementById("attachmentsView"),layersView:document.getElementById("layersView"),outlineOptionsContainer:document.getElementById("outlineOptionsContainer"),currentOutlineItemButton:document.getElementById("currentOutlineItem")},sidebarResizer:{outerContainer:document.getElementById("outerContainer"),resizer:document.getElementById("sidebarResizer")},findBar:{bar:document.getElementById("findbar"),toggleButton:document.getElementById("viewFind"),findField:document.getElementById("findInput"),highlightAllCheckbox:document.getElementById("findHighlightAll"),caseSensitiveCheckbox:document.getElementById("findMatchCase"),entireWordCheckbox:document.getElementById("findEntireWord"),findMsg:document.getElementById("findMsg"),findResultsCount:document.getElementById("findResultsCount"),findPreviousButton:document.getElementById("findPrevious"),findNextButton:document.getElementById("findNext")},passwordOverlay:{overlayName:"passwordOverlay",container:document.getElementById("passwordOverlay"),label:document.getElementById("passwordText"),input:document.getElementById("password"),submitButton:document.getElementById("passwordSubmit"),cancelButton:document.getElementById("passwordCancel")},documentProperties:{overlayName:"documentPropertiesOverlay",container:document.getElementById("documentPropertiesOverlay"),closeButton:document.getElementById("documentPropertiesClose"),fields:{fileName:document.getElementById("fileNameField"),fileSize:document.getElementById("fileSizeField"),title:document.getElementById("titleField"),author:document.getElementById("authorField"),subject:document.getElementById("subjectField"),keywords:document.getElementById("keywordsField"),creationDate:document.getElementById("creationDateField"),modificationDate:document.getElementById("modificationDateField"),creator:document.getElementById("creatorField"),producer:document.getElementById("producerField"),version:document.getElementById("versionField"),pageCount:document.getElementById("pageCountField"),pageSize:document.getElementById("pageSizeField"),linearized:document.getElementById("linearizedField")}},errorWrapper:{container:document.getElementById("errorWrapper"),errorMessage:document.getElementById("errorMessage"),closeButton:document.getElementById("errorClose"),errorMoreInfo:document.getElementById("errorMoreInfo"),moreInfoButton:document.getElementById("errorShowMore"),lessInfoButton:document.getElementById("errorShowLess")},printContainer:document.getElementById("printContainer"),openFileInputName:"fileInput",debuggerScriptPath:"./debugger.js"};const event=document.createEvent("CustomEvent");event.initCustomEvent("webviewerloaded",!0,!0,{source:window});try{parent.document.dispatchEvent(event)}catch(ex){console.error("webviewerloaded: "+ex),document.dispatchEvent(event)}_app.PDFViewerApplication.run(config)}window.PDFViewerApplication=_app.PDFViewerApplication,window.PDFViewerApplicationOptions=_app_options.AppOptions,__webpack_require__(35),__webpack_require__(41),"interactive"===document.readyState||"complete"===document.readyState?webViewerLoad():document.addEventListener("DOMContentLoaded",webViewerLoad,!0)},(__unused_webpack_module,exports,_viewer_compatibility)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.OptionKind=exports.AppOptions=void 0;_viewer_compatibility=_viewer_compatibility(2);const OptionKind={VIEWER:2,API:4,WORKER:8,PREFERENCE:128},defaultOptions={cursorToolOnLoad:{value:0,kind:(exports.OptionKind=OptionKind).VIEWER+OptionKind.PREFERENCE},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:OptionKind.VIEWER},defaultZoomValue:{value:"",kind:OptionKind.VIEWER+OptionKind.PREFERENCE},disableHistory:{value:!1,kind:OptionKind.VIEWER},disablePageLabels:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},enablePermissions:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},enablePrintAutoRotate:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},enableScripting:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},enableWebGL:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:OptionKind.VIEWER},externalLinkTarget:{value:0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},historyUpdateUrl:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},imageResourcesPath:{value:"./images/",kind:OptionKind.VIEWER},maxCanvasPixels:{value:16777216,compatibility:_viewer_compatibility.viewerCompatibilityParams.maxCanvasPixels,kind:OptionKind.VIEWER},pdfBugEnabled:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},printResolution:{value:150,kind:OptionKind.VIEWER},renderer:{value:"canvas",kind:OptionKind.VIEWER+OptionKind.PREFERENCE},renderInteractiveForms:{value:!0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},sidebarViewOnLoad:{value:-1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},scrollModeOnLoad:{value:-1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},spreadModeOnLoad:{value:-1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},textLayerMode:{value:1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},useOnlyCssZoom:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},viewerCssTheme:{value:0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},viewOnLoad:{value:0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},cMapPacked:{value:!0,kind:OptionKind.API},cMapUrl:{value:"../web/cmaps/",kind:OptionKind.API},disableAutoFetch:{value:!1,kind:OptionKind.API+OptionKind.PREFERENCE},disableFontFace:{value:!1,kind:OptionKind.API+OptionKind.PREFERENCE},disableRange:{value:!1,kind:OptionKind.API+OptionKind.PREFERENCE},disableStream:{value:!1,kind:OptionKind.API+OptionKind.PREFERENCE},docBaseUrl:{value:"",kind:OptionKind.API},fontExtraProperties:{value:!1,kind:OptionKind.API},isEvalSupported:{value:!0,kind:OptionKind.API},maxImageSize:{value:-1,kind:OptionKind.API},pdfBug:{value:!1,kind:OptionKind.API},verbosity:{value:1,kind:OptionKind.API},workerPort:{value:null,kind:OptionKind.WORKER},workerSrc:{value:STATIC_URL+"pdfjs/build/pdf.worker.js",kind:OptionKind.WORKER}};defaultOptions.disablePreferences={value:!1,kind:OptionKind.VIEWER},defaultOptions.locale={value:"undefined"!=typeof navigator?navigator.language:"en-US",kind:OptionKind.VIEWER},defaultOptions.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:OptionKind.VIEWER};const userOptions=Object.create(null);exports.AppOptions=class{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(defaultOption){var userOption=userOptions[defaultOption];if(void 0!==userOption)return userOption;defaultOption=defaultOptions[defaultOption];return void 0!==defaultOption?defaultOption.compatibility||defaultOption.value:void 0}static getAll(kind=null){const options=Object.create(null);for(const name in defaultOptions){var defaultOption=defaultOptions[name];if(kind){if(0==(kind&defaultOption.kind))continue;if(kind===OptionKind.PREFERENCE){var userOption=defaultOption.value,valueType=typeof userOption;if("boolean"==valueType||"string"==valueType||"number"==valueType&&Number.isInteger(userOption)){options[name]=userOption;continue}throw new Error("Invalid type for preference: "+name)}}userOption=userOptions[name];options[name]=void 0!==userOption?userOption:defaultOption.compatibility||defaultOption.value}return options}static set(name,value){userOptions[name]=value}static setAll(options){for(const name in options)userOptions[name]=options[name]}static remove(name){delete userOptions[name]}}},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.viewerCompatibilityParams=void 0;const compatibilityParams=Object.create(null);{var viewerCompatibilityParams="undefined"!=typeof navigator&&navigator.userAgent||"",platform="undefined"!=typeof navigator&&navigator.platform||"",maxTouchPoints="undefined"!=typeof navigator&&navigator.maxTouchPoints||1;const isAndroid=/Android/.test(viewerCompatibilityParams),isIOS=/\b(iPad|iPhone|iPod)(?=;)/.test(viewerCompatibilityParams)||"MacIntel"===platform&&1<maxTouchPoints,isIOSChrome=/CriOS/.test(viewerCompatibilityParams);isIOSChrome&&(compatibilityParams.disableCreateObjectURL=!0),(isIOS||isAndroid)&&(compatibilityParams.maxCanvasPixels=5242880)}viewerCompatibilityParams=Object.freeze(compatibilityParams);exports.viewerCompatibilityParams=viewerCompatibilityParams},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFViewerApplication=exports.PDFPrintServiceFactory=exports.DefaultExternalServices=void 0;var _ui_utils=__webpack_require__(4),_app_options=__webpack_require__(1),_pdfjsLib=__webpack_require__(5),_pdf_cursor_tools=__webpack_require__(6),_pdf_rendering_queue=__webpack_require__(8),_overlay_manager=__webpack_require__(9),_password_prompt=__webpack_require__(10),_pdf_attachment_viewer=__webpack_require__(11),_pdf_document_properties=__webpack_require__(13),_pdf_find_bar=__webpack_require__(14),_pdf_find_controller=__webpack_require__(15),_pdf_history=__webpack_require__(17),_pdf_layer_viewer=__webpack_require__(18),_pdf_link_service=__webpack_require__(19),_pdf_outline_viewer=__webpack_require__(20),_pdf_presentation_mode=__webpack_require__(21),_pdf_sidebar=__webpack_require__(22),_pdf_sidebar_resizer=__webpack_require__(23),_pdf_thumbnail_viewer=__webpack_require__(24),_pdf_viewer=__webpack_require__(26),_secondary_toolbar=__webpack_require__(31),_toolbar=__webpack_require__(33),_viewer_compatibility=__webpack_require__(2),_view_history=__webpack_require__(34);const WHEEL_ZOOM_DISABLED_TIMEOUT=1e3,ViewOnLoad={UNKNOWN:-1,PREVIOUS:0,INITIAL:1},ViewerCssTheme={AUTOMATIC:0,LIGHT:1,DARK:2},KNOWN_VERSIONS=["1.0","1.1","1.2","1.3","1.4","1.5","1.6","1.7","1.8","1.9","2.0","2.1","2.2","2.3"],KNOWN_GENERATORS=["acrobat distiller","acrobat pdfwriter","adobe livecycle","adobe pdf library","adobe photoshop","ghostscript","tcpdf","cairo","dvipdfm","dvips","pdftex","pdfkit","itext","prince","quarkxpress","mac os x","microsoft","openoffice","oracle","luradocument","pdf-xchange","antenna house","aspose.cells","fpdf"];class DefaultExternalServices{constructor(){throw new Error("Cannot initialize DefaultExternalServices.")}static updateFindControlState(data){}static updateFindMatchesCount(data){}static initPassiveLoading(callbacks){}static async fallback(data){}static reportTelemetry(data){}static createDownloadManager(options){throw new Error("Not implemented: createDownloadManager")}static createPreferences(){throw new Error("Not implemented: createPreferences")}static createL10n(options){throw new Error("Not implemented: createL10n")}static createScripting(options){throw new Error("Not implemented: createScripting")}static get supportsIntegratedFind(){return(0,_pdfjsLib.shadow)(this,"supportsIntegratedFind",!1)}static get supportsDocumentFonts(){return(0,_pdfjsLib.shadow)(this,"supportsDocumentFonts",!0)}static get supportedMouseWheelZoomModifierKeys(){return(0,_pdfjsLib.shadow)(this,"supportedMouseWheelZoomModifierKeys",{ctrlKey:!0,metaKey:!0})}static get isInAutomation(){return(0,_pdfjsLib.shadow)(this,"isInAutomation",!1)}}exports.DefaultExternalServices=DefaultExternalServices;const PDFViewerApplication={initialBookmark:document.location.hash.substring(1),_initializedCapability:(0,_pdfjsLib.createPromiseCapability)(),fellback:!1,appConfig:null,pdfDocument:null,pdfLoadingTask:null,printService:null,pdfViewer:null,pdfThumbnailViewer:null,pdfRenderingQueue:null,pdfPresentationMode:null,pdfDocumentProperties:null,pdfLinkService:null,pdfHistory:null,pdfSidebar:null,pdfSidebarResizer:null,pdfOutlineViewer:null,pdfAttachmentViewer:null,pdfLayerViewer:null,pdfCursorTools:null,store:null,downloadManager:null,overlayManager:null,preferences:null,toolbar:null,secondaryToolbar:null,eventBus:null,l10n:null,isInitialViewSet:!1,downloadComplete:!1,isViewerEmbedded:window.parent!==window,url:"",baseUrl:"",externalServices:DefaultExternalServices,_boundEvents:Object.create(null),documentInfo:null,metadata:null,_contentDispositionFilename:null,_contentLength:null,triggerDelayedFallback:null,_saveInProgress:!1,_wheelUnusedTicks:0,_idleCallbacks:new Set,_scriptingInstance:null,_mouseState:Object.create(null),async initialize(appContainer){this.preferences=this.externalServices.createPreferences(),this.appConfig=appContainer,await this._readPreferences(),await this._parseHashParameters(),this._forceCssTheme(),await this._initializeL10n(),this.isViewerEmbedded&&_app_options.AppOptions.get("externalLinkTarget")===_pdfjsLib.LinkTarget.NONE&&_app_options.AppOptions.set("externalLinkTarget",_pdfjsLib.LinkTarget.TOP),await this._initializeViewerComponents(),this.bindEvents(),this.bindWindowEvents();appContainer=appContainer.appContainer||document.documentElement;this.l10n.translate(appContainer).then(()=>{this.eventBus.dispatch("localized",{source:this})}),this._initializedCapability.resolve()},async _readPreferences(){if(!_app_options.AppOptions.get("disablePreferences"))try{_app_options.AppOptions.setAll(await this.preferences.getAll())}catch(reason){console.error("_readPreferences:")}},async _parseHashParameters(){if(_app_options.AppOptions.get("pdfBugEnabled")){var enabled=document.location.hash.substring(1);if(enabled){const hashParams=(0,_ui_utils.parseQueryString)(enabled),waitOn=[];if("disableworker"in hashParams&&"true"===hashParams.disableworker&&waitOn.push(async function(){_pdfjsLib.GlobalWorkerOptions.workerSrc||(_pdfjsLib.GlobalWorkerOptions.workerSrc=_app_options.AppOptions.get("workerSrc"));return(0,_pdfjsLib.loadScript)(_pdfjsLib.PDFWorker.getWorkerSrc())}()),"disablerange"in hashParams&&_app_options.AppOptions.set("disableRange","true"===hashParams.disablerange),"disablestream"in hashParams&&_app_options.AppOptions.set("disableStream","true"===hashParams.disablestream),"disableautofetch"in hashParams&&_app_options.AppOptions.set("disableAutoFetch","true"===hashParams.disableautofetch),"disablefontface"in hashParams&&_app_options.AppOptions.set("disableFontFace","true"===hashParams.disablefontface),"disablehistory"in hashParams&&_app_options.AppOptions.set("disableHistory","true"===hashParams.disablehistory),"webgl"in hashParams&&_app_options.AppOptions.set("enableWebGL","true"===hashParams.webgl),"verbosity"in hashParams&&_app_options.AppOptions.set("verbosity",0|hashParams.verbosity),"textlayer"in hashParams)switch(hashParams.textlayer){case"off":_app_options.AppOptions.set("textLayerMode",_ui_utils.TextLayerMode.DISABLE);break;case"visible":case"shadow":case"hover":const viewer=this.appConfig.viewerContainer;viewer.classList.add("textLayer-"+hashParams.textlayer)}if("pdfbug"in hashParams&&(_app_options.AppOptions.set("pdfBug",!0),_app_options.AppOptions.set("fontExtraProperties",!0),enabled=hashParams.pdfbug.split(","),waitOn.push(function(enabledTabs){const appConfig=PDFViewerApplication.appConfig;return(0,_pdfjsLib.loadScript)(appConfig.debuggerScriptPath).then(function(){PDFBug.enable(enabledTabs),PDFBug.init({OPS:_pdfjsLib.OPS},appConfig.mainContainer)})}(enabled))),"locale"in hashParams&&_app_options.AppOptions.set("locale",hashParams.locale),0!==waitOn.length)return Promise.all(waitOn).catch(reason=>{console.error(`_parseHashParameters: "${reason.message}".`)})}}},async _initializeL10n(){this.l10n=this.externalServices.createL10n({locale:_app_options.AppOptions.get("locale")});var dir=await this.l10n.getDirection();document.getElementsByTagName("html")[0].dir=dir},_forceCssTheme(){var cssTheme=_app_options.AppOptions.get("viewerCssTheme");if(cssTheme!==ViewerCssTheme.AUTOMATIC&&Object.values(ViewerCssTheme).includes(cssTheme))try{const styleSheet=document.styleSheets[0];var cssRules=styleSheet?.cssRules||[];for(let i=0,ii=cssRules.length;i<ii;i++){var rule=cssRules[i];if(rule instanceof CSSMediaRule&&"(prefers-color-scheme: dark)"===rule.media?.[0]){if(cssTheme===ViewerCssTheme.LIGHT)return void styleSheet.deleteRule(i);var darkRules=/^@media \(prefers-color-scheme: dark\) {\n\s*([\w\s-.,:;/\\{}()]+)\n}$/.exec(rule.cssText);return void(darkRules?.[1]&&(styleSheet.deleteRule(i),styleSheet.insertRule(darkRules[1],i)))}}}catch(reason){console.error(`_forceCssTheme: "${reason?.message}".`)}},async _initializeViewerComponents(){var appConfig=this.appConfig,eventBus=appConfig.eventBus||new _ui_utils.EventBus({isInAutomation:this.externalServices.isInAutomation});this.eventBus=eventBus,this.overlayManager=new _overlay_manager.OverlayManager;const pdfRenderingQueue=new _pdf_rendering_queue.PDFRenderingQueue;pdfRenderingQueue.onIdle=this.cleanup.bind(this),this.pdfRenderingQueue=pdfRenderingQueue;const pdfLinkService=new _pdf_link_service.PDFLinkService({eventBus:eventBus,externalLinkTarget:_app_options.AppOptions.get("externalLinkTarget"),externalLinkRel:_app_options.AppOptions.get("externalLinkRel"),ignoreDestinationZoom:_app_options.AppOptions.get("ignoreDestinationZoom")});this.pdfLinkService=pdfLinkService;var downloadManager=this.externalServices.createDownloadManager();this.downloadManager=downloadManager;var findController=new _pdf_find_controller.PDFFindController({linkService:pdfLinkService,eventBus:eventBus});this.findController=findController;var container=appConfig.mainContainer,viewer=appConfig.viewerContainer;this.pdfViewer=new _pdf_viewer.PDFViewer({container:container,viewer:viewer,eventBus:eventBus,renderingQueue:pdfRenderingQueue,linkService:pdfLinkService,downloadManager:downloadManager,findController:findController,renderer:_app_options.AppOptions.get("renderer"),enableWebGL:_app_options.AppOptions.get("enableWebGL"),l10n:this.l10n,textLayerMode:_app_options.AppOptions.get("textLayerMode"),imageResourcesPath:_app_options.AppOptions.get("imageResourcesPath"),renderInteractiveForms:_app_options.AppOptions.get("renderInteractiveForms"),enablePrintAutoRotate:_app_options.AppOptions.get("enablePrintAutoRotate"),useOnlyCssZoom:_app_options.AppOptions.get("useOnlyCssZoom"),maxCanvasPixels:_app_options.AppOptions.get("maxCanvasPixels"),enableScripting:_app_options.AppOptions.get("enableScripting"),mouseState:this._mouseState}),pdfRenderingQueue.setViewer(this.pdfViewer),pdfLinkService.setViewer(this.pdfViewer),this.pdfThumbnailViewer=new _pdf_thumbnail_viewer.PDFThumbnailViewer({container:appConfig.sidebar.thumbnailView,eventBus:eventBus,renderingQueue:pdfRenderingQueue,linkService:pdfLinkService,l10n:this.l10n}),pdfRenderingQueue.setThumbnailViewer(this.pdfThumbnailViewer),this.pdfHistory=new _pdf_history.PDFHistory({linkService:pdfLinkService,eventBus:eventBus}),pdfLinkService.setHistory(this.pdfHistory),this.supportsIntegratedFind||(this.findBar=new _pdf_find_bar.PDFFindBar(appConfig.findBar,eventBus,this.l10n)),this.pdfDocumentProperties=new _pdf_document_properties.PDFDocumentProperties(appConfig.documentProperties,this.overlayManager,eventBus,this.l10n),this.pdfCursorTools=new _pdf_cursor_tools.PDFCursorTools({container:container,eventBus:eventBus,cursorToolOnLoad:_app_options.AppOptions.get("cursorToolOnLoad")}),this.toolbar=new _toolbar.Toolbar(appConfig.toolbar,eventBus,this.l10n),this.secondaryToolbar=new _secondary_toolbar.SecondaryToolbar(appConfig.secondaryToolbar,container,eventBus),this.supportsFullscreen&&(this.pdfPresentationMode=new _pdf_presentation_mode.PDFPresentationMode({container:container,pdfViewer:this.pdfViewer,eventBus:eventBus,contextMenuItems:appConfig.fullscreen})),this.passwordPrompt=new _password_prompt.PasswordPrompt(appConfig.passwordOverlay,this.overlayManager,this.l10n),this.pdfOutlineViewer=new _pdf_outline_viewer.PDFOutlineViewer({container:appConfig.sidebar.outlineView,eventBus:eventBus,linkService:pdfLinkService}),this.pdfAttachmentViewer=new _pdf_attachment_viewer.PDFAttachmentViewer({container:appConfig.sidebar.attachmentsView,eventBus:eventBus,downloadManager:downloadManager}),this.pdfLayerViewer=new _pdf_layer_viewer.PDFLayerViewer({container:appConfig.sidebar.layersView,eventBus:eventBus,l10n:this.l10n}),this.pdfSidebar=new _pdf_sidebar.PDFSidebar({elements:appConfig.sidebar,pdfViewer:this.pdfViewer,pdfThumbnailViewer:this.pdfThumbnailViewer,eventBus:eventBus,l10n:this.l10n}),this.pdfSidebar.onToggled=this.forceRendering.bind(this),this.pdfSidebarResizer=new _pdf_sidebar_resizer.PDFSidebarResizer(appConfig.sidebarResizer,eventBus,this.l10n)},run(config){this.initialize(config).then(webViewerInitialized)},get initialized(){return this._initializedCapability.settled},get initializedPromise(){return this._initializedCapability.promise},zoomIn(ticks){if(!this.pdfViewer.isInPresentationMode){let newScale=this.pdfViewer.currentScale;for(;newScale=(1.1*newScale).toFixed(2),newScale=Math.ceil(10*newScale)/10,newScale=Math.min(_ui_utils.MAX_SCALE,newScale),0<--ticks&&newScale<_ui_utils.MAX_SCALE;);this.pdfViewer.currentScaleValue=newScale}},zoomOut(ticks){if(!this.pdfViewer.isInPresentationMode){let newScale=this.pdfViewer.currentScale;for(;newScale=(newScale/1.1).toFixed(2),newScale=Math.floor(10*newScale)/10,newScale=Math.max(_ui_utils.MIN_SCALE,newScale),0<--ticks&&newScale>_ui_utils.MIN_SCALE;);this.pdfViewer.currentScaleValue=newScale}},zoomReset(){this.pdfViewer.isInPresentationMode||(this.pdfViewer.currentScaleValue=_ui_utils.DEFAULT_SCALE_VALUE)},get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0},get page(){return this.pdfViewer.currentPageNumber},set page(val){this.pdfViewer.currentPageNumber=val},get supportsPrinting(){return PDFPrintServiceFactory.instance.supportsPrinting},get supportsFullscreen(){let support;var doc=document.documentElement;return support=!!(doc.requestFullscreen||doc.mozRequestFullScreen||doc.webkitRequestFullScreen),!1!==document.fullscreenEnabled&&!1!==document.mozFullScreenEnabled&&!1!==document.webkitFullscreenEnabled||(support=!1),(0,_pdfjsLib.shadow)(this,"supportsFullscreen",support)},get supportsIntegratedFind(){return this.externalServices.supportsIntegratedFind},get supportsDocumentFonts(){return this.externalServices.supportsDocumentFonts},get loadingBar(){var bar=new _ui_utils.ProgressBar("#loadingBar");return(0,_pdfjsLib.shadow)(this,"loadingBar",bar)},get supportedMouseWheelZoomModifierKeys(){return this.externalServices.supportedMouseWheelZoomModifierKeys},initPassiveLoading(){throw new Error("Not implemented: initPassiveLoading")},setTitleUsingUrl(url=""){this.url=url,this.baseUrl=url.split("#")[0];let title=(0,_ui_utils.getPDFFileNameFromURL)(url,"");if(!title)try{title=decodeURIComponent((0,_pdfjsLib.getFilenameFromUrl)(url))||url}catch(ex){title=url}this.setTitle(title)},setTitle(title){this.isViewerEmbedded||(document.title=title)},get _docFilename(){return this._contentDispositionFilename||(0,_ui_utils.getPDFFileNameFromURL)(this.url)},_cancelIdleCallbacks(){if(this._idleCallbacks.size){for(const callback of this._idleCallbacks)window.cancelIdleCallback(callback);this._idleCallbacks.clear()}},async _destroyScriptingInstance(){if(this._scriptingInstance){const{scripting,internalEvents,domEvents}=this._scriptingInstance;try{await scripting.destroySandbox()}catch(ex){}for(var[name,listener]of internalEvents)this.eventBus._off(name,listener);internalEvents.clear();for(const[name,listener]of domEvents)window.removeEventListener(name,listener);domEvents.clear(),delete this._mouseState.isDown,this._scriptingInstance=null}},async close(){const errorWrapper=this.appConfig.errorWrapper.container;if(errorWrapper.setAttribute("hidden","true"),this.pdfLoadingTask){const promises=[];promises.push(this.pdfLoadingTask.destroy()),this.pdfLoadingTask=null,this.pdfDocument&&(this.pdfDocument=null,this.pdfThumbnailViewer.setDocument(null),this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null),this.pdfDocumentProperties.setDocument(null)),function(){const appConfig=PDFViewerApplication["appConfig"];appConfig&&appConfig.viewerContainer.classList.remove("enablePermissions")}(),this.store=null,this.isInitialViewSet=!1,this.downloadComplete=!1,this.url="",this.baseUrl="",this.documentInfo=null,this.metadata=null,this._contentDispositionFilename=null,this._contentLength=null,this.triggerDelayedFallback=null,this._saveInProgress=!1,this._cancelIdleCallbacks(),promises.push(this._destroyScriptingInstance()),this.pdfSidebar.reset(),this.pdfOutlineViewer.reset(),this.pdfAttachmentViewer.reset(),this.pdfLayerViewer.reset(),this.pdfHistory&&this.pdfHistory.reset(),this.findBar&&this.findBar.reset(),this.toolbar.reset(),this.secondaryToolbar.reset(),"undefined"!=typeof PDFBug&&PDFBug.cleanup(),await Promise.all(promises)}},async open(file,args){this.pdfLoadingTask&&await this.close();var workerParameters=_app_options.AppOptions.getAll(_app_options.OptionKind.WORKER);for(const key in workerParameters)_pdfjsLib.GlobalWorkerOptions[key]=workerParameters[key];const parameters=Object.create(null);"string"==typeof file?(this.setTitleUsingUrl(file),parameters.url=file):file&&"byteLength"in file?parameters.data=file:file.url&&file.originalUrl&&(this.setTitleUsingUrl(file.originalUrl),parameters.url=file.url);var apiParameters=_app_options.AppOptions.getAll(_app_options.OptionKind.API);for(const key in apiParameters){var value=apiParameters[key];key,parameters[key]=value}if(args)for(const key in args)parameters[key]=args[key];const loadingTask=(0,_pdfjsLib.getDocument)(parameters);return this.pdfLoadingTask=loadingTask,loadingTask.onPassword=(updateCallback,reason)=>{this.pdfLinkService.externalLinkEnabled=!1,this.passwordPrompt.setUpdateCallback(updateCallback,reason),this.passwordPrompt.open()},loadingTask.onProgress=({loaded,total})=>{this.progress(loaded/total)},loadingTask.onUnsupportedFeature=this.fallback.bind(this),loadingTask.promise.then(pdfDocument=>{this.load(pdfDocument)},exception=>{if(loadingTask===this.pdfLoadingTask){const message=exception?.message;let loadingErrorMessage;return loadingErrorMessage=exception instanceof _pdfjsLib.InvalidPDFException?this.l10n.get("invalid_file_error",null,"Invalid or corrupted PDF file."):exception instanceof _pdfjsLib.MissingPDFException?this.l10n.get("missing_file_error",null,"Missing PDF file."):exception instanceof _pdfjsLib.UnexpectedResponseException?this.l10n.get("unexpected_response_error",null,"Unexpected server response."):this.l10n.get("loading_error",null,"An error occurred while loading the PDF."),loadingErrorMessage.then(msg=>{throw this.error(msg,{message:message}),exception})}})},download({sourceEventType="download"}={}){function downloadByUrl(){downloadManager.downloadUrl(url,filename)}const downloadManager=this.downloadManager,url=this.baseUrl,filename=this._docFilename;this.pdfDocument&&this.downloadComplete?this.pdfDocument.getData().then(function(blob){blob=new Blob([blob],{type:"application/pdf"});downloadManager.download(blob,url,filename,sourceEventType)}).catch(downloadByUrl):downloadByUrl()},async save({sourceEventType="download"}={}){if(!this._saveInProgress){const downloadManager=this.downloadManager,url=this.baseUrl,filename=this._docFilename;this.pdfDocument&&this.downloadComplete?(this._saveInProgress=!0,await this._scriptingInstance?.scripting.dispatchEventInSandbox({id:"doc",name:"WillSave"}),this.pdfDocument.saveDocument(this.pdfDocument.annotationStorage).then(blob=>{blob=new Blob([blob],{type:"application/pdf"});downloadManager.download(blob,url,filename,sourceEventType)}).catch(()=>{this.download({sourceEventType:sourceEventType})}).finally(async()=>{await this._scriptingInstance?.scripting.dispatchEventInSandbox({id:"doc",name:"DidSave"}),this._saveInProgress=!1})):this.download({sourceEventType:sourceEventType})}},downloadOrSave(options){0<this.pdfDocument?.annotationStorage.size?this.save(options):this.download(options)},_delayedFallback(featureId){this.externalServices.reportTelemetry({type:"unsupportedFeature",featureId:featureId}),this.triggerDelayedFallback||(this.triggerDelayedFallback=()=>{this.fallback(featureId),this.triggerDelayedFallback=null})},fallback(featureId){this.externalServices.reportTelemetry({type:"unsupportedFeature",featureId:featureId}),this.fellback||(this.fellback=!0,this.externalServices.fallback({featureId:featureId,url:this.baseUrl}).then(download=>{download&&this.download({sourceEventType:"download"})}))},error(message,errorWrapperConfig){const moreInfoText=[this.l10n.get("error_version_info",{version:_pdfjsLib.version||"?",build:_pdfjsLib.build||"?"},"PDF.js v{{version}} (build: {{build}})")];errorWrapperConfig&&(moreInfoText.push(this.l10n.get("error_message",{message:errorWrapperConfig.message},"Message: {{message}}")),errorWrapperConfig.stack?moreInfoText.push(this.l10n.get("error_stack",{stack:errorWrapperConfig.stack},"Stack: {{stack}}")):(errorWrapperConfig.filename&&moreInfoText.push(this.l10n.get("error_file",{file:errorWrapperConfig.filename},"File: {{file}}")),errorWrapperConfig.lineNumber&&moreInfoText.push(this.l10n.get("error_line",{line:errorWrapperConfig.lineNumber},"Line: {{line}}"))));errorWrapperConfig=this.appConfig.errorWrapper;const errorWrapper=errorWrapperConfig.container;errorWrapper.removeAttribute("hidden");const errorMessage=errorWrapperConfig.errorMessage;errorMessage.textContent=message;const closeButton=errorWrapperConfig.closeButton;closeButton.onclick=function(){errorWrapper.setAttribute("hidden","true")};const errorMoreInfo=errorWrapperConfig.errorMoreInfo,moreInfoButton=errorWrapperConfig.moreInfoButton,lessInfoButton=errorWrapperConfig.lessInfoButton;moreInfoButton.onclick=function(){errorMoreInfo.removeAttribute("hidden"),moreInfoButton.setAttribute("hidden","true"),lessInfoButton.removeAttribute("hidden"),errorMoreInfo.style.height=errorMoreInfo.scrollHeight+"px"},lessInfoButton.onclick=function(){errorMoreInfo.setAttribute("hidden","true"),moreInfoButton.removeAttribute("hidden"),lessInfoButton.setAttribute("hidden","true")},moreInfoButton.oncontextmenu=_ui_utils.noContextMenuHandler,lessInfoButton.oncontextmenu=_ui_utils.noContextMenuHandler,closeButton.oncontextmenu=_ui_utils.noContextMenuHandler,moreInfoButton.removeAttribute("hidden"),lessInfoButton.setAttribute("hidden","true"),Promise.all(moreInfoText).then(parts=>{errorMoreInfo.value=parts.join("\n")})},progress(percent){this.downloadComplete||((percent=Math.round(100*percent))>this.loadingBar.percent||isNaN(percent))&&(this.loadingBar.percent=percent,(this.pdfDocument?this.pdfDocument.loadingParams.disableAutoFetch:_app_options.AppOptions.get("disableAutoFetch"))&&percent&&(this.disableAutoFetchLoadingBarTimeout&&(clearTimeout(this.disableAutoFetchLoadingBarTimeout),this.disableAutoFetchLoadingBarTimeout=null),this.loadingBar.show(),this.disableAutoFetchLoadingBarTimeout=setTimeout(()=>{this.loadingBar.hide(),this.disableAutoFetchLoadingBarTimeout=null},5e3)))},load(pdfDocument){(this.pdfDocument=pdfDocument).getDownloadInfo().then(({length})=>{this._contentLength=length,this.downloadComplete=!0,this.loadingBar.hide(),firstPagePromise.then(()=>{this.eventBus.dispatch("documentloaded",{source:this})})});const pageLayoutPromise=pdfDocument.getPageLayout().catch(function(){}),pageModePromise=pdfDocument.getPageMode().catch(function(){}),openActionPromise=pdfDocument.getOpenAction().catch(function(){});this.toolbar.setPagesCount(pdfDocument.numPages,!1),this.secondaryToolbar.setPagesCount(pdfDocument.numPages),this.pdfLinkService.setDocument(pdfDocument,null),this.pdfDocumentProperties.setDocument(pdfDocument,this.url);const pdfViewer=this.pdfViewer;pdfViewer.setDocument(pdfDocument);const{firstPagePromise,onePageRendered,pagesPromise}=pdfViewer,pdfThumbnailViewer=this.pdfThumbnailViewer;pdfThumbnailViewer.setDocument(pdfDocument);const storedPromise=(this.store=new _view_history.ViewHistory(pdfDocument.fingerprint)).getMultiple({page:null,zoom:_ui_utils.DEFAULT_SCALE_VALUE,scrollLeft:"0",scrollTop:"0",rotation:null,sidebarView:_ui_utils.SidebarView.UNKNOWN,scrollMode:_ui_utils.ScrollMode.UNKNOWN,spreadMode:_ui_utils.SpreadMode.UNKNOWN}).catch(()=>Object.create(null));firstPagePromise.then(pdfPage=>{this.loadingBar.setWidth(this.appConfig.viewerContainer),this._initializeAnnotationStorageCallbacks(pdfDocument),Promise.all([_ui_utils.animationStarted,storedPromise,pageLayoutPromise,pageModePromise,openActionPromise]).then(async([,stored,pageLayout,pageMode,zoom])=>{var viewOnLoad=_app_options.AppOptions.get("viewOnLoad");this._initializePdfHistory({fingerprint:pdfDocument.fingerprint,viewOnLoad:viewOnLoad,initialDest:zoom&&zoom.dest});var initialBookmark=this.initialBookmark,zoom=_app_options.AppOptions.get("defaultZoomValue");let hash=zoom?"zoom="+zoom:null,rotation=null,sidebarView=_app_options.AppOptions.get("sidebarViewOnLoad"),scrollMode=_app_options.AppOptions.get("scrollModeOnLoad"),spreadMode=_app_options.AppOptions.get("spreadModeOnLoad");stored.page&&viewOnLoad!==ViewOnLoad.INITIAL&&(hash=`page=${stored.page}&zoom=${zoom||stored.zoom},`+stored.scrollLeft+","+stored.scrollTop,rotation=parseInt(stored.rotation,10),sidebarView===_ui_utils.SidebarView.UNKNOWN&&(sidebarView=0|stored.sidebarView),scrollMode===_ui_utils.ScrollMode.UNKNOWN&&(scrollMode=0|stored.scrollMode),spreadMode===_ui_utils.SpreadMode.UNKNOWN&&(spreadMode=0|stored.spreadMode)),pageMode&&sidebarView===_ui_utils.SidebarView.UNKNOWN&&(sidebarView=function(mode){switch(mode){case"UseNone":return _ui_utils.SidebarView.NONE;case"UseThumbs":return _ui_utils.SidebarView.THUMBS;case"UseOutlines":return _ui_utils.SidebarView.OUTLINE;case"UseAttachments":return _ui_utils.SidebarView.ATTACHMENTS;case"UseOC":return _ui_utils.SidebarView.LAYERS}return _ui_utils.SidebarView.NONE}(pageMode)),pageLayout&&spreadMode===_ui_utils.SpreadMode.UNKNOWN&&(spreadMode=apiPageLayoutToSpreadMode(pageLayout)),this.setInitialView(hash,{rotation:rotation,sidebarView:sidebarView,scrollMode:scrollMode,spreadMode:spreadMode}),this.eventBus.dispatch("documentinit",{source:this}),this.isViewerEmbedded||pdfViewer.focus(),this._initializePermissions(pdfDocument),await Promise.race([pagesPromise,new Promise(resolve=>{setTimeout(resolve,1e4)})]),(initialBookmark||hash)&&(pdfViewer.hasEqualPageSizes||(this.initialBookmark=initialBookmark,pdfViewer.currentScaleValue=pdfViewer.currentScaleValue,this.setInitialView(hash)))}).catch(()=>{this.setInitialView()}).then(function(){pdfViewer.update()})}),pagesPromise.then(()=>{this._initializeAutoPrint(pdfDocument,openActionPromise)}),onePageRendered.then(()=>{if(pdfDocument.getOutline().then(outline=>{this.pdfOutlineViewer.render({outline:outline,pdfDocument:pdfDocument})}),pdfDocument.getAttachments().then(attachments=>{this.pdfAttachmentViewer.render({attachments:attachments})}),pdfViewer.optionalContentConfigPromise.then(optionalContentConfig=>{this.pdfLayerViewer.render({optionalContentConfig:optionalContentConfig,pdfDocument:pdfDocument})}),"requestIdleCallback"in window){const callback=window.requestIdleCallback(()=>{this._collectTelemetry(pdfDocument),this._idleCallbacks.delete(callback)},{timeout:1e3});this._idleCallbacks.add(callback)}this._initializeJavaScript(pdfDocument)}),this._initializePageLabels(pdfDocument),this._initializeMetadata(pdfDocument)},async _initializeJavaScript(pdfDocument){if(_app_options.AppOptions.get("enableScripting")){var[objects,calculationOrder,docActions]=await Promise.all([pdfDocument.getFieldObjects(),pdfDocument.getCalculationOrderIds(),pdfDocument.getJSActions()]);if((objects||docActions)&&pdfDocument===this.pdfDocument){const scripting=this.externalServices.createScripting({sandboxBundleSrc:_app_options.AppOptions.get("sandboxBundleSrc")}),internalEvents=new Map,domEvents=new Map;if(this._scriptingInstance={scripting:scripting,ready:!1,internalEvents:internalEvents,domEvents:domEvents},(this.documentInfo||(await new Promise(resolve=>{this.eventBus._on("metadataloaded",evt=>{resolve()},{once:!0})}),pdfDocument===this.pdfDocument))&&(this._contentLength||(await new Promise(resolve=>{this.eventBus._on("documentloaded",evt=>{resolve()},{once:!0})}),pdfDocument===this.pdfDocument))){internalEvents.set("updatefromsandbox",({detail})=>{var{id,command,value}=detail;if(id){const element=document.getElementById(id);element?element.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:detail})):null!=value&&pdfDocument.annotationStorage.setValue(id,value)}else switch(command){case"clear":console.clear();break;case"error":console.error(value);break;case"layout":this.pdfViewer.spreadMode=apiPageLayoutToSpreadMode(value);break;case"page-num":this.pdfViewer.currentPageNumber=value+1;break;case"print":this.pdfViewer.pagesPromise.then(()=>{this.triggerPrinting()});break;case"println":console.log(value);break;case"zoom":this.pdfViewer.currentScaleValue=value}});const visitedPages=new Map;internalEvents.set("pageopen",({pageNumber,actionsPromise})=>{visitedPages.set(pageNumber,(async()=>{let actions=null;!visitedPages.has(pageNumber)&&(actions=await actionsPromise,pdfDocument!==this.pdfDocument)||await this._scriptingInstance?.scripting.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:pageNumber,actions:actions})})())}),internalEvents.set("pageclose",async({pageNumber})=>{var actionsPromise=visitedPages.get(pageNumber);actionsPromise&&(visitedPages.set(pageNumber,null),await actionsPromise,pdfDocument===this.pdfDocument&&await this._scriptingInstance?.scripting.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:pageNumber}))});internalEvents.set("dispatcheventinsandbox",({detail})=>{scripting.dispatchEventInSandbox(detail)});domEvents.set("mousedown",event=>{this._mouseState.isDown=!0});var name,listener;domEvents.set("mouseup",event=>{this._mouseState.isDown=!1});for([name,listener]of internalEvents)this.eventBus._on(name,listener);for(const[name,listener]of domEvents)window.addEventListener(name,listener);try{await scripting.createSandbox({objects:objects,calculationOrder:calculationOrder,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...this.documentInfo,baseURL:this.baseUrl,filesize:this._contentLength,filename:this._docFilename,metadata:this.metadata?.getRaw(),authors:this.metadata?.get("dc:creator"),numPages:pdfDocument.numPages,URL:this.url,actions:docActions}}),this.externalServices.isInAutomation&&this.eventBus.dispatch("sandboxcreated",{source:this})}catch(error){return console.error(`_initializeJavaScript: "${error?.message}".`),void this._destroyScriptingInstance()}await scripting.dispatchEventInSandbox({id:"doc",name:"Open"}),await this.pdfViewer.initializeScriptingEvents(),Promise.resolve().then(()=>{this._scriptingInstance&&(this._scriptingInstance.ready=!0)})}}}},async _collectTelemetry(pdfDocument){var markInfo=await this.pdfDocument.getMarkInfo();pdfDocument===this.pdfDocument&&this.externalServices.reportTelemetry({type:"tagged",tagged:markInfo?.Marked||!1})},async _initializeAutoPrint(pdfDocument,openActionPromise){const[openAction,javaScript]=await Promise.all([openActionPromise,_app_options.AppOptions.get("enableScripting")?null:pdfDocument.getJavaScript()]);if(pdfDocument===this.pdfDocument){let triggerAutoPrint="Print"===openAction?.action?!0:!1;if(javaScript&&(javaScript.some(js=>!!js&&(console.warn("Warning: JavaScript is not supported"),this._delayedFallback(_pdfjsLib.UNSUPPORTED_FEATURES.javaScript),!0)),!triggerAutoPrint))for(const js of javaScript)if(js&&_ui_utils.AutoPrintRegExp.test(js)){triggerAutoPrint=!0;break}triggerAutoPrint&&this.triggerPrinting()}},async _initializeMetadata(metadataTitle){const{info,metadata,contentDispositionFilename,contentLength}=await metadataTitle.getMetadata();if(metadataTitle===this.pdfDocument){this.documentInfo=info,this.metadata=metadata,this._contentDispositionFilename=contentDispositionFilename,this._contentLength??(this._contentLength=contentLength),console.log(`PDF ${metadataTitle.fingerprint} [${info.PDFFormatVersion} `+`${(info.Producer||"-").trim()} / ${(info.Creator||"-").trim()}] `+"(PDF.js: "+(_pdfjsLib.version||"-")+`${this.pdfViewer.enableWebGL?" [WebGL]":""})`);let pdfTitle;metadataTitle=info&&info.Title;metadataTitle&&(pdfTitle=metadataTitle);metadataTitle=metadata&&metadata.get("dc:title");metadataTitle&&("Untitled"===metadataTitle||/[\uFFF0-\uFFFF]/g.test(metadataTitle)||(pdfTitle=metadataTitle)),pdfTitle?this.setTitle(pdfTitle+" - "+(contentDispositionFilename||document.title)):contentDispositionFilename&&this.setTitle(contentDispositionFilename),info.IsXFAPresent&&!info.IsAcroFormPresent?(console.warn("Warning: XFA is not supported"),this._delayedFallback(_pdfjsLib.UNSUPPORTED_FEATURES.forms)):!info.IsAcroFormPresent&&!info.IsXFAPresent||this.pdfViewer.renderInteractiveForms||(console.warn("Warning: Interactive form support is not enabled"),this._delayedFallback(_pdfjsLib.UNSUPPORTED_FEATURES.forms));let versionId="other";KNOWN_VERSIONS.includes(info.PDFFormatVersion)&&(versionId="v"+info.PDFFormatVersion.replace(".","_"));let generatorId="other";if(info.Producer){const producer=info.Producer.toLowerCase();KNOWN_GENERATORS.some(function(generator){return!!producer.includes(generator)&&(generatorId=generator.replace(/[ .-]/g,"_"),!0)})}let formType=null;info.IsXFAPresent?formType="xfa":info.IsAcroFormPresent&&(formType="acroform"),this.externalServices.reportTelemetry({type:"documentInfo",version:versionId,generator:generatorId,formType:formType}),this.eventBus.dispatch("metadataloaded",{source:this})}},async _initializePageLabels(pdfDocument){var labels=await pdfDocument.getPageLabels();if(pdfDocument===this.pdfDocument&&labels&&!_app_options.AppOptions.get("disablePageLabels")){var numLabels=labels.length;if(numLabels===this.pagesCount){let i=0;for(;i<numLabels&&labels[i]===(i+1).toString();)i++;if(i!==numLabels){const{pdfViewer,pdfThumbnailViewer,toolbar}=this;pdfViewer.setPageLabels(labels),pdfThumbnailViewer.setPageLabels(labels),toolbar.setPagesCount(numLabels,!0),toolbar.setPageNumber(pdfViewer.currentPageNumber,pdfViewer.currentPageLabel)}}else console.error("The number of Page Labels does not match the number of pages in the document.")}},_initializePdfHistory({fingerprint,viewOnLoad,initialDest=null}){this.isViewerEmbedded||_app_options.AppOptions.get("disableHistory")||(this.pdfHistory.initialize({fingerprint:fingerprint,resetHistory:viewOnLoad===ViewOnLoad.INITIAL,updateUrl:_app_options.AppOptions.get("historyUpdateUrl")}),this.pdfHistory.initialBookmark&&(this.initialBookmark=this.pdfHistory.initialBookmark,this.initialRotation=this.pdfHistory.initialRotation),initialDest&&!this.initialBookmark&&viewOnLoad===ViewOnLoad.UNKNOWN&&(this.initialBookmark=JSON.stringify(initialDest),this.pdfHistory.push({explicitDest:initialDest,pageNumber:null})))},async _initializePermissions(pdfDocument){const permissions=await pdfDocument.getPermissions();pdfDocument===this.pdfDocument&&permissions&&_app_options.AppOptions.get("enablePermissions")&&(permissions.includes(_pdfjsLib.PermissionFlag.COPY)||this.appConfig.viewerContainer.classList.add("enablePermissions"))},_initializeAnnotationStorageCallbacks(pdfDocument){if(pdfDocument===this.pdfDocument){const annotationStorage=pdfDocument["annotationStorage"];annotationStorage.onSetModified=function(){window.addEventListener("beforeunload",beforeUnload)},annotationStorage.onResetModified=function(){window.removeEventListener("beforeunload",beforeUnload)}}},setInitialView(storedHash,{rotation,sidebarView,scrollMode:scroll,spreadMode:spread}={}){var setRotation=angle=>{(0,_ui_utils.isValidRotation)(angle)&&(this.pdfViewer.pagesRotation=angle)};this.isInitialViewSet=!0,this.pdfSidebar.setInitialView(sidebarView),scroll=scroll,spread=spread,(0,_ui_utils.isValidScrollMode)(scroll)&&(this.pdfViewer.scrollMode=scroll),(0,_ui_utils.isValidSpreadMode)(spread)&&(this.pdfViewer.spreadMode=spread),this.initialBookmark?(setRotation(this.initialRotation),delete this.initialRotation,this.pdfLinkService.setHash(this.initialBookmark),this.initialBookmark=null):storedHash&&(setRotation(rotation),this.pdfLinkService.setHash(storedHash)),this.toolbar.setPageNumber(this.pdfViewer.currentPageNumber,this.pdfViewer.currentPageLabel),this.secondaryToolbar.setPageNumber(this.pdfViewer.currentPageNumber),this.pdfViewer.currentScaleValue||(this.pdfViewer.currentScaleValue=_ui_utils.DEFAULT_SCALE_VALUE)},cleanup(){this.pdfDocument&&(this.pdfViewer.cleanup(),this.pdfThumbnailViewer.cleanup(),this.pdfViewer.renderer!==_ui_utils.RendererType.SVG&&this.pdfDocument.cleanup())},forceRendering(){this.pdfRenderingQueue.printing=!!this.printService,this.pdfRenderingQueue.isThumbnailViewEnabled=this.pdfSidebar.isThumbnailViewVisible,this.pdfRenderingQueue.renderHighestPriority()},beforePrint(){if(this._scriptingInstance?.scripting.dispatchEventInSandbox({id:"doc",name:"WillPrint"}),!this.printService)if(this.supportsPrinting)if(this.pdfViewer.pageViewsReady){var pagesOverview=this.pdfViewer.getPagesOverview(),printContainer=this.appConfig.printContainer,printResolution=_app_options.AppOptions.get("printResolution"),optionalContentConfigPromise=this.pdfViewer.optionalContentConfigPromise;const printService=PDFPrintServiceFactory.instance.createPrintService(this.pdfDocument,pagesOverview,printContainer,printResolution,optionalContentConfigPromise,this.l10n);this.printService=printService,this.forceRendering(),printService.layout(),this.externalServices.reportTelemetry({type:"print"})}else this.l10n.get("printing_not_ready",null,"Warning: The PDF is not fully loaded for printing.").then(notReadyMessage=>{window.alert(notReadyMessage)});else this.l10n.get("printing_not_supported",null,"Warning: Printing is not fully supported by this browser.").then(printMessage=>{this.error(printMessage)})},afterPrint(){this._scriptingInstance?.scripting.dispatchEventInSandbox({id:"doc",name:"DidPrint"}),this.printService&&(this.printService.destroy(),this.printService=null,this.pdfDocument&&this.pdfDocument.annotationStorage.resetModified()),this.forceRendering()},rotatePages(newRotation){this.pdfDocument&&(newRotation=(this.pdfViewer.pagesRotation+360+newRotation)%360,this.pdfViewer.pagesRotation=newRotation)},requestPresentationMode(){this.pdfPresentationMode&&this.pdfPresentationMode.request()},triggerPrinting(){this.supportsPrinting&&window.print()},bindEvents(){const{eventBus,_boundEvents}=this;_boundEvents.beforePrint=this.beforePrint.bind(this),_boundEvents.afterPrint=this.afterPrint.bind(this),eventBus._on("resize",webViewerResize),eventBus._on("hashchange",webViewerHashchange),eventBus._on("beforeprint",_boundEvents.beforePrint),eventBus._on("afterprint",_boundEvents.afterPrint),eventBus._on("pagerendered",webViewerPageRendered),eventBus._on("updateviewarea",webViewerUpdateViewarea),eventBus._on("pagechanging",webViewerPageChanging),eventBus._on("scalechanging",webViewerScaleChanging),eventBus._on("rotationchanging",webViewerRotationChanging),eventBus._on("sidebarviewchanged",webViewerSidebarViewChanged),eventBus._on("pagemode",webViewerPageMode),eventBus._on("namedaction",webViewerNamedAction),eventBus._on("presentationmodechanged",webViewerPresentationModeChanged),eventBus._on("presentationmode",webViewerPresentationMode),eventBus._on("print",webViewerPrint),eventBus._on("download",webViewerDownload),eventBus._on("save",webViewerSave),eventBus._on("firstpage",webViewerFirstPage),eventBus._on("lastpage",webViewerLastPage),eventBus._on("nextpage",webViewerNextPage),eventBus._on("previouspage",webViewerPreviousPage),eventBus._on("zoomin",webViewerZoomIn),eventBus._on("zoomout",webViewerZoomOut),eventBus._on("zoomreset",webViewerZoomReset),eventBus._on("pagenumberchanged",webViewerPageNumberChanged),eventBus._on("scalechanged",webViewerScaleChanged),eventBus._on("rotatecw",webViewerRotateCw),eventBus._on("rotateccw",webViewerRotateCcw),eventBus._on("optionalcontentconfig",webViewerOptionalContentConfig),eventBus._on("switchscrollmode",webViewerSwitchScrollMode),eventBus._on("scrollmodechanged",webViewerScrollModeChanged),eventBus._on("switchspreadmode",webViewerSwitchSpreadMode),eventBus._on("spreadmodechanged",webViewerSpreadModeChanged),eventBus._on("documentproperties",webViewerDocumentProperties),eventBus._on("find",webViewerFind),eventBus._on("findfromurlhash",webViewerFindFromUrlHash),eventBus._on("updatefindmatchescount",webViewerUpdateFindMatchesCount),eventBus._on("updatefindcontrolstate",webViewerUpdateFindControlState),_app_options.AppOptions.get("pdfBug")&&(_boundEvents.reportPageStatsPDFBug=reportPageStatsPDFBug,eventBus._on("pagerendered",_boundEvents.reportPageStatsPDFBug),eventBus._on("pagechanging",_boundEvents.reportPageStatsPDFBug)),eventBus._on("fileinputchange",webViewerFileInputChange),eventBus._on("openfile",webViewerOpenFile)},bindWindowEvents(){const{eventBus,_boundEvents}=this;_boundEvents.windowResize=()=>{eventBus.dispatch("resize",{source:window})},_boundEvents.windowHashChange=()=>{eventBus.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})},_boundEvents.windowBeforePrint=()=>{eventBus.dispatch("beforeprint",{source:window})},_boundEvents.windowAfterPrint=()=>{eventBus.dispatch("afterprint",{source:window})},_boundEvents.windowUpdateFromSandbox=event=>{eventBus.dispatch("updatefromsandbox",{source:window,detail:event.detail})},window.addEventListener("visibilitychange",webViewerVisibilityChange),window.addEventListener("wheel",webViewerWheel,{passive:!1}),window.addEventListener("touchstart",webViewerTouchStart,{passive:!1}),window.addEventListener("click",webViewerClick),window.addEventListener("keydown",webViewerKeyDown),window.addEventListener("keyup",webViewerKeyUp),window.addEventListener("resize",_boundEvents.windowResize),window.addEventListener("hashchange",_boundEvents.windowHashChange),window.addEventListener("beforeprint",_boundEvents.windowBeforePrint),window.addEventListener("afterprint",_boundEvents.windowAfterPrint),window.addEventListener("updatefromsandbox",_boundEvents.windowUpdateFromSandbox)},unbindEvents(){const{eventBus,_boundEvents}=this;eventBus._off("resize",webViewerResize),eventBus._off("hashchange",webViewerHashchange),eventBus._off("beforeprint",_boundEvents.beforePrint),eventBus._off("afterprint",_boundEvents.afterPrint),eventBus._off("pagerendered",webViewerPageRendered),eventBus._off("updateviewarea",webViewerUpdateViewarea),eventBus._off("pagechanging",webViewerPageChanging),eventBus._off("scalechanging",webViewerScaleChanging),eventBus._off("rotationchanging",webViewerRotationChanging),eventBus._off("sidebarviewchanged",webViewerSidebarViewChanged),eventBus._off("pagemode",webViewerPageMode),eventBus._off("namedaction",webViewerNamedAction),eventBus._off("presentationmodechanged",webViewerPresentationModeChanged),eventBus._off("presentationmode",webViewerPresentationMode),eventBus._off("print",webViewerPrint),eventBus._off("download",webViewerDownload),eventBus._off("save",webViewerSave),eventBus._off("firstpage",webViewerFirstPage),eventBus._off("lastpage",webViewerLastPage),eventBus._off("nextpage",webViewerNextPage),eventBus._off("previouspage",webViewerPreviousPage),eventBus._off("zoomin",webViewerZoomIn),eventBus._off("zoomout",webViewerZoomOut),eventBus._off("zoomreset",webViewerZoomReset),eventBus._off("pagenumberchanged",webViewerPageNumberChanged),eventBus._off("scalechanged",webViewerScaleChanged),eventBus._off("rotatecw",webViewerRotateCw),eventBus._off("rotateccw",webViewerRotateCcw),eventBus._off("optionalcontentconfig",webViewerOptionalContentConfig),eventBus._off("switchscrollmode",webViewerSwitchScrollMode),eventBus._off("scrollmodechanged",webViewerScrollModeChanged),eventBus._off("switchspreadmode",webViewerSwitchSpreadMode),eventBus._off("spreadmodechanged",webViewerSpreadModeChanged),eventBus._off("documentproperties",webViewerDocumentProperties),eventBus._off("find",webViewerFind),eventBus._off("findfromurlhash",webViewerFindFromUrlHash),eventBus._off("updatefindmatchescount",webViewerUpdateFindMatchesCount),eventBus._off("updatefindcontrolstate",webViewerUpdateFindControlState),_boundEvents.reportPageStatsPDFBug&&(eventBus._off("pagerendered",_boundEvents.reportPageStatsPDFBug),eventBus._off("pagechanging",_boundEvents.reportPageStatsPDFBug),_boundEvents.reportPageStatsPDFBug=null),eventBus._off("fileinputchange",webViewerFileInputChange),eventBus._off("openfile",webViewerOpenFile),_boundEvents.beforePrint=null,_boundEvents.afterPrint=null},unbindWindowEvents(){const _boundEvents=this["_boundEvents"];window.removeEventListener("visibilitychange",webViewerVisibilityChange),window.removeEventListener("wheel",webViewerWheel,{passive:!1}),window.removeEventListener("touchstart",webViewerTouchStart,{passive:!1}),window.removeEventListener("click",webViewerClick),window.removeEventListener("keydown",webViewerKeyDown),window.removeEventListener("keyup",webViewerKeyUp),window.removeEventListener("resize",_boundEvents.windowResize),window.removeEventListener("hashchange",_boundEvents.windowHashChange),window.removeEventListener("beforeprint",_boundEvents.windowBeforePrint),window.removeEventListener("afterprint",_boundEvents.windowAfterPrint),window.removeEventListener("updatefromsandbox",_boundEvents.windowUpdateFromSandbox),_boundEvents.windowResize=null,_boundEvents.windowHashChange=null,_boundEvents.windowBeforePrint=null,_boundEvents.windowAfterPrint=null,_boundEvents.windowUpdateFromSandbox=null},accumulateWheelTicks(wholeTicks){(0<this._wheelUnusedTicks&&wholeTicks<0||this._wheelUnusedTicks<0&&0<wholeTicks)&&(this._wheelUnusedTicks=0),this._wheelUnusedTicks+=wholeTicks;wholeTicks=Math.sign(this._wheelUnusedTicks)*Math.floor(Math.abs(this._wheelUnusedTicks));return this._wheelUnusedTicks-=wholeTicks,wholeTicks},get scriptingReady(){return this._scriptingInstance?.ready||!1}};exports.PDFViewerApplication=PDFViewerApplication;let validateFileURL;{const HOSTED_VIEWER_ORIGINS=["null","http://mozilla.github.io","https://mozilla.github.io"];validateFileURL=function(file){if(void 0!==file)try{var viewerOrigin=new URL(window.location.href).origin||"null";if(HOSTED_VIEWER_ORIGINS.includes(viewerOrigin))return;var{}=new URL(file,window.location.href)}catch(ex){const message=ex&&ex.message;throw PDFViewerApplication.l10n.get("loading_error",null,"An error occurred while loading the PDF.").then(loadingErrorMessage=>{PDFViewerApplication.error(loadingErrorMessage,{message:message})}),ex}}}function reportPageStatsPDFBug({pageNumber}){var pageStats;"undefined"==typeof Stats||!Stats.enabled||(pageStats=(pageStats=PDFViewerApplication.pdfViewer.getPageView(pageNumber-1))&&pageStats.pdfPage&&pageStats.pdfPage.stats)&&Stats.add(pageNumber,pageStats)}function webViewerInitialized(){const appConfig=PDFViewerApplication.appConfig;var file=document.location.search.substring(1),file=(0,_ui_utils.parseQueryString)(file),file="file"in file?file.file:_app_options.AppOptions.get("defaultUrl");validateFileURL(file);const fileInput=document.createElement("input");fileInput.id=appConfig.openFileInputName,fileInput.className="fileInput",fileInput.setAttribute("type","file"),fileInput.oncontextmenu=_ui_utils.noContextMenuHandler,document.body.appendChild(fileInput),window.File&&window.FileReader&&window.FileList&&window.Blob?fileInput.value=null:(appConfig.toolbar.openFile.setAttribute("hidden","true"),appConfig.secondaryToolbar.openFileButton.setAttribute("hidden","true")),fileInput.addEventListener("change",function(evt){var files=evt.target.files;files&&0!==files.length&&PDFViewerApplication.eventBus.dispatch("fileinputchange",{source:this,fileInput:evt.target})}),appConfig.mainContainer.addEventListener("dragover",function(evt){evt.preventDefault(),evt.dataTransfer.dropEffect="move"}),appConfig.mainContainer.addEventListener("drop",function(evt){evt.preventDefault();var files=evt.dataTransfer.files;files&&0!==files.length&&PDFViewerApplication.eventBus.dispatch("fileinputchange",{source:this,fileInput:evt.dataTransfer})}),PDFViewerApplication.supportsDocumentFonts||(_app_options.AppOptions.set("disableFontFace",!0),PDFViewerApplication.l10n.get("web_fonts_disabled",null,"Web fonts are disabled: unable to use embedded PDF fonts.").then(msg=>{console.warn(msg)})),PDFViewerApplication.supportsPrinting||(appConfig.toolbar.print.classList.add("hidden"),appConfig.secondaryToolbar.printButton.classList.add("hidden")),PDFViewerApplication.supportsFullscreen||(appConfig.toolbar.presentationModeButton.classList.add("hidden"),appConfig.secondaryToolbar.presentationModeButton.classList.add("hidden")),PDFViewerApplication.supportsIntegratedFind&&appConfig.toolbar.viewFind.classList.add("hidden"),appConfig.mainContainer.addEventListener("transitionend",function(evt){evt.target===this&&PDFViewerApplication.eventBus.dispatch("resize",{source:this})},!0);try{webViewerOpenFileViaURL(file)}catch(reason){PDFViewerApplication.l10n.get("loading_error",null,"An error occurred while loading the PDF.").then(msg=>{PDFViewerApplication.error(msg,reason)})}}let webViewerOpenFileViaURL;function webViewerPageRendered({pageNumber,timestamp,error}){if(pageNumber===PDFViewerApplication.page&&PDFViewerApplication.toolbar.updateLoadingIndicatorState(!1),PDFViewerApplication.pdfSidebar.isThumbnailViewVisible){var pageView=PDFViewerApplication.pdfViewer.getPageView(pageNumber-1);const thumbnailView=PDFViewerApplication.pdfThumbnailViewer.getThumbnail(pageNumber-1);pageView&&thumbnailView&&thumbnailView.setImage(pageView)}error&&PDFViewerApplication.l10n.get("rendering_error",null,"An error occurred while rendering the page.").then(msg=>{PDFViewerApplication.error(msg,error)}),PDFViewerApplication.externalServices.reportTelemetry({type:"pageInfo",timestamp:timestamp}),PDFViewerApplication.pdfDocument.getStats().then(function(stats){PDFViewerApplication.externalServices.reportTelemetry({type:"documentStats",stats:stats})})}function webViewerPageMode({mode}){let view;switch(mode){case"thumbs":view=_ui_utils.SidebarView.THUMBS;break;case"bookmarks":case"outline":view=_ui_utils.SidebarView.OUTLINE;break;case"attachments":view=_ui_utils.SidebarView.ATTACHMENTS;break;case"layers":view=_ui_utils.SidebarView.LAYERS;break;case"none":view=_ui_utils.SidebarView.NONE;break;default:return void console.error('Invalid "pagemode" hash parameter: '+mode)}PDFViewerApplication.pdfSidebar.switchView(view,!0)}function webViewerNamedAction(evt){switch(evt.action){case"GoToPage":PDFViewerApplication.appConfig.toolbar.pageNumber.select();break;case"Find":PDFViewerApplication.supportsIntegratedFind||PDFViewerApplication.findBar.toggle();break;case"Print":PDFViewerApplication.triggerPrinting();break;case"SaveAs":webViewerSave()}}function webViewerPresentationModeChanged(evt){PDFViewerApplication.pdfViewer.presentationModeState=evt.state}function webViewerSidebarViewChanged(evt){PDFViewerApplication.pdfRenderingQueue.isThumbnailViewEnabled=PDFViewerApplication.pdfSidebar.isThumbnailViewVisible;const store=PDFViewerApplication.store;store&&PDFViewerApplication.isInitialViewSet&&store.set("sidebarView",evt.view).catch(function(){})}function webViewerUpdateViewarea(loading){const location=loading.location,store=PDFViewerApplication.store;store&&PDFViewerApplication.isInitialViewSet&&store.setMultiple({page:location.pageNumber,zoom:location.scale,scrollLeft:location.left,scrollTop:location.top,rotation:location.rotation}).catch(function(){});loading=PDFViewerApplication.pdfLinkService.getAnchorUrl(location.pdfOpenParams);PDFViewerApplication.appConfig.toolbar.viewBookmark.href=loading,PDFViewerApplication.appConfig.secondaryToolbar.viewBookmarkButton.href=loading;loading=PDFViewerApplication.pdfViewer.getPageView(PDFViewerApplication.page-1),loading=(loading&&loading.renderingState)!==_pdf_rendering_queue.RenderingStates.FINISHED;PDFViewerApplication.toolbar.updateLoadingIndicatorState(loading)}function webViewerScrollModeChanged(evt){const store=PDFViewerApplication.store;store&&PDFViewerApplication.isInitialViewSet&&store.set("scrollMode",evt.mode).catch(function(){})}function webViewerSpreadModeChanged(evt){const store=PDFViewerApplication.store;store&&PDFViewerApplication.isInitialViewSet&&store.set("spreadMode",evt.mode).catch(function(){})}function webViewerResize(){const{pdfDocument,pdfViewer}=PDFViewerApplication;var currentScaleValue;pdfDocument&&("auto"!==(currentScaleValue=pdfViewer.currentScaleValue)&&"page-fit"!==currentScaleValue&&"page-width"!==currentScaleValue||(pdfViewer.currentScaleValue=currentScaleValue),pdfViewer.update())}function webViewerHashchange(hash){hash=hash.hash;hash&&(PDFViewerApplication.isInitialViewSet?PDFViewerApplication.pdfHistory.popStateInProgress||PDFViewerApplication.pdfLinkService.setHash(hash):PDFViewerApplication.initialBookmark=hash)}webViewerOpenFileViaURL=function(file){if(file&&0===file.lastIndexOf("file:",0)){PDFViewerApplication.setTitleUsingUrl(file);const xhr=new XMLHttpRequest;return xhr.onload=function(){PDFViewerApplication.open(new Uint8Array(xhr.response))},xhr.open("GET",file),xhr.responseType="arraybuffer",void xhr.send()}file&&PDFViewerApplication.open(file)};let webViewerFileInputChange,webViewerOpenFile;function webViewerPresentationMode(){PDFViewerApplication.requestPresentationMode()}function webViewerPrint(){PDFViewerApplication.triggerPrinting()}function webViewerDownload(){PDFViewerApplication.downloadOrSave({sourceEventType:"download"})}function webViewerSave(){PDFViewerApplication.downloadOrSave({sourceEventType:"save"})}function webViewerFirstPage(){PDFViewerApplication.pdfDocument&&(PDFViewerApplication.page=1)}function webViewerLastPage(){PDFViewerApplication.pdfDocument&&(PDFViewerApplication.page=PDFViewerApplication.pagesCount)}function webViewerNextPage(){PDFViewerApplication.pdfViewer.nextPage()}function webViewerPreviousPage(){PDFViewerApplication.pdfViewer.previousPage()}function webViewerZoomIn(){PDFViewerApplication.zoomIn()}function webViewerZoomOut(){PDFViewerApplication.zoomOut()}function webViewerZoomReset(){PDFViewerApplication.zoomReset()}function webViewerPageNumberChanged(evt){const pdfViewer=PDFViewerApplication.pdfViewer;""!==evt.value&&PDFViewerApplication.pdfLinkService.goToPage(evt.value),evt.value!==pdfViewer.currentPageNumber.toString()&&evt.value!==pdfViewer.currentPageLabel&&PDFViewerApplication.toolbar.setPageNumber(pdfViewer.currentPageNumber,pdfViewer.currentPageLabel)}function webViewerScaleChanged(evt){PDFViewerApplication.pdfViewer.currentScaleValue=evt.value}function webViewerRotateCw(){PDFViewerApplication.rotatePages(90)}function webViewerRotateCcw(){PDFViewerApplication.rotatePages(-90)}function webViewerOptionalContentConfig(evt){PDFViewerApplication.pdfViewer.optionalContentConfigPromise=evt.promise}function webViewerSwitchScrollMode(evt){PDFViewerApplication.pdfViewer.scrollMode=evt.mode}function webViewerSwitchSpreadMode(evt){PDFViewerApplication.pdfViewer.spreadMode=evt.mode}function webViewerDocumentProperties(){PDFViewerApplication.pdfDocumentProperties.open()}function webViewerFind(evt){PDFViewerApplication.findController.executeCommand("find"+evt.type,{query:evt.query,phraseSearch:evt.phraseSearch,caseSensitive:evt.caseSensitive,entireWord:evt.entireWord,highlightAll:evt.highlightAll,findPrevious:evt.findPrevious})}function webViewerFindFromUrlHash(evt){PDFViewerApplication.findController.executeCommand("find",{query:evt.query,phraseSearch:evt.phraseSearch,caseSensitive:!1,entireWord:!1,highlightAll:!0,findPrevious:!1})}function webViewerUpdateFindMatchesCount({matchesCount}){PDFViewerApplication.supportsIntegratedFind?PDFViewerApplication.externalServices.updateFindMatchesCount(matchesCount):PDFViewerApplication.findBar.updateResultsCount(matchesCount)}function webViewerUpdateFindControlState({state,previous,matchesCount,rawQuery}){PDFViewerApplication.supportsIntegratedFind?PDFViewerApplication.externalServices.updateFindControlState({result:state,findPrevious:previous,matchesCount:matchesCount,rawQuery:rawQuery}):PDFViewerApplication.findBar.updateUIState(state,previous,matchesCount)}function webViewerScaleChanging(evt){PDFViewerApplication.toolbar.setPageScale(evt.presetValue,evt.scale),PDFViewerApplication.pdfViewer.update()}function webViewerRotationChanging(evt){PDFViewerApplication.pdfThumbnailViewer.pagesRotation=evt.pagesRotation,PDFViewerApplication.forceRendering(),PDFViewerApplication.pdfViewer.currentPageNumber=evt.pageNumber}function webViewerPageChanging({pageNumber,pageLabel}){PDFViewerApplication.toolbar.setPageNumber(pageNumber,pageLabel),PDFViewerApplication.secondaryToolbar.setPageNumber(pageNumber),PDFViewerApplication.pdfSidebar.isThumbnailViewVisible&&PDFViewerApplication.pdfThumbnailViewer.scrollThumbnailIntoView(pageNumber)}function webViewerVisibilityChange(evt){"visible"===document.visibilityState&&setZoomDisabledTimeout()}webViewerFileInputChange=function(file){if(!PDFViewerApplication.pdfViewer||!PDFViewerApplication.pdfViewer.isInPresentationMode){file=file.fileInput.files[0];if(_viewer_compatibility.viewerCompatibilityParams.disableCreateObjectURL){PDFViewerApplication.setTitleUsingUrl(file.name);const fileReader=new FileReader;fileReader.onload=function(buffer){buffer=buffer.target.result;PDFViewerApplication.open(new Uint8Array(buffer))},fileReader.readAsArrayBuffer(file)}else{let url=URL.createObjectURL(file);file.name&&(url={url:url,originalUrl:file.name}),PDFViewerApplication.open(url)}const appConfig=PDFViewerApplication.appConfig;appConfig.toolbar.viewBookmark.setAttribute("hidden","true"),appConfig.secondaryToolbar.viewBookmarkButton.setAttribute("hidden","true"),appConfig.toolbar.download.setAttribute("hidden","true"),appConfig.secondaryToolbar.downloadButton.setAttribute("hidden","true")}},webViewerOpenFile=function(evt){var openFileInputName=PDFViewerApplication.appConfig.openFileInputName;document.getElementById(openFileInputName).click()};let zoomDisabledTimeout=null;function setZoomDisabledTimeout(){zoomDisabledTimeout&&clearTimeout(zoomDisabledTimeout),zoomDisabledTimeout=setTimeout(function(){zoomDisabledTimeout=null},WHEEL_ZOOM_DISABLED_TIMEOUT)}function webViewerWheel(evt){const{pdfViewer,supportedMouseWheelZoomModifierKeys}=PDFViewerApplication;if(!pdfViewer.isInPresentationMode)if(evt.ctrlKey&&supportedMouseWheelZoomModifierKeys.ctrlKey||evt.metaKey&&supportedMouseWheelZoomModifierKeys.metaKey){if(evt.preventDefault(),!zoomDisabledTimeout&&"hidden"!==document.visibilityState){var dx=pdfViewer.currentScale,scaleCorrectionFactor=(0,_ui_utils.normalizeWheelEventDirection)(evt);let ticks=0;ticks=evt.deltaMode===WheelEvent.DOM_DELTA_LINE||evt.deltaMode===WheelEvent.DOM_DELTA_PAGE?1<=Math.abs(scaleCorrectionFactor)?Math.sign(scaleCorrectionFactor):PDFViewerApplication.accumulateWheelTicks(scaleCorrectionFactor):PDFViewerApplication.accumulateWheelTicks(scaleCorrectionFactor/30),ticks<0?PDFViewerApplication.zoomOut(-ticks):0<ticks&&PDFViewerApplication.zoomIn(ticks);var dy=pdfViewer.currentScale;dx!==dy&&(scaleCorrectionFactor=dy/dx-1,dy=pdfViewer.container.getBoundingClientRect(),dx=evt.clientX-dy.left,dy=evt.clientY-dy.top,pdfViewer.container.scrollLeft+=dx*scaleCorrectionFactor,pdfViewer.container.scrollTop+=dy*scaleCorrectionFactor)}}else setZoomDisabledTimeout()}function webViewerTouchStart(evt){1<evt.touches.length&&evt.preventDefault()}function webViewerClick(evt){if(PDFViewerApplication.triggerDelayedFallback&&PDFViewerApplication.pdfViewer.containsElement(evt.target)&&PDFViewerApplication.triggerDelayedFallback(),PDFViewerApplication.secondaryToolbar.isOpen){const appConfig=PDFViewerApplication.appConfig;(PDFViewerApplication.pdfViewer.containsElement(evt.target)||appConfig.toolbar.container.contains(evt.target)&&evt.target!==appConfig.secondaryToolbar.toggleButton)&&PDFViewerApplication.secondaryToolbar.close()}}function webViewerKeyUp(evt){9===evt.keyCode&&PDFViewerApplication.triggerDelayedFallback&&PDFViewerApplication.triggerDelayedFallback()}function webViewerKeyDown(evt){if(!PDFViewerApplication.overlayManager.active){let handled=!1,ensureViewerFocused=!1;var cmd=(evt.ctrlKey?1:0)|(evt.altKey?2:0)|(evt.shiftKey?4:0)|(evt.metaKey?8:0);const pdfViewer=PDFViewerApplication.pdfViewer;var findState,isViewerInPresentationMode=pdfViewer&&pdfViewer.isInPresentationMode;if(1==cmd||8==cmd||5==cmd||12==cmd)switch(evt.keyCode){case 70:PDFViewerApplication.supportsIntegratedFind||evt.shiftKey||(PDFViewerApplication.findBar.open(),handled=!0);break;case 71:PDFViewerApplication.supportsIntegratedFind||((findState=PDFViewerApplication.findController.state)&&PDFViewerApplication.findController.executeCommand("findagain",{query:findState.query,phraseSearch:findState.phraseSearch,caseSensitive:findState.caseSensitive,entireWord:findState.entireWord,highlightAll:findState.highlightAll,findPrevious:5==cmd||12==cmd}),handled=!0);break;case 61:case 107:case 187:case 171:isViewerInPresentationMode||PDFViewerApplication.zoomIn(),handled=!0;break;case 173:case 109:case 189:isViewerInPresentationMode||PDFViewerApplication.zoomOut(),handled=!0;break;case 48:case 96:isViewerInPresentationMode||(setTimeout(function(){PDFViewerApplication.zoomReset()}),handled=!1);break;case 38:(isViewerInPresentationMode||1<PDFViewerApplication.page)&&(PDFViewerApplication.page=1,handled=!0,ensureViewerFocused=!0);break;case 40:(isViewerInPresentationMode||PDFViewerApplication.page<PDFViewerApplication.pagesCount)&&(PDFViewerApplication.page=PDFViewerApplication.pagesCount,handled=!0,ensureViewerFocused=!0)}const eventBus=PDFViewerApplication["eventBus"];if(1==cmd||8==cmd)switch(evt.keyCode){case 83:eventBus.dispatch("download",{source:window}),handled=!0;break;case 79:eventBus.dispatch("openfile",{source:window}),handled=!0}if(3==cmd||10==cmd)switch(evt.keyCode){case 80:PDFViewerApplication.requestPresentationMode(),handled=!0;break;case 71:PDFViewerApplication.appConfig.toolbar.pageNumber.select(),handled=!0}if(handled)return ensureViewerFocused&&!isViewerInPresentationMode&&pdfViewer.focus(),void evt.preventDefault();const curElement=(0,_ui_utils.getActiveOrFocusedElement)();var curElementTagName=curElement&&curElement.tagName.toUpperCase();if(!("INPUT"===curElementTagName||"TEXTAREA"===curElementTagName||"SELECT"===curElementTagName||curElement&&curElement.isContentEditable)||27===evt.keyCode){if(0==cmd){let turnPage=0,turnOnlyIfPageFit=!1;switch(evt.keyCode){case 38:case 33:pdfViewer.isVerticalScrollbarEnabled&&(turnOnlyIfPageFit=!0),turnPage=-1;break;case 8:isViewerInPresentationMode||(turnOnlyIfPageFit=!0),turnPage=-1;break;case 37:pdfViewer.isHorizontalScrollbarEnabled&&(turnOnlyIfPageFit=!0);case 75:case 80:turnPage=-1;break;case 27:PDFViewerApplication.secondaryToolbar.isOpen&&(PDFViewerApplication.secondaryToolbar.close(),handled=!0),!PDFViewerApplication.supportsIntegratedFind&&PDFViewerApplication.findBar.opened&&(PDFViewerApplication.findBar.close(),handled=!0);break;case 40:case 34:pdfViewer.isVerticalScrollbarEnabled&&(turnOnlyIfPageFit=!0),turnPage=1;break;case 13:case 32:isViewerInPresentationMode||(turnOnlyIfPageFit=!0),turnPage=1;break;case 39:pdfViewer.isHorizontalScrollbarEnabled&&(turnOnlyIfPageFit=!0);case 74:case 78:turnPage=1;break;case 36:(isViewerInPresentationMode||1<PDFViewerApplication.page)&&(PDFViewerApplication.page=1,handled=!0,ensureViewerFocused=!0);break;case 35:(isViewerInPresentationMode||PDFViewerApplication.page<PDFViewerApplication.pagesCount)&&(PDFViewerApplication.page=PDFViewerApplication.pagesCount,handled=!0,ensureViewerFocused=!0);break;case 83:PDFViewerApplication.pdfCursorTools.switchTool(_pdf_cursor_tools.CursorTool.SELECT);break;case 72:PDFViewerApplication.pdfCursorTools.switchTool(_pdf_cursor_tools.CursorTool.HAND);break;case 82:PDFViewerApplication.rotatePages(90);break;case 115:PDFViewerApplication.pdfSidebar.toggle()}0===turnPage||turnOnlyIfPageFit&&"page-fit"!==pdfViewer.currentScaleValue||(0<turnPage?pdfViewer.nextPage():pdfViewer.previousPage(),handled=!0)}if(4==cmd)switch(evt.keyCode){case 13:case 32:if(!isViewerInPresentationMode&&"page-fit"!==pdfViewer.currentScaleValue)break;1<PDFViewerApplication.page&&PDFViewerApplication.page--,handled=!0;break;case 82:PDFViewerApplication.rotatePages(-90)}handled||isViewerInPresentationMode||(33<=evt.keyCode&&evt.keyCode<=40||32===evt.keyCode&&"BUTTON"!==curElementTagName)&&(ensureViewerFocused=!0),ensureViewerFocused&&!pdfViewer.containsElement(curElement)&&pdfViewer.focus(),handled&&evt.preventDefault()}}}function beforeUnload(evt){return evt.preventDefault(),evt.returnValue="",!1}function apiPageLayoutToSpreadMode(layout){switch(layout){case"SinglePage":case"OneColumn":return _ui_utils.SpreadMode.NONE;case"TwoColumnLeft":case"TwoPageLeft":return _ui_utils.SpreadMode.ODD;case"TwoColumnRight":case"TwoPageRight":return _ui_utils.SpreadMode.EVEN}return _ui_utils.SpreadMode.NONE}const PDFPrintServiceFactory={instance:{supportsPrinting:!1,createPrintService(){throw new Error("Not implemented: createPrintService")}}};exports.PDFPrintServiceFactory=PDFPrintServiceFactory},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.approximateFraction=function(x){if(Math.floor(x)===x)return[x,1];var xinv=1/x;{if(8<xinv)return[1,8];if(Math.floor(xinv)===xinv)return[1,xinv]}var x_=1<x?xinv:x;let a=0,b=1,c=1,d=1;for(;;){var p=a+c,q=b+d;if(8<q)break;x_<=p/q?(c=p,d=q):(a=p,b=q)}let result;result=x_-a/b<c/d-x_?x_===x?[a,b]:[b,a]:x_===x?[c,d]:[d,c];return result},exports.backtrackBeforeAllVisibleElements=backtrackBeforeAllVisibleElements,exports.binarySearchFirstItem=binarySearchFirstItem,exports.getActiveOrFocusedElement=function(){let curRoot=document,curActiveOrFocused=curRoot.activeElement||curRoot.querySelector(":focus");for(;curActiveOrFocused&&curActiveOrFocused.shadowRoot;)curRoot=curActiveOrFocused.shadowRoot,curActiveOrFocused=curRoot.activeElement||curRoot.querySelector(":focus");return curActiveOrFocused},exports.getOutputScale=function(pixelRatio){var devicePixelRatio=window.devicePixelRatio||1,pixelRatio=pixelRatio.webkitBackingStorePixelRatio||pixelRatio.mozBackingStorePixelRatio||pixelRatio.backingStorePixelRatio||1,pixelRatio=devicePixelRatio/pixelRatio;return{sx:pixelRatio,sy:pixelRatio,scaled:1!=pixelRatio}},exports.getPageSizeInches=function({view:y2,userUnit:height,rotate:changeOrientation}){var[width,y1,x2,y2]=y2,changeOrientation=changeOrientation%180!=0,width=(x2-width)/72*height,height=(y2-y1)/72*height;return{width:changeOrientation?height:width,height:changeOrientation?width:height}},exports.getPDFFileNameFromURL=function(url,defaultFilename="document.pdf"){if("string"!=typeof url)return defaultFilename;if(function(url){let i=0;var ii=url.length;for(;i<ii&&""===url[i].trim();)i++;return"data:"===url.substring(i,i+5).toLowerCase()}(url))return console.warn('getPDFFileNameFromURL: ignoring "data:" URL for performance reasons.'),defaultFilename;const reFilename=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,splitURI=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(url);let suggestedFilename=reFilename.exec(splitURI[1])||reFilename.exec(splitURI[2])||reFilename.exec(splitURI[3]);if(suggestedFilename&&(suggestedFilename=suggestedFilename[0],suggestedFilename.includes("%")))try{suggestedFilename=reFilename.exec(decodeURIComponent(suggestedFilename))[0]}catch(ex){}return suggestedFilename||defaultFilename},exports.getVisibleElements=function({scrollEl:last,views,sortByVisibility=!1,horizontal=!1,rtl=!1}){const top=last.scrollTop,bottom=top+last.clientHeight,left=last.scrollLeft,right=left+last.clientWidth;const visible=[],numViews=views.length;let firstVisibleElementInd=binarySearchFirstItem(views,horizontal?function(elementLeft){var elementRight=elementLeft.div,elementRight=(elementLeft=elementRight.offsetLeft+elementRight.clientLeft)+elementRight.clientWidth;return rtl?elementLeft<right:elementRight>left}:function(element){return(element=element.div).offsetTop+element.clientTop+element.clientHeight>top});0<firstVisibleElementInd&&firstVisibleElementInd<numViews&&!horizontal&&(firstVisibleElementInd=backtrackBeforeAllVisibleElements(firstVisibleElementInd,views,top));let lastEdge=horizontal?right:-1;for(let i=firstVisibleElementInd;i<numViews;i++){var view=views[i],hiddenHeight=view.div,currentWidth=hiddenHeight.offsetLeft+hiddenHeight.clientLeft,currentHeight=hiddenHeight.offsetTop+hiddenHeight.clientTop,percent=hiddenHeight.clientWidth,viewHeight=hiddenHeight.clientHeight,fractionWidth=currentWidth+percent,hiddenHeight=currentHeight+viewHeight;if(-1===lastEdge)bottom<=hiddenHeight&&(lastEdge=hiddenHeight);else if((horizontal?currentWidth:currentHeight)>lastEdge)break;hiddenHeight<=top||bottom<=currentHeight||fractionWidth<=left||currentWidth>=right||(hiddenHeight=Math.max(0,top-currentHeight)+Math.max(0,hiddenHeight-bottom),fractionWidth=Math.max(0,left-currentWidth)+Math.max(0,fractionWidth-right),percent=(viewHeight-hiddenHeight)/viewHeight*(fractionWidth=(percent-fractionWidth)/percent)*100|0,visible.push({id:view.id,x:currentWidth,y:currentHeight,view:view,percent:percent,widthPercent:100*fractionWidth|0}))}var first=visible[0],last=visible[visible.length-1];sortByVisibility&&visible.sort(function(a,b){var pc=a.percent-b.percent;return.001<Math.abs(pc)?-pc:a.id-b.id});return{first:first,last:last,views:visible}},exports.isPortraitOrientation=function(size){return size.width<=size.height},exports.isValidRotation=function(angle){return Number.isInteger(angle)&&angle%90==0},exports.isValidScrollMode=function(mode){return Number.isInteger(mode)&&Object.values(ScrollMode).includes(mode)&&mode!==ScrollMode.UNKNOWN},exports.isValidSpreadMode=function(mode){return Number.isInteger(mode)&&Object.values(SpreadMode).includes(mode)&&mode!==SpreadMode.UNKNOWN},exports.moveToEndOfArray=function(arr,condition){const moved=[],len=arr.length;let write=0;for(let read=0;read<len;++read)condition(arr[read])?moved.push(arr[read]):(arr[write]=arr[read],++write);for(let read=0;write<len;++read,++write)arr[write]=moved[read]},exports.noContextMenuHandler=function(evt){evt.preventDefault()},exports.normalizeWheelEventDelta=function(evt){let delta=normalizeWheelEventDirection(evt);0===evt.deltaMode?delta/=900:1===evt.deltaMode&&(delta/=30);return delta},exports.normalizeWheelEventDirection=normalizeWheelEventDirection,exports.parseQueryString=function(query){const parts=query.split("&"),params=Object.create(null);for(let i=0,ii=parts.length;i<ii;++i){const param=parts[i].split("=");var key=param[0].toLowerCase(),value=1<param.length?param[1]:null;params[decodeURIComponent(key)]=decodeURIComponent(value)}return params},exports.roundToDivide=function(x,div){var r=x%div;return 0==r?x:Math.round(x-r+div)},exports.scrollIntoView=function(element,spot,skipOverflowHiddenElements=!1){let parent=element.offsetParent;if(parent){let offsetY=element.offsetTop+element.clientTop,offsetX=element.offsetLeft+element.clientLeft;for(;parent.clientHeight===parent.scrollHeight&&parent.clientWidth===parent.scrollWidth||skipOverflowHiddenElements&&"hidden"===getComputedStyle(parent).overflow;)if(parent.dataset._scaleY&&(offsetY/=parent.dataset._scaleY,offsetX/=parent.dataset._scaleX),offsetY+=parent.offsetTop,offsetX+=parent.offsetLeft,parent=parent.offsetParent,!parent)return;spot&&(void 0!==spot.top&&(offsetY+=spot.top),void 0!==spot.left&&(offsetX+=spot.left,parent.scrollLeft=offsetX)),parent.scrollTop=offsetY}else console.error("offsetParent is not set -- cannot scroll")},exports.waitOnEventOrTimeout=function({target,name,delay=0}){return new Promise(function(resolve,reject){if("object"!=typeof target||!name||"string"!=typeof name||!(Number.isInteger(delay)&&0<=delay))throw new Error("waitOnEventOrTimeout - invalid parameters.");function handler(type){target instanceof EventBus?target._off(name,eventHandler):target.removeEventListener(name,eventHandler),timeout&&clearTimeout(timeout),resolve(type)}const eventHandler=handler.bind(null,WaitOnType.EVENT);target instanceof EventBus?target._on(name,eventHandler):target.addEventListener(name,eventHandler);var timeoutHandler=handler.bind(null,WaitOnType.TIMEOUT);const timeout=setTimeout(timeoutHandler,delay)})},exports.watchScroll=function(viewAreaElement,callback){function debounceScroll(evt){rAF=rAF||window.requestAnimationFrame(function(){rAF=null;var lastY=viewAreaElement.scrollLeft,currentY=state.lastX;lastY!==currentY&&(state.right=currentY<lastY),state.lastX=lastY;currentY=viewAreaElement.scrollTop,lastY=state.lastY;currentY!==lastY&&(state.down=lastY<currentY),state.lastY=currentY,callback(state)})}const state={right:!0,down:!0,lastX:viewAreaElement.scrollLeft,lastY:viewAreaElement.scrollTop,_eventHandler:debounceScroll};let rAF=null;return viewAreaElement.addEventListener("scroll",debounceScroll,!0),state},exports.WaitOnType=exports.VERTICAL_PADDING=exports.UNKNOWN_SCALE=exports.TextLayerMode=exports.SpreadMode=exports.SidebarView=exports.ScrollMode=exports.SCROLLBAR_PADDING=exports.RendererType=exports.ProgressBar=exports.PresentationModeState=exports.NullL10n=exports.MIN_SCALE=exports.MAX_SCALE=exports.MAX_AUTO_SCALE=exports.EventBus=exports.DEFAULT_SCALE_VALUE=exports.DEFAULT_SCALE=exports.CSS_UNITS=exports.AutoPrintRegExp=exports.animationStarted=void 0;exports.CSS_UNITS=96/72;exports.DEFAULT_SCALE_VALUE="auto";exports.DEFAULT_SCALE=1;exports.MIN_SCALE=.1;exports.MAX_SCALE=10;exports.UNKNOWN_SCALE=0;exports.MAX_AUTO_SCALE=1.25;exports.SCROLLBAR_PADDING=40;exports.VERTICAL_PADDING=5;exports.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};exports.SidebarView={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};exports.RendererType={CANVAS:"canvas",SVG:"svg"};exports.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const ScrollMode={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2};exports.ScrollMode=ScrollMode;const SpreadMode={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};exports.SpreadMode=SpreadMode;function binarySearchFirstItem(items,condition){let minIndex=0,maxIndex=items.length-1;if(maxIndex<0||!condition(items[maxIndex]))return items.length;if(condition(items[minIndex]))return minIndex;for(;minIndex<maxIndex;){var currentIndex=minIndex+maxIndex>>1;condition(items[currentIndex])?maxIndex=currentIndex:minIndex=1+currentIndex}return minIndex}function backtrackBeforeAllVisibleElements(index,views,top){if(index<2)return index;let elt=views[index].div,pageTop=elt.offsetTop+elt.clientTop;pageTop>=top&&(elt=views[index-1].div,pageTop=elt.offsetTop+elt.clientTop);for(let i=index-2;0<=i&&(elt=views[i].div,!(elt.offsetTop+elt.clientTop+elt.clientHeight<=pageTop));--i)index=i;return index}function normalizeWheelEventDirection(angle){let delta=Math.sqrt(angle.deltaX*angle.deltaX+angle.deltaY*angle.deltaY);angle=Math.atan2(angle.deltaY,angle.deltaX);return-.25*Math.PI<angle&&angle<.75*Math.PI&&(delta=-delta),delta}exports.AutoPrintRegExp=/\bprint\s*\(/,exports.NullL10n={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(property,args,fallback){return function(text,args){return args?text.replace(/\{\{\s*(\w+)\s*\}\}/g,(all,name)=>name in args?args[name]:"{{"+name+"}}"):text}(fallback,args)},async translate(element){}};const WaitOnType={EVENT:"event",TIMEOUT:"timeout"};exports.WaitOnType=WaitOnType;var animationStarted=new Promise(function(resolve){window.requestAnimationFrame(resolve)});exports.animationStarted=animationStarted;class EventBus{constructor(options){this._listeners=Object.create(null)}on(eventName,listener,options=null){this._on(eventName,listener,{external:!0,once:options?.once})}off(eventName,listener,options=null){this._off(eventName,listener,{external:!0,once:options?.once})}dispatch(eventName){const eventListeners=this._listeners[eventName];if(eventListeners&&0!==eventListeners.length){const args=Array.prototype.slice.call(arguments,1);let externalListeners;eventListeners.slice(0).forEach(({listener,external,once})=>{once&&this._off(eventName,listener),external?(externalListeners=externalListeners||[]).push(listener):listener.apply(null,args)}),externalListeners&&(externalListeners.forEach(listener=>{listener.apply(null,args)}),externalListeners=null)}}_on(eventName,listener,options=null){var _this$_listeners;const eventListeners=(_this$_listeners=this._listeners)[eventName]||(_this$_listeners[eventName]=[]);eventListeners.push({listener:listener,external:!0===options?.external,once:!0===options?.once})}_off(eventName,listener,options=0){const eventListeners=this._listeners[eventName];if(eventListeners)for(let i=0,ii=eventListeners.length;i<ii;i++)if(eventListeners[i].listener===listener)return void eventListeners.splice(i,1)}}exports.EventBus=EventBus;exports.ProgressBar=class{constructor(id,{height,width,units}={}){this.visible=!0,this.div=document.querySelector(id+" .progress"),this.bar=this.div.parentNode,this.height=height||100,this.width=width||100,this.units=units||"%",this.div.style.height=this.height+this.units,this.percent=0}_updateBar(){if(this._indeterminate)return this.div.classList.add("indeterminate"),void(this.div.style.width=this.width+this.units);this.div.classList.remove("indeterminate");var progressSize=this.width*this._percent/100;this.div.style.width=progressSize+this.units}get percent(){return this._percent}set percent(val){var min,max;this._indeterminate=isNaN(val),this._percent=(min=0,max=100,Math.min(Math.max(val,min),max)),this._updateBar()}setWidth(scrollbarWidth){if(scrollbarWidth){scrollbarWidth=scrollbarWidth.parentNode.offsetWidth-scrollbarWidth.offsetWidth;if(0<scrollbarWidth){const doc=document.documentElement;doc.style.setProperty("--loadingBar-end-offset",scrollbarWidth+"px")}}}hide(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"))}show(){this.visible||(this.visible=!0,this.bar.classList.remove("hidden"))}}},module=>{let pdfjsLib;pdfjsLib="undefined"!=typeof window&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:require("../build/pdf.js"),module.exports=pdfjsLib},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFCursorTools=exports.CursorTool=void 0;var _grab_to_pan=__webpack_require__(7),_ui_utils=__webpack_require__(4);const CursorTool={SELECT:0,HAND:1,ZOOM:2};exports.CursorTool=CursorTool;exports.PDFCursorTools=class{constructor({container,eventBus,cursorToolOnLoad=CursorTool.SELECT}){this.container=container,this.eventBus=eventBus,this.active=CursorTool.SELECT,this.activeBeforePresentationMode=null,this.handTool=new _grab_to_pan.GrabToPan({element:this.container}),this._addEventListeners(),Promise.resolve().then(()=>{this.switchTool(cursorToolOnLoad)})}get activeTool(){return this.active}switchTool(tool){if(null===this.activeBeforePresentationMode&&tool!==this.active){var disableActiveTool=()=>{switch(this.active){case CursorTool.SELECT:break;case CursorTool.HAND:this.handTool.deactivate();break;case CursorTool.ZOOM:}};switch(tool){case CursorTool.SELECT:disableActiveTool();break;case CursorTool.HAND:disableActiveTool(),this.handTool.activate();break;default:CursorTool.ZOOM;return void console.error(`switchTool: "${tool}" is an unsupported value.`)}this.active=tool,this._dispatchEvent()}}_dispatchEvent(){this.eventBus.dispatch("cursortoolchanged",{source:this,tool:this.active})}_addEventListeners(){this.eventBus._on("switchcursortool",evt=>{this.switchTool(evt.tool)}),this.eventBus._on("presentationmodechanged",evt=>{switch(evt.state){case _ui_utils.PresentationModeState.CHANGING:break;case _ui_utils.PresentationModeState.FULLSCREEN:var previouslyActive=this.active;this.switchTool(CursorTool.SELECT),this.activeBeforePresentationMode=previouslyActive;break;case _ui_utils.PresentationModeState.NORMAL:{const previouslyActive=this.activeBeforePresentationMode;this.activeBeforePresentationMode=null,this.switchTool(previouslyActive);break}}})}}},(__unused_webpack_module,chrome)=>{function GrabToPan(options){this.element=options.element,this.document=options.element.ownerDocument,"function"==typeof options.ignoreTarget&&(this.ignoreTarget=options.ignoreTarget),this.onActiveChanged=options.onActiveChanged,this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.toggle=this.toggle.bind(this),this._onmousedown=this._onmousedown.bind(this),this._onmousemove=this._onmousemove.bind(this),this._endPan=this._endPan.bind(this);const overlay=this.overlay=document.createElement("div");overlay.className="grab-to-pan-grabbing"}Object.defineProperty(chrome,"__esModule",{value:!0}),(chrome.GrabToPan=GrabToPan).prototype={CSS_CLASS_GRAB:"grab-to-pan-grab",activate:function(){this.active||(this.active=!0,this.element.addEventListener("mousedown",this._onmousedown,!0),this.element.classList.add(this.CSS_CLASS_GRAB),this.onActiveChanged&&this.onActiveChanged(!0))},deactivate:function(){this.active&&(this.active=!1,this.element.removeEventListener("mousedown",this._onmousedown,!0),this._endPan(),this.element.classList.remove(this.CSS_CLASS_GRAB),this.onActiveChanged&&this.onActiveChanged(!1))},toggle:function(){this.active?this.deactivate():this.activate()},ignoreTarget:function(node){return node[matchesSelector]("a[href], a[href] *, input, textarea, button, button *, select, option")},_onmousedown:function(event){if(0===event.button&&!this.ignoreTarget(event.target)){if(event.originalTarget)try{event.originalTarget.tagName}catch(e){return}this.scrollLeftStart=this.element.scrollLeft,this.scrollTopStart=this.element.scrollTop,this.clientXStart=event.clientX,this.clientYStart=event.clientY,this.document.addEventListener("mousemove",this._onmousemove,!0),this.document.addEventListener("mouseup",this._endPan,!0),this.element.addEventListener("scroll",this._endPan,!0),event.preventDefault(),event.stopPropagation();const focusedElement=document.activeElement;focusedElement&&!focusedElement.contains(event.target)&&focusedElement.blur()}},_onmousemove:function(scrollTop){var scrollLeft;this.element.removeEventListener("scroll",this._endPan,!0),function(event){if("buttons"in event&&isNotIEorIsIE10plus)return!(1&event.buttons);if(isChrome15OrOpera15plus||isSafari6plus)return 0===event.which;return!1}(scrollTop)?this._endPan():(scrollLeft=scrollTop.clientX-this.clientXStart,scrollTop=scrollTop.clientY-this.clientYStart,scrollTop=this.scrollTopStart-scrollTop,scrollLeft=this.scrollLeftStart-scrollLeft,this.element.scrollTo?this.element.scrollTo({top:scrollTop,left:scrollLeft,behavior:"instant"}):(this.element.scrollTop=scrollTop,this.element.scrollLeft=scrollLeft),this.overlay.parentNode||document.body.appendChild(this.overlay))},_endPan:function(){this.element.removeEventListener("scroll",this._endPan,!0),this.document.removeEventListener("mousemove",this._onmousemove,!0),this.document.removeEventListener("mouseup",this._endPan,!0),this.overlay.remove()}};let matchesSelector;["webkitM","mozM","m"].some(function(prefix){let name=prefix+"atches";return name in document.documentElement&&(matchesSelector=name),name+="Selector",name in document.documentElement&&(matchesSelector=name),matchesSelector});const isNotIEorIsIE10plus=!document.documentMode||9<document.documentMode;chrome=window.chrome;const isChrome15OrOpera15plus=chrome&&(chrome.webstore||chrome.app),isSafari6plus=/Apple/.test(navigator.vendor)&&/Version\/([6-9]\d*|[1-5]\d+)/.test(navigator.userAgent)},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderingStates=exports.PDFRenderingQueue=void 0;var _pdfjsLib=__webpack_require__(5);const RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};exports.RenderingStates=RenderingStates;exports.PDFRenderingQueue=class{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(pdfViewer){this.pdfViewer=pdfViewer}setThumbnailViewer(pdfThumbnailViewer){this.pdfThumbnailViewer=pdfThumbnailViewer}isHighestPriority(view){return this.highestPriorityPage===view.renderingId}renderHighestPriority(currentlyVisiblePages){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(currentlyVisiblePages)||this.pdfThumbnailViewer&&this.isThumbnailViewEnabled&&this.pdfThumbnailViewer.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}getHighestPriority(previousPageIndex,views,nextPageIndex){var visibleViews=previousPageIndex.views,numVisible=visibleViews.length;if(0===numVisible)return null;for(let i=0;i<numVisible;++i){var view=visibleViews[i].view;if(!this.isViewFinished(view))return view}if(nextPageIndex){nextPageIndex=previousPageIndex.last.id;if(views[nextPageIndex]&&!this.isViewFinished(views[nextPageIndex]))return views[nextPageIndex]}else{previousPageIndex=previousPageIndex.first.id-2;if(views[previousPageIndex]&&!this.isViewFinished(views[previousPageIndex]))return views[previousPageIndex]}return null}isViewFinished(view){return view.renderingState===RenderingStates.FINISHED}renderView(view){switch(view.renderingState){case RenderingStates.FINISHED:return!1;case RenderingStates.PAUSED:this.highestPriorityPage=view.renderingId,view.resume();break;case RenderingStates.RUNNING:this.highestPriorityPage=view.renderingId;break;case RenderingStates.INITIAL:this.highestPriorityPage=view.renderingId,view.draw().finally(()=>{this.renderHighestPriority()}).catch(reason=>{reason instanceof _pdfjsLib.RenderingCancelledException||console.error(`renderView: "${reason}"`)})}return!0}}},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.OverlayManager=void 0;exports.OverlayManager=class{constructor(){this._overlays={},this._active=null,this._keyDownBound=this._keyDown.bind(this)}get active(){return this._active}async register(name,element,callerCloseMethod=null,canForceClose=!1){let container;if(!(name&&element&&(container=element.parentNode)))throw new Error("Not enough parameters.");if(this._overlays[name])throw new Error("The overlay is already registered.");this._overlays[name]={element:element,container:container,callerCloseMethod:callerCloseMethod,canForceClose:canForceClose}}async unregister(name){if(!this._overlays[name])throw new Error("The overlay does not exist.");if(this._active===name)throw new Error("The overlay cannot be removed while it is active.");delete this._overlays[name]}async open(name){if(!this._overlays[name])throw new Error("The overlay does not exist.");if(this._active){if(!this._overlays[name].canForceClose)throw this._active===name?new Error("The overlay is already active."):new Error("Another overlay is currently active.");this._closeThroughCaller()}this._active=name,this._overlays[this._active].element.classList.remove("hidden"),this._overlays[this._active].container.classList.remove("hidden"),window.addEventListener("keydown",this._keyDownBound)}async close(name){if(!this._overlays[name])throw new Error("The overlay does not exist.");if(!this._active)throw new Error("The overlay is currently not active.");if(this._active!==name)throw new Error("Another overlay is currently active.");this._overlays[this._active].container.classList.add("hidden"),this._overlays[this._active].element.classList.add("hidden"),this._active=null,window.removeEventListener("keydown",this._keyDownBound)}_keyDown(evt){this._active&&27===evt.keyCode&&(this._closeThroughCaller(),evt.preventDefault())}_closeThroughCaller(){this._overlays[this._active].callerCloseMethod&&this._overlays[this._active].callerCloseMethod(),this._active&&this.close(this._active)}}},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PasswordPrompt=void 0;var _ui_utils=__webpack_require__(4),_pdfjsLib=__webpack_require__(5);exports.PasswordPrompt=class{constructor(options,overlayManager,l10n=_ui_utils.NullL10n){this.overlayName=options.overlayName,this.container=options.container,this.label=options.label,this.input=options.input,this.submitButton=options.submitButton,this.cancelButton=options.cancelButton,this.overlayManager=overlayManager,this.l10n=l10n,this.updateCallback=null,this.reason=null,this.submitButton.addEventListener("click",this.verify.bind(this)),this.cancelButton.addEventListener("click",this.close.bind(this)),this.input.addEventListener("keydown",e=>{13===e.keyCode&&this.verify()}),this.overlayManager.register(this.overlayName,this.container,this.close.bind(this),!0)}open(){this.overlayManager.open(this.overlayName).then(()=>{this.input.focus();let promptString;promptString=this.reason===_pdfjsLib.PasswordResponses.INCORRECT_PASSWORD?this.l10n.get("password_invalid",null,"Invalid password. Please try again."):this.l10n.get("password_label",null,"Enter the password to open this PDF file."),promptString.then(msg=>{this.label.textContent=msg})})}close(){this.overlayManager.close(this.overlayName).then(()=>{this.input.value=""})}verify(){var password=this.input.value;password&&0<password.length&&(this.close(),this.updateCallback(password))}setUpdateCallback(updateCallback,reason){this.updateCallback=updateCallback,this.reason=reason}}},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFAttachmentViewer=void 0;var _pdfjsLib=__webpack_require__(5),_base_tree_viewer=__webpack_require__(12),_viewer_compatibility=__webpack_require__(2);const PdfFileRegExp=/\.pdf$/i;class PDFAttachmentViewer extends _base_tree_viewer.BaseTreeViewer{constructor(options){super(options),this.downloadManager=options.downloadManager,this.eventBus._on("fileattachmentannotation",this._appendAttachment.bind(this))}reset(keepRenderedCapability=!1){super.reset(),this._attachments=null,keepRenderedCapability||(this._renderedCapability=(0,_pdfjsLib.createPromiseCapability)()),this._pendingDispatchEvent&&clearTimeout(this._pendingDispatchEvent),this._pendingDispatchEvent=null}_dispatchEvent(attachmentsCount){this._renderedCapability.resolve(),this._pendingDispatchEvent&&(clearTimeout(this._pendingDispatchEvent),this._pendingDispatchEvent=null),0!==attachmentsCount?this.eventBus.dispatch("attachmentsloaded",{source:this,attachmentsCount:attachmentsCount}):this._pendingDispatchEvent=setTimeout(()=>{this.eventBus.dispatch("attachmentsloaded",{source:this,attachmentsCount:0}),this._pendingDispatchEvent=null})}_bindPdfLink(element,{content,filename}){let blobUrl;element.onclick=()=>{var viewerUrl;blobUrl=blobUrl||URL.createObjectURL(new Blob([content],{type:"application/pdf"})),viewerUrl="?file="+encodeURIComponent(blobUrl+"#"+filename);try{window.open(viewerUrl)}catch(ex){console.error("_bindPdfLink: "+ex),URL.revokeObjectURL(blobUrl),blobUrl=null,this.downloadManager.downloadData(content,filename,"application/pdf")}return!1}}_bindLink(element,{content,filename}){element.onclick=()=>{var contentType=PdfFileRegExp.test(filename)?"application/pdf":"";return this.downloadManager.downloadData(content,filename,contentType),!1}}render({attachments,keepRenderedCapability:names=!1}){if(this._attachments&&this.reset(names),this._attachments=attachments||null,attachments){names=Object.keys(attachments).sort(function(a,b){return a.toLowerCase().localeCompare(b.toLowerCase())});const fragment=document.createDocumentFragment();let attachmentsCount=0;for(const name of names){var item=attachments[name],filename=(0,_pdfjsLib.getFilenameFromUrl)(item.filename);const div=document.createElement("div");div.className="treeItem";const element=document.createElement("a");PdfFileRegExp.test(filename)&&!_viewer_compatibility.viewerCompatibilityParams.disableCreateObjectURL?this._bindPdfLink(element,{content:item.content,filename:filename}):this._bindLink(element,{content:item.content,filename:filename}),element.textContent=this._normalizeTextContent(filename),div.appendChild(element),fragment.appendChild(div),attachmentsCount++}this._finishRendering(fragment,attachmentsCount)}else this._dispatchEvent(0)}_appendAttachment({id,filename,content}){const renderedPromise=this._renderedCapability.promise;renderedPromise.then(()=>{if(renderedPromise===this._renderedCapability.promise){let attachments=this._attachments;if(attachments){for(const name in attachments)if(id===name)return}else attachments=Object.create(null);attachments[id]={filename:filename,content:content},this.render({attachments:attachments,keepRenderedCapability:!0})}})}}exports.PDFAttachmentViewer=PDFAttachmentViewer},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseTreeViewer=void 0;var _pdfjsLib=__webpack_require__(5);exports.BaseTreeViewer=class BaseTreeViewer{constructor(options){if(this.constructor===BaseTreeViewer)throw new Error("Cannot initialize BaseTreeViewer.");this.container=options.container,this.eventBus=options.eventBus,this.reset()}reset(){this._pdfDocument=null,this._lastToggleIsShow=!0,this._currentTreeItem=null,this.container.textContent="",this.container.classList.remove("treeWithDeepNesting")}_dispatchEvent(count){throw new Error("Not implemented: _dispatchEvent")}_bindLink(element,params){throw new Error("Not implemented: _bindLink")}_normalizeTextContent(str){return(0,_pdfjsLib.removeNullCharacters)(str)||"–"}_addToggleButton(div,hidden=!1){const toggler=document.createElement("div");toggler.className="treeItemToggler",hidden&&toggler.classList.add("treeItemsHidden"),toggler.onclick=shouldShowAll=>{shouldShowAll.stopPropagation(),toggler.classList.toggle("treeItemsHidden"),shouldShowAll.shiftKey&&(shouldShowAll=!toggler.classList.contains("treeItemsHidden"),this._toggleTreeItem(div,shouldShowAll))},div.insertBefore(toggler,div.firstChild)}_toggleTreeItem(root,show=!1){this._lastToggleIsShow=show;for(const toggler of root.querySelectorAll(".treeItemToggler"))toggler.classList.toggle("treeItemsHidden",!show)}_toggleAllTreeItems(){this._toggleTreeItem(this.container,!this._lastToggleIsShow)}_finishRendering(fragment,count,hasAnyNesting=!1){hasAnyNesting&&(this.container.classList.add("treeWithDeepNesting"),this._lastToggleIsShow=!fragment.querySelector(".treeItemsHidden")),this.container.appendChild(fragment),this._dispatchEvent(count)}render(params){throw new Error("Not implemented: render")}_updateCurrentTreeItem(treeItem=null){this._currentTreeItem&&(this._currentTreeItem.classList.remove("selected"),this._currentTreeItem=null),treeItem&&(treeItem.classList.add("selected"),this._currentTreeItem=treeItem)}_scrollToCurrentTreeItem(treeItem){if(treeItem){let currentNode=treeItem.parentNode;for(;currentNode&&currentNode!==this.container;){if(currentNode.classList.contains("treeItem")){const toggler=currentNode.firstElementChild;toggler?.classList.remove("treeItemsHidden")}currentNode=currentNode.parentNode}this._updateCurrentTreeItem(treeItem),this.container.scrollTo(treeItem.offsetLeft,treeItem.offsetTop+-100)}}}},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFDocumentProperties=void 0;var _pdfjsLib=__webpack_require__(5),_ui_utils=__webpack_require__(4);const NON_METRIC_LOCALES=["en-us","en-lr","my"],US_PAGE_NAMES={"8.5x11":"Letter","8.5x14":"Legal"},METRIC_PAGE_NAMES={"297x420":"A3","210x297":"A4"};function getPageName(size,isPortrait,pageNames){return pageNames[(isPortrait?size.width:size.height)+"x"+(isPortrait?size.height:size.width)]}exports.PDFDocumentProperties=class{constructor({overlayName,fields,container,closeButton},overlayManager,eventBus,l10n=_ui_utils.NullL10n){this.overlayName=overlayName,this.fields=fields,this.container=container,this.overlayManager=overlayManager,this.l10n=l10n,this._reset(),closeButton.addEventListener("click",this.close.bind(this)),this.overlayManager.register(this.overlayName,this.container,this.close.bind(this)),eventBus._on("pagechanging",evt=>{this._currentPageNumber=evt.pageNumber}),eventBus._on("rotationchanging",evt=>{this._pagesRotation=evt.pagesRotation}),this._isNonMetricLocale=!0,l10n.getLanguage().then(locale=>{this._isNonMetricLocale=NON_METRIC_LOCALES.includes(locale)})}async open(){var freezeFieldData=data=>{Object.defineProperty(this,"fieldData",{value:Object.freeze(data),writable:!1,enumerable:!0,configurable:!0})};await Promise.all([this.overlayManager.open(this.overlayName),this._dataAvailableCapability.promise]);var length=this._currentPageNumber;const pagesRotation=this._pagesRotation;if(this.fieldData&&length===this.fieldData._currentPageNumber&&pagesRotation===this.fieldData._pagesRotation)this._updateUI();else{var{info,contentDispositionFilename:isLinearized,contentLength}=await this.pdfDocument.getMetadata(),[fileName,fileSize,creationDate,modificationDate,pageSize,isLinearized]=await Promise.all([isLinearized||(0,_ui_utils.getPDFFileNameFromURL)(this.url),this._parseFileSize(contentLength),this._parseDate(info.CreationDate),this._parseDate(info.ModDate),this.pdfDocument.getPage(length).then(pdfPage=>this._parsePageSize((0,_ui_utils.getPageSizeInches)(pdfPage),pagesRotation)),this._parseLinearization(info.IsLinearized)]);freezeFieldData({fileName:fileName,fileSize:fileSize,title:info.Title,author:info.Author,subject:info.Subject,keywords:info.Keywords,creationDate:creationDate,modificationDate:modificationDate,creator:info.Creator,producer:info.Producer,version:info.PDFFormatVersion,pageCount:this.pdfDocument.numPages,pageSize:pageSize,linearized:isLinearized,_currentPageNumber:length,_pagesRotation:pagesRotation}),this._updateUI();length=(await this.pdfDocument.getDownloadInfo())["length"];if(contentLength!==length){const data=Object.assign(Object.create(null),this.fieldData);data.fileSize=await this._parseFileSize(length),freezeFieldData(data),this._updateUI()}}}close(){this.overlayManager.close(this.overlayName)}setDocument(pdfDocument,url=null){this.pdfDocument&&(this._reset(),this._updateUI(!0)),pdfDocument&&(this.pdfDocument=pdfDocument,this.url=url,this._dataAvailableCapability.resolve())}_reset(){this.pdfDocument=null,this.url=null,delete this.fieldData,this._dataAvailableCapability=(0,_pdfjsLib.createPromiseCapability)(),this._currentPageNumber=1,this._pagesRotation=0}_updateUI(reset=!1){if(!reset&&this.fieldData){if(this.overlayManager.active===this.overlayName)for(const id in this.fields){var content=this.fieldData[id];this.fields[id].textContent=content||0===content?content:"-"}}else for(const id in this.fields)this.fields[id].textContent="-"}async _parseFileSize(fileSize=0){const kb=fileSize/1024;if(kb)return kb<1024?this.l10n.get("document_properties_kb",{size_kb:(+kb.toPrecision(3)).toLocaleString(),size_b:fileSize.toLocaleString()},"{{size_kb}} KB ({{size_b}} bytes)"):this.l10n.get("document_properties_mb",{size_mb:(+(kb/1024).toPrecision(3)).toLocaleString(),size_b:fileSize.toLocaleString()},"{{size_mb}} MB ({{size_b}} bytes)")}async _parsePageSize(intMillimeters,isPortrait){if(intMillimeters){isPortrait%180!=0&&(intMillimeters={width:intMillimeters.height,height:intMillimeters.width});isPortrait=(0,_ui_utils.isPortraitOrientation)(intMillimeters);let sizeInches={width:Math.round(100*intMillimeters.width)/100,height:Math.round(100*intMillimeters.height)/100},sizeMillimeters={width:Math.round(25.4*intMillimeters.width*10)/10,height:Math.round(25.4*intMillimeters.height*10)/10},pageName=null,rawName=getPageName(sizeInches,isPortrait,US_PAGE_NAMES)||getPageName(sizeMillimeters,isPortrait,METRIC_PAGE_NAMES);if(!(rawName||Number.isInteger(sizeMillimeters.width)&&Number.isInteger(sizeMillimeters.height))){const exactMillimeters_width=25.4*intMillimeters.width,exactMillimeters_height=25.4*intMillimeters.height;intMillimeters={width:Math.round(sizeMillimeters.width),height:Math.round(sizeMillimeters.height)};Math.abs(exactMillimeters_width-intMillimeters.width)<.1&&Math.abs(exactMillimeters_height-intMillimeters.height)<.1&&(rawName=getPageName(intMillimeters,isPortrait,METRIC_PAGE_NAMES),rawName&&(sizeInches={width:Math.round(intMillimeters.width/25.4*100)/100,height:Math.round(intMillimeters.height/25.4*100)/100},sizeMillimeters=intMillimeters))}return rawName&&(pageName=this.l10n.get("document_properties_page_size_name_"+rawName.toLowerCase(),null,rawName)),Promise.all([this._isNonMetricLocale?sizeInches:sizeMillimeters,this.l10n.get("document_properties_page_size_unit_"+(this._isNonMetricLocale?"inches":"millimeters"),null,this._isNonMetricLocale?"in":"mm"),pageName,this.l10n.get("document_properties_page_size_orientation_"+(isPortrait?"portrait":"landscape"),null,isPortrait?"portrait":"landscape")]).then(([{width,height},unit,name,orientation])=>this.l10n.get("document_properties_page_size_dimension_"+(name?"name_":"")+"string",{width:width.toLocaleString(),height:height.toLocaleString(),unit:unit,name:name,orientation:orientation},"{{width}} × {{height}} {{unit}} ("+(name?"{{name}}, ":"")+"{{orientation}})"))}}async _parseDate(inputDate){const dateObject=_pdfjsLib.PDFDateString.toDateObject(inputDate);if(dateObject)return this.l10n.get("document_properties_date_string",{date:dateObject.toLocaleDateString(),time:dateObject.toLocaleTimeString()},"{{date}}, {{time}}")}_parseLinearization(isLinearized){return this.l10n.get("document_properties_linearized_"+(isLinearized?"yes":"no"),null,isLinearized?"Yes":"No")}}},(__unused_webpack_module,exports,_ui_utils)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFFindBar=void 0;var _pdf_find_controller=_ui_utils(15),_ui_utils=_ui_utils(4);exports.PDFFindBar=class{constructor(options,eventBus,l10n=_ui_utils.NullL10n){this.opened=!1,this.bar=options.bar||null,this.toggleButton=options.toggleButton||null,this.findField=options.findField||null,this.highlightAll=options.highlightAllCheckbox||null,this.caseSensitive=options.caseSensitiveCheckbox||null,this.entireWord=options.entireWordCheckbox||null,this.findMsg=options.findMsg||null,this.findResultsCount=options.findResultsCount||null,this.findPreviousButton=options.findPreviousButton||null,this.findNextButton=options.findNextButton||null,this.eventBus=eventBus,this.l10n=l10n,this.toggleButton.addEventListener("click",()=>{this.toggle()}),this.findField.addEventListener("input",()=>{this.dispatchEvent("")}),this.bar.addEventListener("keydown",e=>{switch(e.keyCode){case 13:e.target===this.findField&&this.dispatchEvent("again",e.shiftKey);break;case 27:this.close()}}),this.findPreviousButton.addEventListener("click",()=>{this.dispatchEvent("again",!0)}),this.findNextButton.addEventListener("click",()=>{this.dispatchEvent("again",!1)}),this.highlightAll.addEventListener("click",()=>{this.dispatchEvent("highlightallchange")}),this.caseSensitive.addEventListener("click",()=>{this.dispatchEvent("casesensitivitychange")}),this.entireWord.addEventListener("click",()=>{this.dispatchEvent("entirewordchange")}),this.eventBus._on("resize",this._adjustWidth.bind(this))}reset(){this.updateUIState()}dispatchEvent(type,findPrev){this.eventBus.dispatch("find",{source:this,type:type,query:this.findField.value,phraseSearch:!0,caseSensitive:this.caseSensitive.checked,entireWord:this.entireWord.checked,highlightAll:this.highlightAll.checked,findPrevious:findPrev})}updateUIState(state,previous,matchesCount){let findMsg="",status="";switch(state){case _pdf_find_controller.FindState.FOUND:break;case _pdf_find_controller.FindState.PENDING:status="pending";break;case _pdf_find_controller.FindState.NOT_FOUND:findMsg=this.l10n.get("find_not_found",null,"Phrase not found"),status="notFound";break;case _pdf_find_controller.FindState.WRAPPED:findMsg=previous?this.l10n.get("find_reached_top",null,"Reached top of document, continued from bottom"):this.l10n.get("find_reached_bottom",null,"Reached end of document, continued from top")}this.findField.setAttribute("data-status",status),Promise.resolve(findMsg).then(msg=>{this.findMsg.textContent=msg,this._adjustWidth()}),this.updateResultsCount(matchesCount)}updateResultsCount({current=0,total=0}={}){if(this.findResultsCount){let matchesCountMsg="";0<total&&(matchesCountMsg=1e3<total?this.l10n.get("find_match_count_limit",{limit:1e3},"More than {{limit}} matches"):this.l10n.get("find_match_count",{current:current,total:total},"{{current}} of {{total}} match"+(1!==total?"es":""))),Promise.resolve(matchesCountMsg).then(msg=>{this.findResultsCount.textContent=msg,this.findResultsCount.classList.toggle("hidden",!total),this._adjustWidth()})}}open(){this.opened||(this.opened=!0,this.toggleButton.classList.add("toggled"),this.bar.classList.remove("hidden")),this.findField.select(),this.findField.focus(),this._adjustWidth()}close(){this.opened&&(this.opened=!1,this.toggleButton.classList.remove("toggled"),this.bar.classList.add("hidden"),this.eventBus.dispatch("findbarclose",{source:this}))}toggle(){this.opened?this.close():this.open()}_adjustWidth(){var findbarHeight;this.opened&&(this.bar.classList.remove("wrapContainers"),findbarHeight=this.bar.clientHeight,this.bar.firstElementChild.clientHeight<findbarHeight&&this.bar.classList.add("wrapContainers"))}}},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFFindController=exports.FindState=void 0;var _pdfjsLib=__webpack_require__(5),_pdf_find_utils=__webpack_require__(16),_ui_utils=__webpack_require__(4);const FindState={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};exports.FindState=FindState;const CHARACTERS_TO_NORMALIZE={"‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"};let normalizationRegex=null;function normalize(text){var replace;normalizationRegex||(replace=Object.keys(CHARACTERS_TO_NORMALIZE).join(""),normalizationRegex=new RegExp(`[${replace}]`,"g"));let diffs=null;return[text.replace(normalizationRegex,function(diff,index){var normalizedCh=CHARACTERS_TO_NORMALIZE[diff],diff=normalizedCh.length-diff.length;return 0!=diff&&(diffs=diffs||[]).push([index,diff]),normalizedCh}),diffs]}function getOriginalIndex(matchIndex,diffs=null){if(!diffs)return matchIndex;let totalDiff=0;for(var[currentIndex,diff]of diffs){currentIndex=currentIndex+totalDiff;if(matchIndex<=currentIndex)break;if(currentIndex+diff>matchIndex){totalDiff+=matchIndex-currentIndex;break}totalDiff+=diff}return matchIndex-totalDiff}exports.PDFFindController=class{constructor({linkService,eventBus}){this._linkService=linkService,this._eventBus=eventBus,this._reset(),eventBus._on("findbarclose",this._onFindBarClose.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(pdfDocument){this._pdfDocument&&this._reset(),pdfDocument&&(this._pdfDocument=pdfDocument,this._firstPageCapability.resolve())}executeCommand(cmd,state){if(state){const pdfDocument=this._pdfDocument;null!==this._state&&!this._shouldDirtyMatch(cmd,state)||(this._dirtyMatch=!0),this._state=state,"findhighlightallchange"!==cmd&&this._updateUIState(FindState.PENDING),this._firstPageCapability.promise.then(()=>{var findbarClosed,pendingTimeout;!this._pdfDocument||pdfDocument&&this._pdfDocument!==pdfDocument||(this._extractText(),findbarClosed=!this._highlightMatches,pendingTimeout=!!this._findTimeout,this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),"find"===cmd?this._findTimeout=setTimeout(()=>{this._nextMatch(),this._findTimeout=null},250):this._dirtyMatch?this._nextMatch():"findagain"===cmd?(this._nextMatch(),findbarClosed&&this._state.highlightAll&&this._updateAllPages()):"findhighlightallchange"===cmd?(pendingTimeout?this._nextMatch():this._highlightMatches=!0,this._updateAllPages()):this._nextMatch())})}}scrollMatchIntoView({element=null,pageIndex=-1,matchIndex=-1}){this._scrollMatches&&element&&-1!==matchIndex&&matchIndex===this._selected.matchIdx&&-1!==pageIndex&&pageIndex===this._selected.pageIdx&&(this._scrollMatches=!1,_ui_utils.scrollIntoView)(element,{top:-50,left:-400},!0)}_reset(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=Object.create(null),this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,_pdfjsLib.createPromiseCapability)()}get _query(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=normalize(this._state.query)),this._normalizedQuery}_shouldDirtyMatch(cmd,state){if(state.query!==this._state.query)return!0;switch(cmd){case"findagain":var pageNumber=this._selected.pageIdx+1;const linkService=this._linkService;return 1<=pageNumber&&pageNumber<=linkService.pagesCount&&pageNumber!==linkService.page&&!linkService.isPageVisible(pageNumber)?!0:!1;case"findhighlightallchange":return!1}return!0}_prepareMatches(matchesWithLength,matches,matchesLength){matchesWithLength.sort(function(a,b){return a.match===b.match?a.matchLength-b.matchLength:a.match-b.match});for(let i=0,len=matchesWithLength.length;i<len;i++)!function(currentIndex){const currentElem=matchesWithLength[currentIndex];var nextElem=matchesWithLength[currentIndex+1];if(currentIndex<matchesWithLength.length-1&&currentElem.match===nextElem.match)return currentElem.skipped=!0;for(let i=currentIndex-1;0<=i;i--){var prevElem=matchesWithLength[i];if(!prevElem.skipped){if(prevElem.match+prevElem.matchLength<currentElem.match)break;if(prevElem.match+prevElem.matchLength>=currentElem.match+currentElem.matchLength)return currentElem.skipped=!0}}}(i)&&(matches.push(matchesWithLength[i].match),matchesLength.push(matchesWithLength[i].matchLength))}_isEntireWord(content,endIdx,last){if(0<endIdx){var first=content.charCodeAt(endIdx),limit=content.charCodeAt(endIdx-1);if((0,_pdf_find_utils.getCharacterType)(first)===(0,_pdf_find_utils.getCharacterType)(limit))return!1}endIdx=endIdx+last-1;if(endIdx<content.length-1){last=content.charCodeAt(endIdx);const limit=content.charCodeAt(1+endIdx);if((0,_pdf_find_utils.getCharacterType)(last)===(0,_pdf_find_utils.getCharacterType)(limit))return!1}return!0}_calculatePhraseMatch(query,pageIndex,pageContent,pageDiffs,entireWord){const matches=[],matchesLength=[];var originalMatchIdx,originalQueryLen,queryLen=query.length;let matchIdx=-queryLen;for(;;){if(matchIdx=pageContent.indexOf(query,matchIdx+queryLen),-1===matchIdx)break;entireWord&&!this._isEntireWord(pageContent,matchIdx,queryLen)||(originalMatchIdx=getOriginalIndex(matchIdx,pageDiffs),originalQueryLen=getOriginalIndex(matchIdx+queryLen-1,pageDiffs)-originalMatchIdx+1,matches.push(originalMatchIdx),matchesLength.push(originalQueryLen))}this._pageMatches[pageIndex]=matches,this._pageMatchesLength[pageIndex]=matchesLength}_calculateWordMatch(query,pageIndex,pageContent,pageDiffs,entireWord){const matchesWithLength=[];var queryArray=query.match(/\S+/g);for(let i=0,len=queryArray.length;i<len;i++){var originalMatchIdx,originalQueryLen,subquery=queryArray[i],subqueryLen=subquery.length;let matchIdx=-subqueryLen;for(;;){if(matchIdx=pageContent.indexOf(subquery,matchIdx+subqueryLen),-1===matchIdx)break;entireWord&&!this._isEntireWord(pageContent,matchIdx,subqueryLen)||(originalMatchIdx=getOriginalIndex(matchIdx,pageDiffs),originalQueryLen=getOriginalIndex(matchIdx+subqueryLen-1,pageDiffs)-originalMatchIdx+1,matchesWithLength.push({match:originalMatchIdx,matchLength:originalQueryLen,skipped:!1}))}}this._pageMatchesLength[pageIndex]=[],this._pageMatches[pageIndex]=[],this._prepareMatches(matchesWithLength,this._pageMatches[pageIndex],this._pageMatchesLength[pageIndex])}_calculateMatch(pageMatchesCount){let pageContent=this._pageContents[pageMatchesCount];var pageDiffs=this._pageDiffs[pageMatchesCount];let query=this._query;var{caseSensitive,entireWord,phraseSearch}=this._state;0!==query.length&&(caseSensitive||(pageContent=pageContent.toLowerCase(),query=query.toLowerCase()),phraseSearch?this._calculatePhraseMatch(query,pageMatchesCount,pageContent,pageDiffs,entireWord):this._calculateWordMatch(query,pageMatchesCount,pageContent,pageDiffs,entireWord),this._state.highlightAll&&this._updatePage(pageMatchesCount),this._resumePageIdx===pageMatchesCount&&(this._resumePageIdx=null,this._nextPageMatch()),0<(pageMatchesCount=this._pageMatches[pageMatchesCount].length)&&(this._matchesCountTotal+=pageMatchesCount,this._updateUIResultsCount()))}_extractText(){if(!(0<this._extractTextPromises.length)){let promise=Promise.resolve();for(let i=0,ii=this._linkService.pagesCount;i<ii;i++){const extractTextCapability=(0,_pdfjsLib.createPromiseCapability)();this._extractTextPromises[i]=extractTextCapability.promise,promise=promise.then(()=>this._pdfDocument.getPage(i+1).then(pdfPage=>pdfPage.getTextContent({normalizeWhitespace:!0})).then(textContent=>{var textItems=textContent.items;const strBuf=[];for(let j=0,jj=textItems.length;j<jj;j++)strBuf.push(textItems[j].str);[this._pageContents[i],this._pageDiffs[i]]=normalize(strBuf.join("")),extractTextCapability.resolve(i)},reason=>{console.error("Unable to get text content for page "+(i+1),reason),this._pageContents[i]="",this._pageDiffs[i]=null,extractTextCapability.resolve(i)}))}}}_updatePage(index){this._scrollMatches&&this._selected.pageIdx===index&&(this._linkService.page=index+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:index})}_updateAllPages(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}_nextMatch(){var previous=this._state.findPrevious,numPageMatches=this._linkService.page-1,numPages=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=numPageMatches,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,this._updateAllPages();for(let i=0;i<numPages;i++)!0!==this._pendingFindMatches[i]&&(this._pendingFindMatches[i]=!0,this._extractTextPromises[i].then(pageIdx=>{delete this._pendingFindMatches[pageIdx],this._calculateMatch(pageIdx)}))}if(""!==this._query){if(!this._resumePageIdx){const offset=this._offset;if(this._pagesToSearch=numPages,null!==offset.matchIdx){numPageMatches=this._pageMatches[offset.pageIdx].length;if(!previous&&offset.matchIdx+1<numPageMatches||previous&&0<offset.matchIdx)return offset.matchIdx=previous?offset.matchIdx-1:offset.matchIdx+1,void this._updateMatch(!0);this._advanceOffsetPage(previous)}this._nextPageMatch()}}else this._updateUIState(FindState.FOUND)}_matchesReady(previous){const offset=this._offset;var numMatches=previous.length,previous=this._state.findPrevious;return numMatches?(offset.matchIdx=previous?numMatches-1:0,this._updateMatch(!0),!0):(this._advanceOffsetPage(previous),!!(offset.wrapped&&(offset.matchIdx=null,this._pagesToSearch<0))&&(this._updateMatch(!1),!0))}_nextPageMatch(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let matches=null;do{var pageIdx=this._offset.pageIdx;if(matches=this._pageMatches[pageIdx],!matches){this._resumePageIdx=pageIdx;break}}while(!this._matchesReady(matches))}_advanceOffsetPage(previous){const offset=this._offset;var numPages=this._linkService.pagesCount;offset.pageIdx=previous?offset.pageIdx-1:offset.pageIdx+1,offset.matchIdx=null,this._pagesToSearch--,(offset.pageIdx>=numPages||offset.pageIdx<0)&&(offset.pageIdx=previous?numPages-1:0,offset.wrapped=!0)}_updateMatch(previousPage=!1){let state=FindState.NOT_FOUND;var wrapped=this._offset.wrapped;this._offset.wrapped=!1,previousPage&&(previousPage=this._selected.pageIdx,this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,state=wrapped?FindState.WRAPPED:FindState.FOUND,-1!==previousPage&&previousPage!==this._selected.pageIdx&&this._updatePage(previousPage)),this._updateUIState(state,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this._updatePage(this._selected.pageIdx))}_onFindBarClose(evt){const pdfDocument=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||pdfDocument&&this._pdfDocument!==pdfDocument||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this._updateUIState(FindState.FOUND),this._highlightMatches=!1,this._updateAllPages())})}_requestMatchesCount(){var{pageIdx,matchIdx}=this._selected;let current=0,total=this._matchesCountTotal;if(-1!==matchIdx){for(let i=0;i<pageIdx;i++)current+=this._pageMatches[i]&&this._pageMatches[i].length||0;current+=matchIdx+1}return(current<1||current>total)&&(current=total=0),{current:current,total:total}}_updateUIResultsCount(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this._requestMatchesCount()})}_updateUIState(state,previous){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:state,previous:previous,matchesCount:this._requestMatchesCount(),rawQuery:this._state?this._state.query:null})}}},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCharacterType=function(charCode){if(charCode<11904)return 0==(65408&charCode)?function(charCode){return 32===charCode||9===charCode||13===charCode||10===charCode}(charCode)?CharacterType.SPACE:function(charCode){return 97<=charCode&&charCode<=122||65<=charCode&&charCode<=90}(charCode)||function(charCode){return 48<=charCode&&charCode<=57}(charCode)||95===charCode?CharacterType.ALPHA_LETTER:CharacterType.PUNCT:3584==(65408&charCode)?CharacterType.THAI_LETTER:160===charCode?CharacterType.SPACE:CharacterType.ALPHA_LETTER;{if(function(charCode){return 13312<=charCode&&charCode<=40959||63744<=charCode&&charCode<=64255}(charCode))return CharacterType.HAN_LETTER;if(function(charCode){return 12448<=charCode&&charCode<=12543}(charCode))return CharacterType.KATAKANA_LETTER;if(function(charCode){return 12352<=charCode&&charCode<=12447}(charCode))return CharacterType.HIRAGANA_LETTER;if(function(charCode){return 65376<=charCode&&charCode<=65439}(charCode))return CharacterType.HALFWIDTH_KATAKANA_LETTER}return CharacterType.ALPHA_LETTER},exports.CharacterType=void 0;const CharacterType={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};exports.CharacterType=CharacterType},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.isDestArraysEqual=isDestArraysEqual,exports.isDestHashesEqual=isDestHashesEqual,exports.PDFHistory=void 0;var _ui_utils=__webpack_require__(4);function getCurrentHash(){return document.location.hash}function isDestHashesEqual(nameddest,pushHash){if("string"!=typeof nameddest||"string"!=typeof pushHash)return!1;if(nameddest===pushHash)return!0;nameddest=(0,_ui_utils.parseQueryString)(nameddest).nameddest;return nameddest===pushHash}function isDestArraysEqual(firstDest,secondDest){if(!Array.isArray(firstDest)||!Array.isArray(secondDest))return!1;if(firstDest.length!==secondDest.length)return!1;for(let i=0,ii=firstDest.length;i<ii;i++)if(!function isEntryEqual(first,second){if(typeof first==typeof second&&!Array.isArray(first)&&!Array.isArray(second)){if(null===first||"object"!=typeof first||null===second)return first===second||Number.isNaN(first)&&Number.isNaN(second);if(Object.keys(first).length===Object.keys(second).length){for(const key in first)if(!isEntryEqual(first[key],second[key]))return;return 1}}}(firstDest[i],secondDest[i]))return!1;return!0}exports.PDFHistory=class{constructor({linkService,eventBus}){this.linkService=linkService,this.eventBus=eventBus,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this._isViewerInPresentationMode=!1,this.eventBus._on("presentationmodechanged",evt=>{this._isViewerInPresentationMode=evt.state!==_ui_utils.PresentationModeState.NORMAL}),this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",evt=>{this._isPagesLoaded=!!evt.pagesCount},{once:!0})})}initialize({fingerprint:hash,resetHistory=!1,updateUrl:page=!1}){if(hash&&"string"==typeof hash){this._initialized&&this.reset();var reInitialized=""!==this._fingerprint&&this._fingerprint!==hash;this._fingerprint=hash,this._updateUrl=!0===page,this._initialized=!0,this._bindEvents();var state=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=getCurrentHash(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(state,!0)||resetHistory){var{hash,page,rotation:destination}=this._parseCurrentHash(!0);return!hash||reInitialized||resetHistory?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:hash,page:page,rotation:destination},!0)}destination=state.destination;this._updateInternalState(destination,state.uid,!0),void 0!==destination.rotation&&(this._initialRotation=destination.rotation),destination.dest?(this._initialBookmark=JSON.stringify(destination.dest),this._destination.page=null):destination.hash?this._initialBookmark=destination.hash:destination.page&&(this._initialBookmark="page="+destination.page)}else console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.')}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:hash=null,explicitDest,pageNumber}){if(this._initialized)if(hash&&"string"!=typeof hash)console.error("PDFHistory.push: "+`"${hash}" is not a valid namedDest parameter.`);else if(Array.isArray(explicitDest))if(Number.isInteger(pageNumber)&&0<pageNumber&&pageNumber<=this.linkService.pagesCount||null===pageNumber&&!this._destination){hash=hash||JSON.stringify(explicitDest);if(hash){let forceReplace=!1;if(this._destination&&(isDestHashesEqual(this._destination.hash,hash)||isDestArraysEqual(this._destination.dest,explicitDest))){if(this._destination.page)return;forceReplace=!0}this._popStateInProgress&&!forceReplace||(this._pushOrReplaceState({dest:explicitDest,hash:hash,page:pageNumber,rotation:this.linkService.rotation},forceReplace),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}}else console.error("PDFHistory.push: "+`"${pageNumber}" is not a valid pageNumber parameter.`);else console.error("PDFHistory.push: "+`"${explicitDest}" is not a valid explicitDest parameter.`)}pushPage(pageNumber){this._initialized&&(Number.isInteger(pageNumber)&&0<pageNumber&&pageNumber<=this.linkService.pagesCount?this._destination?.page!==pageNumber&&(this._popStateInProgress||(this._pushOrReplaceState({hash:"page="+pageNumber,page:pageNumber,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))):console.error(`PDFHistory.pushPage: "${pageNumber}" is not a valid page number.`))}pushCurrentPosition(){this._initialized&&!this._popStateInProgress&&this._tryPushCurrentPosition()}back(){var state;this._initialized&&!this._popStateInProgress&&(state=window.history.state,this._isValidState(state)&&0<state.uid&&window.history.back())}forward(){var state;this._initialized&&!this._popStateInProgress&&(state=window.history.state,this._isValidState(state)&&state.uid<this._maxUid&&window.history.forward())}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||0<this._blockHashChange)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(destination,newState=!1){var shouldReplace=newState||!this._destination,newState={fingerprint:this._fingerprint,uid:shouldReplace?this._uid:this._uid+1,destination:destination};this._updateInternalState(destination,newState.uid);let newUrl;if(this._updateUrl&&destination?.hash){const baseUrl=document.location.href.split("#")[0];baseUrl.startsWith("file://")||(newUrl=baseUrl+"#"+destination.hash)}shouldReplace?window.history.replaceState(newState,"",newUrl):window.history.pushState(newState,"",newUrl)}_tryPushCurrentPosition(temporary=!1){if(this._position){let position=this._position;if(temporary&&(position=Object.assign(Object.create(null),this._position),position.temporary=!0),this._destination){if(this._destination.temporary)this._pushOrReplaceState(position,!0);else if(this._destination.hash!==position.hash&&(this._destination.page||!(this._numPositionUpdates<=50))){let forceReplace=!1;if(this._destination.page>=position.first&&this._destination.page<=position.page){if(this._destination.dest||!this._destination.first)return;forceReplace=!0}this._pushOrReplaceState(position,forceReplace)}}else this._pushOrReplaceState(position)}}_isValidState(state,perfEntry=!1){if(!state)return!1;if(state.fingerprint!==this._fingerprint){if(!perfEntry)return!1;if("string"!=typeof state.fingerprint||state.fingerprint.length!==this._fingerprint.length)return!1;var[perfEntry]=performance.getEntriesByType("navigation");if("reload"!==perfEntry?.type)return!1}return!(!Number.isInteger(state.uid)||state.uid<0)&&(null!==state.destination&&"object"==typeof state.destination)}_updateInternalState(destination,uid,removeTemporary=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),removeTemporary&&destination?.temporary&&delete destination.temporary,this._destination=destination,this._uid=uid,this._maxUid=Math.max(this._maxUid,uid),this._numPositionUpdates=0}_parseCurrentHash(checkNameddest=!1){var hash=unescape(getCurrentHash()).substring(1),params=(0,_ui_utils.parseQueryString)(hash),nameddest=params.nameddest||"";let page=0|params.page;return Number.isInteger(page)&&0<page&&page<=this.linkService.pagesCount&&!(checkNameddest&&0<nameddest.length)||(page=null),{hash:hash,page:page,rotation:this.linkService.rotation}}_updateViewarea({location}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:this._isViewerInPresentationMode?"page="+location.pageNumber:location.pdfOpenParams.substring(1),page:this.linkService.page,first:location.pageNumber,rotation:location.rotation},this._popStateInProgress||(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:page}){var rotation,newHash=getCurrentHash(),hash=this._currentHash!==newHash;this._currentHash=newHash,page?this._isValidState(page)&&(this._popStateInProgress=!0,hash&&(this._blockHashChange++,(0,_ui_utils.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--})),rotation=page.destination,this._updateInternalState(rotation,page.uid,!0),(0,_ui_utils.isValidRotation)(rotation.rotation)&&(this.linkService.rotation=rotation.rotation),rotation.dest?this.linkService.goToDestination(rotation.dest):rotation.hash?this.linkService.setHash(rotation.hash):rotation.page&&(this.linkService.page=rotation.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})):(this._uid++,{hash,page,rotation}=this._parseCurrentHash(),this._pushOrReplaceState({hash:hash,page:page,rotation:rotation},!0))}_pageHide(){this._destination&&!this._destination.temporary||this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFLayerViewer=void 0;class PDFLayerViewer extends __webpack_require__(12).BaseTreeViewer{constructor(options){super(options),this.l10n=options.l10n,this.eventBus._on("resetlayers",this._resetLayers.bind(this)),this.eventBus._on("togglelayerstree",this._toggleAllTreeItems.bind(this))}reset(){super.reset(),this._optionalContentConfig=null}_dispatchEvent(layersCount){this.eventBus.dispatch("layersloaded",{source:this,layersCount:layersCount})}_bindLink(element,{groupId,input}){const setVisibility=()=>{this._optionalContentConfig.setVisibility(groupId,input.checked),this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(this._optionalContentConfig)})};element.onclick=evt=>evt.target===input?(setVisibility(),!0):evt.target!==element||(input.checked=!input.checked,setVisibility(),!1)}async _setNestedName(element,{name=null}){"string"!=typeof name?(element.textContent=await this.l10n.get("additional_layers",null,"Additional Layers"),element.style.fontStyle="italic"):element.textContent=this._normalizeTextContent(name)}_addToggleButton(div,{name=null}){super._addToggleButton(div,null===name)}_toggleAllTreeItems(){this._optionalContentConfig&&super._toggleAllTreeItems()}render({optionalContentConfig,pdfDocument:groups}){this._optionalContentConfig&&this.reset(),this._optionalContentConfig=optionalContentConfig||null,this._pdfDocument=groups||null;groups=optionalContentConfig&&optionalContentConfig.getOrder();if(groups){const fragment=document.createDocumentFragment(),queue=[{parent:fragment,groups:groups}];let layersCount=0,hasAnyNesting=!1;for(;0<queue.length;){const levelData=queue.shift();for(const groupId of levelData.groups){const div=document.createElement("div");div.className="treeItem";const element=document.createElement("a");if(div.appendChild(element),"object"==typeof groupId){hasAnyNesting=!0,this._addToggleButton(div,groupId),this._setNestedName(element,groupId);const itemsDiv=document.createElement("div");itemsDiv.className="treeItems",div.appendChild(itemsDiv),queue.push({parent:itemsDiv,groups:groupId.order})}else{var group=optionalContentConfig.getGroup(groupId);const input=document.createElement("input");this._bindLink(element,{groupId:groupId,input:input}),input.type="checkbox",input.id=groupId,input.checked=group.visible;const label=document.createElement("label");label.setAttribute("for",groupId),label.textContent=this._normalizeTextContent(group.name),element.appendChild(input),element.appendChild(label),layersCount++}levelData.parent.appendChild(div)}}this._finishRendering(fragment,layersCount,hasAnyNesting)}else this._dispatchEvent(0)}async _resetLayers(){var optionalContentConfig;this._optionalContentConfig&&(optionalContentConfig=await this._pdfDocument.getOptionalContentConfig(),this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(optionalContentConfig)}),this.render({optionalContentConfig:optionalContentConfig,pdfDocument:this._pdfDocument}))}}exports.PDFLayerViewer=PDFLayerViewer},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.SimpleLinkService=exports.PDFLinkService=void 0;var _ui_utils=__webpack_require__(4);exports.PDFLinkService=class{constructor({eventBus,externalLinkTarget=null,externalLinkRel=null,externalLinkEnabled=!0,ignoreDestinationZoom=!1}={}){this.eventBus=eventBus,this.externalLinkTarget=externalLinkTarget,this.externalLinkRel=externalLinkRel,this.externalLinkEnabled=externalLinkEnabled,this._ignoreDestinationZoom=ignoreDestinationZoom,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null}setDocument(pdfDocument,baseUrl=null){this.baseUrl=baseUrl,this.pdfDocument=pdfDocument,this._pagesRefCache=Object.create(null)}setViewer(pdfViewer){this.pdfViewer=pdfViewer}setHistory(pdfHistory){this.pdfHistory=pdfHistory}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(value){this.pdfViewer.currentPageNumber=value}get rotation(){return this.pdfViewer.pagesRotation}set rotation(value){this.pdfViewer.pagesRotation=value}navigateTo(dest){console.error("Deprecated method: `navigateTo`, use `goToDestination` instead."),this.goToDestination(dest)}_goToDestinationHelper(rawDest,namedDest=null,explicitDest){const destRef=explicitDest[0];let pageNumber;if(destRef instanceof Object){if(pageNumber=this._cachedPageNumber(destRef),null===pageNumber)return void this.pdfDocument.getPageIndex(destRef).then(pageIndex=>{this.cachePageRef(pageIndex+1,destRef),this._goToDestinationHelper(rawDest,namedDest,explicitDest)}).catch(()=>{console.error(`PDFLinkService._goToDestinationHelper: "${destRef}" is not `+`a valid page reference, for dest="${rawDest}".`)})}else{if(!Number.isInteger(destRef))return void console.error(`PDFLinkService._goToDestinationHelper: "${destRef}" is not `+`a valid destination reference, for dest="${rawDest}".`);pageNumber=destRef+1}!pageNumber||pageNumber<1||pageNumber>this.pagesCount?console.error(`PDFLinkService._goToDestinationHelper: "${pageNumber}" is not `+`a valid page number, for dest="${rawDest}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:namedDest,explicitDest:explicitDest,pageNumber:pageNumber})),this.pdfViewer.scrollPageIntoView({pageNumber:pageNumber,destArray:explicitDest,ignoreDestinationZoom:this._ignoreDestinationZoom}))}async goToDestination(dest){if(this.pdfDocument){let namedDest,explicitDest;explicitDest="string"==typeof dest?(namedDest=dest,await this.pdfDocument.getDestination(dest)):(namedDest=null,await dest),Array.isArray(explicitDest)?this._goToDestinationHelper(dest,namedDest,explicitDest):console.error(`PDFLinkService.goToDestination: "${explicitDest}" is not `+`a valid destination array, for dest="${dest}".`)}}goToPage(val){var pageNumber;this.pdfDocument&&(pageNumber="string"==typeof val&&this.pdfViewer.pageLabelToPageNumber(val)||0|val,Number.isInteger(pageNumber)&&0<pageNumber&&pageNumber<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(pageNumber)),this.pdfViewer.scrollPageIntoView({pageNumber:pageNumber})):console.error(`PDFLinkService.goToPage: "${val}" is not a valid page.`))}getDestinationHash(str){if("string"==typeof str){if(0<str.length)return this.getAnchorUrl("#"+escape(str))}else if(Array.isArray(str)){str=JSON.stringify(str);if(0<str.length)return this.getAnchorUrl("#"+escape(str))}return this.getAnchorUrl("")}getAnchorUrl(anchor){return(this.baseUrl||"")+anchor}setHash(hash){if(this.pdfDocument){let pageNumber,dest;if(hash.includes("=")){const params=(0,_ui_utils.parseQueryString)(hash);if("search"in params&&this.eventBus.dispatch("findfromurlhash",{source:this,query:params.search.replace(/"/g,""),phraseSearch:"true"===params.phrase}),"page"in params&&(pageNumber=0|params.page||1),"zoom"in params){var zoomArgs=params.zoom.split(",");const zoomArg=zoomArgs[0];var zoomArgNumber=parseFloat(zoomArg);zoomArg.includes("Fit")?"Fit"===zoomArg||"FitB"===zoomArg?dest=[null,{name:zoomArg}]:"FitH"===zoomArg||"FitBH"===zoomArg||"FitV"===zoomArg||"FitBV"===zoomArg?dest=[null,{name:zoomArg},1<zoomArgs.length?0|zoomArgs[1]:null]:"FitR"===zoomArg?5!==zoomArgs.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):dest=[null,{name:zoomArg},0|zoomArgs[1],0|zoomArgs[2],0|zoomArgs[3],0|zoomArgs[4]]:console.error(`PDFLinkService.setHash: "${zoomArg}" is not `+"a valid zoom value."):dest=[null,{name:"XYZ"},1<zoomArgs.length?0|zoomArgs[1]:null,2<zoomArgs.length?0|zoomArgs[2]:null,zoomArgNumber?zoomArgNumber/100:zoomArg]}dest?this.pdfViewer.scrollPageIntoView({pageNumber:pageNumber||this.page,destArray:dest,allowNegativeOffset:!0}):pageNumber&&(this.page=pageNumber),"pagemode"in params&&this.eventBus.dispatch("pagemode",{source:this,mode:params.pagemode}),"nameddest"in params&&this.goToDestination(params.nameddest)}else{dest=unescape(hash);try{dest=JSON.parse(dest),Array.isArray(dest)||(dest=dest.toString())}catch(ex){}"string"==typeof dest||function(dest){if(!Array.isArray(dest))return!1;var destLength=dest.length;if(destLength<2)return!1;var zoom=dest[0];if(!("object"==typeof zoom&&Number.isInteger(zoom.num)&&Number.isInteger(zoom.gen)||Number.isInteger(zoom)&&0<=zoom))return!1;zoom=dest[1];if("object"!=typeof zoom||"string"!=typeof zoom.name)return!1;let allowNull=!0;switch(zoom.name){case"XYZ":if(5!==destLength)return!1;break;case"Fit":case"FitB":return 2===destLength;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==destLength)return!1;break;case"FitR":if(6!==destLength)return!1;allowNull=!1;break;default:return!1}for(let i=2;i<destLength;i++){var param=dest[i];if(!("number"==typeof param||allowNull&&null===param))return!1}return!0}(dest)?this.goToDestination(dest):console.error(`PDFLinkService.setHash: "${unescape(hash)}" is not `+"a valid destination.")}}}executeNamedAction(action){switch(action){case"GoBack":this.pdfHistory&&this.pdfHistory.back();break;case"GoForward":this.pdfHistory&&this.pdfHistory.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:action})}cachePageRef(pageNum,refStr){refStr&&(refStr=0===refStr.gen?refStr.num+"R":refStr.num+"R"+refStr.gen,this._pagesRefCache[refStr]=pageNum)}_cachedPageNumber(refStr){refStr=0===refStr.gen?refStr.num+"R":refStr.num+"R"+refStr.gen;return this._pagesRefCache&&this._pagesRefCache[refStr]||null}isPageVisible(pageNumber){return this.pdfViewer.isPageVisible(pageNumber)}isPageCached(pageNumber){return this.pdfViewer.isPageCached(pageNumber)}};exports.SimpleLinkService=class{constructor(){this.externalLinkTarget=null,this.externalLinkRel=null,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=!1}get pagesCount(){return 0}get page(){return 0}set page(value){}get rotation(){return 0}set rotation(value){}async goToDestination(dest){}goToPage(val){}getDestinationHash(dest){return"#"}getAnchorUrl(hash){return"#"}setHash(hash){}executeNamedAction(action){}cachePageRef(pageNum,pageRef){}isPageVisible(pageNumber){return!0}isPageCached(pageNumber){return!0}}},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFOutlineViewer=void 0;var _pdfjsLib=__webpack_require__(5),_base_tree_viewer=__webpack_require__(12),_ui_utils=__webpack_require__(4);class PDFOutlineViewer extends _base_tree_viewer.BaseTreeViewer{constructor(options){super(options),this.linkService=options.linkService,this.eventBus._on("toggleoutlinetree",this._toggleAllTreeItems.bind(this)),this.eventBus._on("currentoutlineitem",this._currentOutlineItem.bind(this)),this.eventBus._on("pagechanging",evt=>{this._currentPageNumber=evt.pageNumber}),this.eventBus._on("pagesloaded",evt=>{this._isPagesLoaded=!!evt.pagesCount}),this.eventBus._on("sidebarviewchanged",evt=>{this._sidebarView=evt.view})}reset(){super.reset(),this._outline=null,this._pageNumberToDestHashCapability=null,this._currentPageNumber=1,this._isPagesLoaded=!1}_dispatchEvent(outlineCount){this.eventBus.dispatch("outlineloaded",{source:this,outlineCount:outlineCount,enableCurrentOutlineItemButton:0<outlineCount&&!this._pdfDocument?.loadingParams.disableAutoFetch})}_bindLink(element,{url,newWindow,dest}){const linkService=this["linkService"];url?(0,_pdfjsLib.addLinkAttributes)(element,{url:url,target:newWindow?_pdfjsLib.LinkTarget.BLANK:linkService.externalLinkTarget,rel:linkService.externalLinkRel,enabled:linkService.externalLinkEnabled}):(element.href=linkService.getDestinationHash(dest),element.onclick=evt=>(this._updateCurrentTreeItem(evt.target.parentNode),dest&&linkService.goToDestination(dest),!1))}_setStyles(element,{bold,italic}){bold&&(element.style.fontWeight="bold"),italic&&(element.style.fontStyle="italic")}_addToggleButton(div,{count,items}){let hidden=!1;if(count<0){let totalCount=items.length;if(0<totalCount){const queue=[...items];for(;0<queue.length;){var{count:nestedCount,items:nestedItems}=queue.shift();0<nestedCount&&0<nestedItems.length&&(totalCount+=nestedItems.length,queue.push(...nestedItems))}}Math.abs(count)===totalCount&&(hidden=!0)}super._addToggleButton(div,hidden)}_toggleAllTreeItems(){this._outline&&super._toggleAllTreeItems()}render({outline,pdfDocument:fragment}){if(this._outline&&this.reset(),this._outline=outline||null,this._pdfDocument=fragment||null,outline){fragment=document.createDocumentFragment();const queue=[{parent:fragment,items:outline}];let outlineCount=0,hasAnyNesting=!1;for(;0<queue.length;){const levelData=queue.shift();for(const item of levelData.items){const div=document.createElement("div");div.className="treeItem";const element=document.createElement("a");if(this._bindLink(element,item),this._setStyles(element,item),element.textContent=this._normalizeTextContent(item.title),div.appendChild(element),0<item.items.length){hasAnyNesting=!0,this._addToggleButton(div,item);const itemsDiv=document.createElement("div");itemsDiv.className="treeItems",div.appendChild(itemsDiv),queue.push({parent:itemsDiv,items:item.items})}levelData.parent.appendChild(div),outlineCount++}}this._finishRendering(fragment,outlineCount,hasAnyNesting)}else this._dispatchEvent(0)}async _currentOutlineItem(){if(!this._isPagesLoaded)throw new Error("_currentOutlineItem: All pages have not been loaded.");if(this._outline&&this._pdfDocument){const pageNumberToDestHash=await this._getPageNumberToDestHash(this._pdfDocument);if(pageNumberToDestHash&&(this._updateCurrentTreeItem(null),this._sidebarView===_ui_utils.SidebarView.OUTLINE))for(let i=this._currentPageNumber;0<i;i--){var linkElement=pageNumberToDestHash.get(i);if(linkElement){linkElement=this.container.querySelector(`a[href="${linkElement}"]`);if(linkElement){this._scrollToCurrentTreeItem(linkElement.parentNode);break}}}}}async _getPageNumberToDestHash(pdfDocument){if(this._pageNumberToDestHashCapability)return this._pageNumberToDestHashCapability.promise;this._pageNumberToDestHashCapability=(0,_pdfjsLib.createPromiseCapability)();const pageNumberToDestHash=new Map,pageNumberNesting=new Map,queue=[{nesting:0,items:this._outline}];for(;0<queue.length;){var dest,items,levelData=queue.shift(),currentNesting=levelData.nesting;for({dest,items}of levelData.items){let explicitDest,pageNumber;if("string"==typeof dest){if(explicitDest=await pdfDocument.getDestination(dest),pdfDocument!==this._pdfDocument)return null}else explicitDest=dest;if(Array.isArray(explicitDest)){var[destHash]=explicitDest;if("object"==typeof destHash){if(pageNumber=this.linkService._cachedPageNumber(destHash),!pageNumber)try{if(pageNumber=await pdfDocument.getPageIndex(destHash)+1,pdfDocument!==this._pdfDocument)return null;this.linkService.cachePageRef(pageNumber,destHash)}catch(ex){}}else Number.isInteger(destHash)&&(pageNumber=destHash+1);Number.isInteger(pageNumber)&&(!pageNumberToDestHash.has(pageNumber)||currentNesting>pageNumberNesting.get(pageNumber))&&(destHash=this.linkService.getDestinationHash(dest),pageNumberToDestHash.set(pageNumber,destHash),pageNumberNesting.set(pageNumber,currentNesting))}0<items.length&&queue.push({nesting:currentNesting+1,items:items})}}return this._pageNumberToDestHashCapability.resolve(0<pageNumberToDestHash.size?pageNumberToDestHash:null),this._pageNumberToDestHashCapability.promise}}exports.PDFOutlineViewer=PDFOutlineViewer},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFPresentationMode=void 0;var _ui_utils=__webpack_require__(4);const SWIPE_ANGLE_THRESHOLD=Math.PI/6;exports.PDFPresentationMode=class{constructor({container,pdfViewer,eventBus,contextMenuItems=null}){this.container=container,this.pdfViewer=pdfViewer,this.eventBus=eventBus,this.active=!1,this.args=null,this.contextMenuOpen=!1,this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0,this.touchSwipeState=null,contextMenuItems&&(contextMenuItems.contextFirstPage.addEventListener("click",()=>{this.contextMenuOpen=!1,this.eventBus.dispatch("firstpage",{source:this})}),contextMenuItems.contextLastPage.addEventListener("click",()=>{this.contextMenuOpen=!1,this.eventBus.dispatch("lastpage",{source:this})}),contextMenuItems.contextPageRotateCw.addEventListener("click",()=>{this.contextMenuOpen=!1,this.eventBus.dispatch("rotatecw",{source:this})}),contextMenuItems.contextPageRotateCcw.addEventListener("click",()=>{this.contextMenuOpen=!1,this.eventBus.dispatch("rotateccw",{source:this})}))}request(){if(this.switchInProgress||this.active||!this.pdfViewer.pagesCount)return!1;if(this._addFullscreenChangeListeners(),this._setSwitchInProgress(),this._notifyStateChange(),this.container.requestFullscreen)this.container.requestFullscreen();else if(this.container.mozRequestFullScreen)this.container.mozRequestFullScreen();else{if(!this.container.webkitRequestFullscreen)return!1;this.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}return this.args={page:this.pdfViewer.currentPageNumber,previousScale:this.pdfViewer.currentScaleValue},!0}_mouseWheel(storedTime){var currentTime,totalDelta;this.active&&(storedTime.preventDefault(),totalDelta=(0,_ui_utils.normalizeWheelEventDelta)(storedTime),currentTime=(new Date).getTime(),(storedTime=this.mouseScrollTimeStamp)<currentTime&&currentTime-storedTime<50||((0<this.mouseScrollDelta&&totalDelta<0||this.mouseScrollDelta<0&&0<totalDelta)&&this._resetMouseScrollState(),this.mouseScrollDelta+=totalDelta,.1<=Math.abs(this.mouseScrollDelta)&&(totalDelta=this.mouseScrollDelta,this._resetMouseScrollState(),(0<totalDelta?this.pdfViewer.previousPage():this.pdfViewer.nextPage())&&(this.mouseScrollTimeStamp=currentTime))))}get isFullscreen(){return!!(document.fullscreenElement||document.mozFullScreen||document.webkitIsFullScreen)}_notifyStateChange(){let state=_ui_utils.PresentationModeState.NORMAL;this.switchInProgress?state=_ui_utils.PresentationModeState.CHANGING:this.active&&(state=_ui_utils.PresentationModeState.FULLSCREEN),this.eventBus.dispatch("presentationmodechanged",{source:this,state:state,get active(){throw new Error("Deprecated parameter: `active`, please use `state` instead.")},get switchInProgress(){throw new Error("Deprecated parameter: `switchInProgress`, please use `state` instead.")}})}_setSwitchInProgress(){this.switchInProgress&&clearTimeout(this.switchInProgress),this.switchInProgress=setTimeout(()=>{this._removeFullscreenChangeListeners(),delete this.switchInProgress,this._notifyStateChange()},1500)}_resetSwitchInProgress(){this.switchInProgress&&(clearTimeout(this.switchInProgress),delete this.switchInProgress)}_enter(){this.active=!0,this._resetSwitchInProgress(),this._notifyStateChange(),this.container.classList.add("pdfPresentationMode"),setTimeout(()=>{this.pdfViewer.currentPageNumber=this.args.page,this.pdfViewer.currentScaleValue="page-fit"},0),this._addWindowListeners(),this._showControls(),this.contextMenuOpen=!1,this.container.setAttribute("contextmenu","viewerContextMenu"),window.getSelection().removeAllRanges()}_exit(){const page=this.pdfViewer.currentPageNumber;this.container.classList.remove("pdfPresentationMode"),setTimeout(()=>{this.active=!1,this._removeFullscreenChangeListeners(),this._notifyStateChange(),this.pdfViewer.currentScaleValue=this.args.previousScale,this.pdfViewer.currentPageNumber=page,this.args=null},0),this._removeWindowListeners(),this._hideControls(),this._resetMouseScrollState(),this.container.removeAttribute("contextmenu"),this.contextMenuOpen=!1}_mouseDown(evt){if(this.contextMenuOpen)return this.contextMenuOpen=!1,void evt.preventDefault();0===evt.button&&(evt.target.href&&evt.target.classList.contains("internalLink")||(evt.preventDefault(),evt.shiftKey?this.pdfViewer.previousPage():this.pdfViewer.nextPage()))}_contextMenu(){this.contextMenuOpen=!0}_showControls(){this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add("pdfPresentationModeControls"),this.controlsTimeout=setTimeout(()=>{this.container.classList.remove("pdfPresentationModeControls"),delete this.controlsTimeout},3e3)}_hideControls(){this.controlsTimeout&&(clearTimeout(this.controlsTimeout),this.container.classList.remove("pdfPresentationModeControls"),delete this.controlsTimeout)}_resetMouseScrollState(){this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0}_touchSwipe(evt){if(this.active)if(1<evt.touches.length)this.touchSwipeState=null;else switch(evt.type){case"touchstart":this.touchSwipeState={startX:evt.touches[0].pageX,startY:evt.touches[0].pageY,endX:evt.touches[0].pageX,endY:evt.touches[0].pageY};break;case"touchmove":if(null===this.touchSwipeState)return;this.touchSwipeState.endX=evt.touches[0].pageX,this.touchSwipeState.endY=evt.touches[0].pageY,evt.preventDefault();break;case"touchend":if(null===this.touchSwipeState)return;let delta=0;var dx=this.touchSwipeState.endX-this.touchSwipeState.startX,dy=this.touchSwipeState.endY-this.touchSwipeState.startY,absAngle=Math.abs(Math.atan2(dy,dx));50<Math.abs(dx)&&(absAngle<=SWIPE_ANGLE_THRESHOLD||absAngle>=Math.PI-SWIPE_ANGLE_THRESHOLD)?delta=dx:50<Math.abs(dy)&&Math.abs(absAngle-Math.PI/2)<=SWIPE_ANGLE_THRESHOLD&&(delta=dy),0<delta?this.pdfViewer.previousPage():delta<0&&this.pdfViewer.nextPage()}}_addWindowListeners(){this.showControlsBind=this._showControls.bind(this),this.mouseDownBind=this._mouseDown.bind(this),this.mouseWheelBind=this._mouseWheel.bind(this),this.resetMouseScrollStateBind=this._resetMouseScrollState.bind(this),this.contextMenuBind=this._contextMenu.bind(this),this.touchSwipeBind=this._touchSwipe.bind(this),window.addEventListener("mousemove",this.showControlsBind),window.addEventListener("mousedown",this.mouseDownBind),window.addEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.addEventListener("keydown",this.resetMouseScrollStateBind),window.addEventListener("contextmenu",this.contextMenuBind),window.addEventListener("touchstart",this.touchSwipeBind),window.addEventListener("touchmove",this.touchSwipeBind),window.addEventListener("touchend",this.touchSwipeBind)}_removeWindowListeners(){window.removeEventListener("mousemove",this.showControlsBind),window.removeEventListener("mousedown",this.mouseDownBind),window.removeEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.removeEventListener("keydown",this.resetMouseScrollStateBind),window.removeEventListener("contextmenu",this.contextMenuBind),window.removeEventListener("touchstart",this.touchSwipeBind),window.removeEventListener("touchmove",this.touchSwipeBind),window.removeEventListener("touchend",this.touchSwipeBind),delete this.showControlsBind,delete this.mouseDownBind,delete this.mouseWheelBind,delete this.resetMouseScrollStateBind,delete this.contextMenuBind,delete this.touchSwipeBind}_fullscreenChange(){this.isFullscreen?this._enter():this._exit()}_addFullscreenChangeListeners(){this.fullscreenChangeBind=this._fullscreenChange.bind(this),window.addEventListener("fullscreenchange",this.fullscreenChangeBind),window.addEventListener("mozfullscreenchange",this.fullscreenChangeBind),window.addEventListener("webkitfullscreenchange",this.fullscreenChangeBind)}_removeFullscreenChangeListeners(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind),window.removeEventListener("mozfullscreenchange",this.fullscreenChangeBind),window.removeEventListener("webkitfullscreenchange",this.fullscreenChangeBind),delete this.fullscreenChangeBind}}},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFSidebar=void 0;var _ui_utils=__webpack_require__(4),_pdf_rendering_queue=__webpack_require__(8);exports.PDFSidebar=class{constructor({elements,pdfViewer,pdfThumbnailViewer,eventBus,l10n=_ui_utils.NullL10n}){this.isOpen=!1,this.active=_ui_utils.SidebarView.THUMBS,this.isInitialViewSet=!1,this.onToggled=null,this.pdfViewer=pdfViewer,this.pdfThumbnailViewer=pdfThumbnailViewer,this.outerContainer=elements.outerContainer,this.viewerContainer=elements.viewerContainer,this.toggleButton=elements.toggleButton,this.thumbnailButton=elements.thumbnailButton,this.outlineButton=elements.outlineButton,this.attachmentsButton=elements.attachmentsButton,this.layersButton=elements.layersButton,this.thumbnailView=elements.thumbnailView,this.outlineView=elements.outlineView,this.attachmentsView=elements.attachmentsView,this.layersView=elements.layersView,this._outlineOptionsContainer=elements.outlineOptionsContainer,this._currentOutlineItemButton=elements.currentOutlineItemButton,this.eventBus=eventBus,this.l10n=l10n,this._addEventListeners()}reset(){this.isInitialViewSet=!1,this._hideUINotification(!0),this.switchView(_ui_utils.SidebarView.THUMBS),this.outlineButton.disabled=!1,this.attachmentsButton.disabled=!1,this.layersButton.disabled=!1,this._currentOutlineItemButton.disabled=!0}get visibleView(){return this.isOpen?this.active:_ui_utils.SidebarView.NONE}get isThumbnailViewVisible(){return this.isOpen&&this.active===_ui_utils.SidebarView.THUMBS}get isOutlineViewVisible(){return this.isOpen&&this.active===_ui_utils.SidebarView.OUTLINE}get isAttachmentsViewVisible(){return this.isOpen&&this.active===_ui_utils.SidebarView.ATTACHMENTS}get isLayersViewVisible(){return this.isOpen&&this.active===_ui_utils.SidebarView.LAYERS}setInitialView(view=_ui_utils.SidebarView.NONE){this.isInitialViewSet||(this.isInitialViewSet=!0,view!==_ui_utils.SidebarView.NONE&&view!==_ui_utils.SidebarView.UNKNOWN&&this._switchView(view,!0)||this._dispatchEvent())}switchView(view,forceOpen=!1){this._switchView(view,forceOpen)}_switchView(view,forceOpen=!1){var isViewChanged=view!==this.active;let shouldForceRendering=!1;switch(view){case _ui_utils.SidebarView.NONE:return this.isOpen?(this.close(),!0):!1;case _ui_utils.SidebarView.THUMBS:this.isOpen&&isViewChanged&&(shouldForceRendering=!0);break;case _ui_utils.SidebarView.OUTLINE:if(this.outlineButton.disabled)return!1;break;case _ui_utils.SidebarView.ATTACHMENTS:if(this.attachmentsButton.disabled)return!1;break;case _ui_utils.SidebarView.LAYERS:if(this.layersButton.disabled)return!1;break;default:return console.error(`PDFSidebar._switchView: "${view}" is not a valid view.`),!1}return this.active=view,this.thumbnailButton.classList.toggle("toggled",view===_ui_utils.SidebarView.THUMBS),this.outlineButton.classList.toggle("toggled",view===_ui_utils.SidebarView.OUTLINE),this.attachmentsButton.classList.toggle("toggled",view===_ui_utils.SidebarView.ATTACHMENTS),this.layersButton.classList.toggle("toggled",view===_ui_utils.SidebarView.LAYERS),this.thumbnailView.classList.toggle("hidden",view!==_ui_utils.SidebarView.THUMBS),this.outlineView.classList.toggle("hidden",view!==_ui_utils.SidebarView.OUTLINE),this.attachmentsView.classList.toggle("hidden",view!==_ui_utils.SidebarView.ATTACHMENTS),this.layersView.classList.toggle("hidden",view!==_ui_utils.SidebarView.LAYERS),this._outlineOptionsContainer.classList.toggle("hidden",view!==_ui_utils.SidebarView.OUTLINE),forceOpen&&!this.isOpen?(this.open(),!0):(shouldForceRendering&&(this._updateThumbnailViewer(),this._forceRendering()),isViewChanged&&this._dispatchEvent(),isViewChanged)}open(){this.isOpen||(this.isOpen=!0,this.toggleButton.classList.add("toggled"),this.outerContainer.classList.add("sidebarMoving","sidebarOpen"),this.active===_ui_utils.SidebarView.THUMBS&&this._updateThumbnailViewer(),this._forceRendering(),this._dispatchEvent(),this._hideUINotification())}close(){this.isOpen&&(this.isOpen=!1,this.toggleButton.classList.remove("toggled"),this.outerContainer.classList.add("sidebarMoving"),this.outerContainer.classList.remove("sidebarOpen"),this._forceRendering(),this._dispatchEvent())}toggle(){this.isOpen?this.close():this.open()}_dispatchEvent(){this.eventBus.dispatch("sidebarviewchanged",{source:this,view:this.visibleView})}_forceRendering(){this.onToggled?this.onToggled():(this.pdfViewer.forceRendering(),this.pdfThumbnailViewer.forceRendering())}_updateThumbnailViewer(){const{pdfViewer,pdfThumbnailViewer}=this;var pagesCount=pdfViewer.pagesCount;for(let pageIndex=0;pageIndex<pagesCount;pageIndex++){var pageView=pdfViewer.getPageView(pageIndex);if(pageView&&pageView.renderingState===_pdf_rendering_queue.RenderingStates.FINISHED){const thumbnailView=pdfThumbnailViewer.getThumbnail(pageIndex);thumbnailView.setImage(pageView)}}pdfThumbnailViewer.scrollThumbnailIntoView(pdfViewer.currentPageNumber)}_showUINotification(){this.l10n.get("toggle_sidebar_notification2.title",null,"Toggle Sidebar (document contains outline/attachments/layers)").then(msg=>{this.toggleButton.title=msg}),this.isOpen||this.toggleButton.classList.add("pdfSidebarNotification")}_hideUINotification(reset=!1){(this.isOpen||reset)&&this.toggleButton.classList.remove("pdfSidebarNotification"),reset&&this.l10n.get("toggle_sidebar.title",null,"Toggle Sidebar").then(msg=>{this.toggleButton.title=msg})}_addEventListeners(){this.viewerContainer.addEventListener("transitionend",evt=>{evt.target===this.viewerContainer&&this.outerContainer.classList.remove("sidebarMoving")}),this.toggleButton.addEventListener("click",()=>{this.toggle()}),this.thumbnailButton.addEventListener("click",()=>{this.switchView(_ui_utils.SidebarView.THUMBS)}),this.outlineButton.addEventListener("click",()=>{this.switchView(_ui_utils.SidebarView.OUTLINE)}),this.outlineButton.addEventListener("dblclick",()=>{this.eventBus.dispatch("toggleoutlinetree",{source:this})}),this.attachmentsButton.addEventListener("click",()=>{this.switchView(_ui_utils.SidebarView.ATTACHMENTS)}),this.layersButton.addEventListener("click",()=>{this.switchView(_ui_utils.SidebarView.LAYERS)}),this.layersButton.addEventListener("dblclick",()=>{this.eventBus.dispatch("resetlayers",{source:this})}),this._currentOutlineItemButton.addEventListener("click",()=>{this.eventBus.dispatch("currentoutlineitem",{source:this})});const onTreeLoaded=(count,button,view)=>{button.disabled=!count,count?this._showUINotification():this.active===view&&this.switchView(_ui_utils.SidebarView.THUMBS)};this.eventBus._on("outlineloaded",evt=>{onTreeLoaded(evt.outlineCount,this.outlineButton,_ui_utils.SidebarView.OUTLINE),evt.enableCurrentOutlineItemButton&&this.pdfViewer.pagesPromise.then(()=>{this._currentOutlineItemButton.disabled=!this.isInitialViewSet})}),this.eventBus._on("attachmentsloaded",evt=>{onTreeLoaded(evt.attachmentsCount,this.attachmentsButton,_ui_utils.SidebarView.ATTACHMENTS)}),this.eventBus._on("layersloaded",evt=>{onTreeLoaded(evt.layersCount,this.layersButton,_ui_utils.SidebarView.LAYERS)}),this.eventBus._on("presentationmodechanged",evt=>{evt.state===_ui_utils.PresentationModeState.NORMAL&&this.isThumbnailViewVisible&&this._updateThumbnailViewer()})}}},(__unused_webpack_module,exports,_ui_utils)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFSidebarResizer=void 0;_ui_utils=_ui_utils(4);exports.PDFSidebarResizer=class{constructor(options,eventBus,l10n=_ui_utils.NullL10n){this.isRTL=!1,this.sidebarOpen=!1,this.doc=document.documentElement,this._width=null,this._outerContainerWidth=null,this._boundEvents=Object.create(null),this.outerContainer=options.outerContainer,this.resizer=options.resizer,this.eventBus=eventBus,l10n.getDirection().then(dir=>{this.isRTL="rtl"===dir}),this._addEventListeners()}get outerContainerWidth(){return this._outerContainerWidth||(this._outerContainerWidth=this.outerContainer.clientWidth),this._outerContainerWidth}_updateWidth(width=0){var maxWidth=Math.floor(this.outerContainerWidth/2);return(width=(width=maxWidth<width?maxWidth:width)<200?200:width)!==this._width&&(this._width=width,this.doc.style.setProperty("--sidebar-width",width+"px"),!0)}_mouseMove(evt){let width=evt.clientX;this.isRTL&&(width=this.outerContainerWidth-width),this._updateWidth(width)}_mouseUp(evt){this.outerContainer.classList.remove("sidebarResizing"),this.eventBus.dispatch("resize",{source:this});var _boundEvents=this._boundEvents;window.removeEventListener("mousemove",_boundEvents.mouseMove),window.removeEventListener("mouseup",_boundEvents.mouseUp)}_addEventListeners(){const _boundEvents=this._boundEvents;_boundEvents.mouseMove=this._mouseMove.bind(this),_boundEvents.mouseUp=this._mouseUp.bind(this),this.resizer.addEventListener("mousedown",evt=>{0===evt.button&&(this.outerContainer.classList.add("sidebarResizing"),window.addEventListener("mousemove",_boundEvents.mouseMove),window.addEventListener("mouseup",_boundEvents.mouseUp))}),this.eventBus._on("sidebarviewchanged",evt=>{this.sidebarOpen=!(!evt||!evt.view)}),this.eventBus._on("resize",evt=>{if(evt&&evt.source===window&&(this._outerContainerWidth=null,this._width))if(this.sidebarOpen){this.outerContainer.classList.add("sidebarResizing");const updated=this._updateWidth(this._width);Promise.resolve().then(()=>{this.outerContainer.classList.remove("sidebarResizing"),updated&&this.eventBus.dispatch("resize",{source:this})})}else this._updateWidth(this._width)})}}},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFThumbnailViewer=void 0;var _ui_utils=__webpack_require__(4),_pdf_thumbnail_view=__webpack_require__(25),_pdf_rendering_queue=__webpack_require__(8);exports.PDFThumbnailViewer=class{constructor({container,eventBus,linkService,renderingQueue,l10n=_ui_utils.NullL10n}){this.container=container,this.linkService=linkService,this.renderingQueue=renderingQueue,this.l10n=l10n,this.scroll=(0,_ui_utils.watchScroll)(this.container,this._scrollUpdated.bind(this)),this._resetView(),eventBus._on("optionalcontentconfigchanged",()=>{this._setImageDisabled=!0})}_scrollUpdated(){this.renderingQueue.renderHighestPriority()}getThumbnail(index){return this._thumbnails[index]}_getVisibleThumbs(){return(0,_ui_utils.getVisibleElements)({scrollEl:this.container,views:this._thumbnails})}scrollThumbnailIntoView(pageNumber){if(this.pdfDocument){const thumbnailView=this._thumbnails[pageNumber-1];if(thumbnailView){if(pageNumber!==this._currentPageNumber){const prevThumbnailView=this._thumbnails[this._currentPageNumber-1];prevThumbnailView.div.classList.remove("selected"),thumbnailView.div.classList.add("selected")}const visibleThumbs=this._getVisibleThumbs();var last=visibleThumbs.views.length;if(0<last){var first=visibleThumbs.first.id,last=1<last?visibleThumbs.last.id:first;let shouldScroll=!1;pageNumber<=first||last<=pageNumber?shouldScroll=!0:visibleThumbs.views.some(function(view){return view.id===pageNumber&&(shouldScroll=view.percent<100,!0)}),shouldScroll&&(0,_ui_utils.scrollIntoView)(thumbnailView.div,{top:-19})}this._currentPageNumber=pageNumber}else console.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.')}}get pagesRotation(){return this._pagesRotation}set pagesRotation(rotation){if(!(0,_ui_utils.isValidRotation)(rotation))throw new Error("Invalid thumbnails rotation angle.");if(this.pdfDocument&&this._pagesRotation!==rotation){this._pagesRotation=rotation;for(let i=0,ii=this._thumbnails.length;i<ii;i++)this._thumbnails[i].update(rotation)}}cleanup(){for(let i=0,ii=this._thumbnails.length;i<ii;i++)this._thumbnails[i]&&this._thumbnails[i].renderingState!==_pdf_rendering_queue.RenderingStates.FINISHED&&this._thumbnails[i].reset();_pdf_thumbnail_view.TempImageFactory.destroyCanvas()}_resetView(){this._thumbnails=[],this._currentPageNumber=1,this._pageLabels=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._pagesRequests=new WeakMap,this._setImageDisabled=!1,this.container.textContent=""}setDocument(pdfDocument){if(this.pdfDocument&&(this._cancelRendering(),this._resetView()),this.pdfDocument=pdfDocument){const firstPagePromise=pdfDocument.getPage(1),optionalContentConfigPromise=pdfDocument.getOptionalContentConfig();firstPagePromise.then(firstPdfPage=>{this._optionalContentConfigPromise=optionalContentConfigPromise;var pagesCount=pdfDocument.numPages;const viewport=firstPdfPage.getViewport({scale:1});var checkSetImageDisabled=()=>this._setImageDisabled;for(let pageNum=1;pageNum<=pagesCount;++pageNum){var thumbnail=new _pdf_thumbnail_view.PDFThumbnailView({container:this.container,id:pageNum,defaultViewport:viewport.clone(),optionalContentConfigPromise:optionalContentConfigPromise,linkService:this.linkService,renderingQueue:this.renderingQueue,checkSetImageDisabled:checkSetImageDisabled,disableCanvasToImageConversion:!1,l10n:this.l10n});this._thumbnails.push(thumbnail)}const firstThumbnailView=this._thumbnails[0];firstThumbnailView&&firstThumbnailView.setPdfPage(firstPdfPage);const thumbnailView=this._thumbnails[this._currentPageNumber-1];thumbnailView.div.classList.add("selected")}).catch(reason=>{console.error("Unable to initialize thumbnail viewer",reason)})}}_cancelRendering(){for(let i=0,ii=this._thumbnails.length;i<ii;i++)this._thumbnails[i]&&this._thumbnails[i].cancelRendering()}setPageLabels(labels){if(this.pdfDocument){labels?Array.isArray(labels)&&this.pdfDocument.numPages===labels.length?this._pageLabels=labels:(this._pageLabels=null,console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let i=0,ii=this._thumbnails.length;i<ii;i++){var label=this._pageLabels&&this._pageLabels[i];this._thumbnails[i].setPageLabel(label)}}}_ensurePdfPageLoaded(thumbView){if(thumbView.pdfPage)return Promise.resolve(thumbView.pdfPage);if(this._pagesRequests.has(thumbView))return this._pagesRequests.get(thumbView);var promise=this.pdfDocument.getPage(thumbView.id).then(pdfPage=>(thumbView.pdfPage||thumbView.setPdfPage(pdfPage),this._pagesRequests.delete(thumbView),pdfPage)).catch(reason=>{console.error("Unable to get page for thumb view",reason),this._pagesRequests.delete(thumbView)});return this._pagesRequests.set(thumbView,promise),promise}forceRendering(){var visibleThumbs=this._getVisibleThumbs();const thumbView=this.renderingQueue.getHighestPriority(visibleThumbs,this._thumbnails,this.scroll.down);return!!thumbView&&(this._ensurePdfPageLoaded(thumbView).then(()=>{this.renderingQueue.renderView(thumbView)}),!0)}}},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.TempImageFactory=exports.PDFThumbnailView=void 0;var _ui_utils=__webpack_require__(4),_pdfjsLib=__webpack_require__(5),_pdf_rendering_queue=__webpack_require__(8);const TempImageFactory=function(){let tempCanvasCache=null;return{getCanvas(width,height){let tempCanvas=tempCanvasCache;tempCanvas||(tempCanvas=document.createElement("canvas"),tempCanvasCache=tempCanvas),tempCanvas.width=width,tempCanvas.height=height,tempCanvas.mozOpaque=!0;const ctx=tempCanvas.getContext("2d",{alpha:!1});return ctx.save(),ctx.fillStyle="rgb(255, 255, 255)",ctx.fillRect(0,0,width,height),ctx.restore(),tempCanvas},destroyCanvas(){const tempCanvas=tempCanvasCache;tempCanvas&&(tempCanvas.width=0,tempCanvas.height=0),tempCanvasCache=null}}}();exports.TempImageFactory=TempImageFactory;exports.PDFThumbnailView=class{constructor({container,id,defaultViewport,optionalContentConfigPromise,linkService,renderingQueue,checkSetImageDisabled,disableCanvasToImageConversion=!1,l10n=_ui_utils.NullL10n}){this.id=id,this.renderingId="thumbnail"+id,this.pageLabel=null,this.pdfPage=null,this.rotation=0,this.viewport=defaultViewport,this.pdfPageRotate=defaultViewport.rotation,this._optionalContentConfigPromise=optionalContentConfigPromise||null,this.linkService=linkService,this.renderingQueue=renderingQueue,this.renderTask=null,this.renderingState=_pdf_rendering_queue.RenderingStates.INITIAL,this.resume=null,this._checkSetImageDisabled=checkSetImageDisabled||function(){return!1},this.disableCanvasToImageConversion=disableCanvasToImageConversion,this.pageWidth=this.viewport.width,this.pageHeight=this.viewport.height,this.pageRatio=this.pageWidth/this.pageHeight,this.canvasWidth=98,this.canvasHeight=this.canvasWidth/this.pageRatio|0,this.scale=this.canvasWidth/this.pageWidth,this.l10n=l10n;const anchor=document.createElement("a");anchor.href=linkService.getAnchorUrl("#page="+id),this._thumbPageTitle.then(msg=>{anchor.title=msg}),anchor.onclick=function(){return linkService.goToPage(id),!1},this.anchor=anchor;const div=document.createElement("div");div.className="thumbnail",div.setAttribute("data-page-number",this.id),this.div=div;const ring=document.createElement("div");ring.className="thumbnailSelectionRing";ring.style.width=this.canvasWidth+2+"px",ring.style.height=this.canvasHeight+2+"px",this.ring=ring,div.appendChild(ring),anchor.appendChild(div),container.appendChild(anchor)}setPdfPage(pdfPage){this.pdfPage=pdfPage,this.pdfPageRotate=pdfPage.rotate;var totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=pdfPage.getViewport({scale:1,rotation:totalRotation}),this.reset()}reset(){this.cancelRendering(),this.renderingState=_pdf_rendering_queue.RenderingStates.INITIAL,this.pageWidth=this.viewport.width,this.pageHeight=this.viewport.height,this.pageRatio=this.pageWidth/this.pageHeight,this.canvasHeight=this.canvasWidth/this.pageRatio|0,this.scale=this.canvasWidth/this.pageWidth,this.div.removeAttribute("data-loaded");const ring=this.ring;var childNodes=ring.childNodes;for(let i=childNodes.length-1;0<=i;i--)ring.removeChild(childNodes[i]);ring.style.width=this.canvasWidth+2+"px",ring.style.height=this.canvasHeight+2+"px",this.canvas&&(this.canvas.width=0,this.canvas.height=0,delete this.canvas),this.image&&(this.image.removeAttribute("src"),delete this.image)}update(totalRotation){void 0!==totalRotation&&(this.rotation=totalRotation);totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:totalRotation}),this.reset()}cancelRendering(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.resume=null}_getPageDrawContext(){const canvas=document.createElement("canvas");this.canvas=canvas,canvas.mozOpaque=!0;var ctx=canvas.getContext("2d",{alpha:!1}),outputScale=(0,_ui_utils.getOutputScale)(ctx);return canvas.width=this.canvasWidth*outputScale.sx|0,canvas.height=this.canvasHeight*outputScale.sy|0,canvas.style.width=this.canvasWidth+"px",canvas.style.height=this.canvasHeight+"px",[ctx,outputScale.scaled?[outputScale.sx,0,0,outputScale.sy,0,0]:null]}_convertCanvasToImage(){if(this.canvas&&this.renderingState===_pdf_rendering_queue.RenderingStates.FINISHED){if(this.disableCanvasToImageConversion)return this.canvas.className="thumbnailImage",this._thumbPageCanvas.then(msg=>{this.canvas.setAttribute("aria-label",msg)}),this.div.setAttribute("data-loaded",!0),void this.ring.appendChild(this.canvas);const image=document.createElement("img");image.className="thumbnailImage",this._thumbPageCanvas.then(msg=>{image.setAttribute("aria-label",msg)}),image.style.width=this.canvasWidth+"px",image.style.height=this.canvasHeight+"px",image.src=this.canvas.toDataURL(),this.image=image,this.div.setAttribute("data-loaded",!0),this.ring.appendChild(image),this.canvas.width=0,this.canvas.height=0,delete this.canvas}}draw(){if(this.renderingState!==_pdf_rendering_queue.RenderingStates.INITIAL)return console.error("Must be in new state before drawing"),Promise.resolve(void 0);const pdfPage=this["pdfPage"];if(!pdfPage)return this.renderingState=_pdf_rendering_queue.RenderingStates.FINISHED,Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=_pdf_rendering_queue.RenderingStates.RUNNING;const finishRenderTask=async(error=null)=>{if(renderTask===this.renderTask&&(this.renderTask=null),!(error instanceof _pdfjsLib.RenderingCancelledException)&&(this.renderingState=_pdf_rendering_queue.RenderingStates.FINISHED,this._convertCanvasToImage(),error))throw error};var[ctx,renderContext]=this._getPageDrawContext(),renderContext={canvasContext:ctx,transform:renderContext,viewport:this.viewport.clone({scale:this.scale}),optionalContentConfigPromise:this._optionalContentConfigPromise};const renderTask=this.renderTask=pdfPage.render(renderContext);renderTask.onContinue=cont=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=_pdf_rendering_queue.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=_pdf_rendering_queue.RenderingStates.RUNNING,cont()});cont()};const resultPromise=renderTask.promise.then(function(){finishRenderTask(null)},function(error){finishRenderTask(error)});return resultPromise.finally(()=>{this.linkService.isPageCached(this.id)||this.pdfPage?.cleanup()}),resultPromise}setImage(pageView){if(!this._checkSetImageDisabled()&&this.renderingState===_pdf_rendering_queue.RenderingStates.INITIAL){var img=pageView.canvas;if(img){this.pdfPage||this.setPdfPage(pageView.pdfPage),this.renderingState=_pdf_rendering_queue.RenderingStates.FINISHED;const[ctx]=this._getPageDrawContext();var canvas=ctx.canvas;if(img.width<=2*canvas.width)return ctx.drawImage(img,0,0,img.width,img.height,0,0,canvas.width,canvas.height),void this._convertCanvasToImage();let reducedWidth=canvas.width<<3,reducedHeight=canvas.height<<3;const reducedImage=TempImageFactory.getCanvas(reducedWidth,reducedHeight),reducedImageCtx=reducedImage.getContext("2d");for(;reducedWidth>img.width||reducedHeight>img.height;)reducedWidth>>=1,reducedHeight>>=1;for(reducedImageCtx.drawImage(img,0,0,img.width,img.height,0,0,reducedWidth,reducedHeight);reducedWidth>2*canvas.width;)reducedImageCtx.drawImage(reducedImage,0,0,reducedWidth,reducedHeight,0,0,reducedWidth>>1,reducedHeight>>1),reducedWidth>>=1,reducedHeight>>=1;ctx.drawImage(reducedImage,0,0,reducedWidth,reducedHeight,0,0,canvas.width,canvas.height),this._convertCanvasToImage()}}}get _thumbPageTitle(){return this.l10n.get("thumb_page_title",{page:this.pageLabel??this.id},"Page {{page}}")}get _thumbPageCanvas(){return this.l10n.get("thumb_page_canvas",{page:this.pageLabel??this.id},"Thumbnail of Page {{page}}")}setPageLabel(label){this.pageLabel="string"==typeof label?label:null,this._thumbPageTitle.then(msg=>{this.anchor.title=msg}),this.renderingState===_pdf_rendering_queue.RenderingStates.FINISHED&&this._thumbPageCanvas.then(msg=>{this.image?this.image.setAttribute("aria-label",msg):this.disableCanvasToImageConversion&&this.canvas&&this.canvas.setAttribute("aria-label",msg)})}}},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFViewer=void 0;var _ui_utils=__webpack_require__(4),_base_viewer=__webpack_require__(27),_pdfjsLib=__webpack_require__(5);class PDFViewer extends _base_viewer.BaseViewer{get _viewerElement(){return(0,_pdfjsLib.shadow)(this,"_viewerElement",this.viewer)}_scrollIntoView({pageDiv,pageSpot=null,pageNumber=null}){var left,right,scrollLeft,clientWidth;pageSpot||this.isInPresentationMode||(right=(left=pageDiv.offsetLeft+pageDiv.clientLeft)+pageDiv.clientWidth,{scrollLeft,clientWidth}=this.container,(this._isScrollModeHorizontal||left<scrollLeft||scrollLeft+clientWidth<right)&&(pageSpot={left:0,top:0})),super._scrollIntoView({pageDiv:pageDiv,pageSpot:pageSpot,pageNumber:pageNumber})}_getVisiblePages(){return this.isInPresentationMode?this._getCurrentVisiblePage():super._getVisiblePages()}_updateHelper(visiblePages){if(!this.isInPresentationMode){let currentId=this._currentPageNumber,stillFullyVisible=!1;for(const page of visiblePages){if(page.percent<100)break;if(page.id===currentId&&this._scrollMode===_ui_utils.ScrollMode.VERTICAL&&this._spreadMode===_ui_utils.SpreadMode.NONE){stillFullyVisible=!0;break}}stillFullyVisible||(currentId=visiblePages[0].id),this._setCurrentPageNumber(currentId)}}}exports.PDFViewer=PDFViewer},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseViewer=void 0;var _pdfjsLib=__webpack_require__(5),_ui_utils=__webpack_require__(4),_pdf_rendering_queue=__webpack_require__(8),_annotation_layer_builder=__webpack_require__(28),_pdf_page_view=__webpack_require__(29),_pdf_link_service=__webpack_require__(19),_text_layer_builder=__webpack_require__(30);function PDFPageViewBuffer(size){const data=[];this.push=function(view){var i=data.indexOf(view);0<=i&&data.splice(i,1),data.push(view),data.length>size&&data.shift().destroy()},this.resize=function(newSize,pagesToKeep){if(size=newSize,pagesToKeep){const pageIdsToKeep=new Set;for(let i=0,iMax=pagesToKeep.length;i<iMax;++i)pageIdsToKeep.add(pagesToKeep[i].id);(0,_ui_utils.moveToEndOfArray)(data,function(page){return pageIdsToKeep.has(page.id)})}for(;data.length>size;)data.shift().destroy()},this.has=function(view){return data.includes(view)}}exports.BaseViewer=class BaseViewer{constructor(options){if(this.constructor===BaseViewer)throw new Error("Cannot initialize BaseViewer.");if("2.7.570"!==_pdfjsLib.version)throw new Error(`The API version "${_pdfjsLib.version}" does not match the Viewer version "2.7.570".`);if(this._name=this.constructor.name,this.container=options.container,this.viewer=options.viewer||options.container.firstElementChild,"DIV"!==this.container?.tagName.toUpperCase()||"DIV"!==this.viewer?.tagName.toUpperCase())throw new Error("Invalid `container` and/or `viewer` option.");if("absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=options.eventBus,this.linkService=options.linkService||new _pdf_link_service.SimpleLinkService,this.downloadManager=options.downloadManager||null,this.findController=options.findController||null,this.removePageBorders=options.removePageBorders||!1,this.textLayerMode=Number.isInteger(options.textLayerMode)?options.textLayerMode:_ui_utils.TextLayerMode.ENABLE,this.imageResourcesPath=options.imageResourcesPath||"",this.renderInteractiveForms="boolean"!=typeof options.renderInteractiveForms||options.renderInteractiveForms,this.enablePrintAutoRotate=options.enablePrintAutoRotate||!1,this.renderer=options.renderer||_ui_utils.RendererType.CANVAS,this.enableWebGL=options.enableWebGL||!1,this.useOnlyCssZoom=options.useOnlyCssZoom||!1,this.maxCanvasPixels=options.maxCanvasPixels,this.l10n=options.l10n||_ui_utils.NullL10n,this.enableScripting=options.enableScripting||!1,this._mouseState=options.mouseState||null,this.defaultRenderingQueue=!options.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new _pdf_rendering_queue.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=options.renderingQueue,this.scroll=(0,_ui_utils.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=_ui_utils.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),Promise.resolve().then(()=>{this.eventBus.dispatch("baseviewerinit",{source:this})})}get pagesCount(){return this._pages.length}getPageView(index){return this._pages[index]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every(function(pageView){return pageView&&pageView.pdfPage})}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(val){if(!Number.isInteger(val))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(val,!0)||console.error(this._name+`.currentPageNumber: "${val}" is not a valid page.`))}_setCurrentPageNumber(val,resetCurrentPageView=!1){if(this._currentPageNumber===val)return resetCurrentPageView&&this._resetCurrentPageView(),!0;if(!(0<val&&val<=this.pagesCount))return!1;var previous=this._currentPageNumber;return this._currentPageNumber=val,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:val,pageLabel:this._pageLabels&&this._pageLabels[val-1],previous:previous}),resetCurrentPageView&&this._resetCurrentPageView(),!0}get currentPageLabel(){return this._pageLabels&&this._pageLabels[this._currentPageNumber-1]}set currentPageLabel(val){if(this.pdfDocument){let page=0|val;var i;!this._pageLabels||0<=(i=this._pageLabels.indexOf(val))&&(page=i+1),this._setCurrentPageNumber(page,!0)||console.error(this._name+`.currentPageLabel: "${val}" is not a valid page.`)}}get currentScale(){return this._currentScale!==_ui_utils.UNKNOWN_SCALE?this._currentScale:_ui_utils.DEFAULT_SCALE}set currentScale(val){if(isNaN(val))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(val,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(val){this.pdfDocument&&this._setScale(val,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(rotation){if(!(0,_ui_utils.isValidRotation)(rotation))throw new Error("Invalid pages rotation angle.");if(this.pdfDocument&&this._pagesRotation!==rotation){this._pagesRotation=rotation;var pageNumber=this._currentPageNumber;for(let i=0,ii=this._pages.length;i<ii;i++){const pageView=this._pages[i];pageView.update(pageView.scale,rotation)}this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:rotation,pageNumber:pageNumber}),this.defaultRenderingQueue&&this.update()}}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}get _viewerElement(){throw new Error("Not implemented: _viewerElement")}_onePageRenderedOrForceFetch(){return this.container.offsetParent&&0!==this._getVisiblePages().views.length?this._onePageRenderedCapability.promise:Promise.resolve()}setDocument(pdfDocument){if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null)),this.pdfDocument=pdfDocument){const pagesCount=pdfDocument.numPages,firstPagePromise=pdfDocument.getPage(1),optionalContentConfigPromise=pdfDocument.getOptionalContentConfig();this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:pagesCount})}),this._onBeforeDraw=pageView=>{(pageView=this._pages[pageView.pageNumber-1])&&this._buffer.push(pageView)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=evt=>{evt.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve(),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null)},this.eventBus._on("pagerendered",this._onAfterDraw),firstPagePromise.then(firstPdfPage=>{this._firstPageCapability.resolve(firstPdfPage),this._optionalContentConfigPromise=optionalContentConfigPromise;var scale=this.currentScale;const viewport=firstPdfPage.getViewport({scale:scale*_ui_utils.CSS_UNITS});var textLayerFactory=this.textLayerMode!==_ui_utils.TextLayerMode.DISABLE?this:null;for(let pageNum=1;pageNum<=pagesCount;++pageNum){var pageView=new _pdf_page_view.PDFPageView({container:this._viewerElement,eventBus:this.eventBus,id:pageNum,scale:scale,defaultViewport:viewport.clone(),optionalContentConfigPromise:optionalContentConfigPromise,renderingQueue:this.renderingQueue,textLayerFactory:textLayerFactory,textLayerMode:this.textLayerMode,annotationLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderInteractiveForms:this.renderInteractiveForms,renderer:this.renderer,enableWebGL:this.enableWebGL,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,l10n:this.l10n,enableScripting:this.enableScripting});this._pages.push(pageView)}const firstPageView=this._pages[0];firstPageView&&(firstPageView.setPdfPage(firstPdfPage),this.linkService.cachePageRef(1,firstPdfPage.ref)),this._spreadMode!==_ui_utils.SpreadMode.NONE&&this._updateSpreadMode(),this._onePageRenderedOrForceFetch().then(()=>{if(this.findController&&this.findController.setDocument(pdfDocument),pdfDocument.loadingParams.disableAutoFetch||7500<pagesCount)this._pagesCapability.resolve();else{let getPagesLeft=pagesCount-1;if(getPagesLeft<=0)this._pagesCapability.resolve();else for(let pageNum=2;pageNum<=pagesCount;++pageNum)pdfDocument.getPage(pageNum).then(pdfPage=>{const pageView=this._pages[pageNum-1];pageView.pdfPage||pageView.setPdfPage(pdfPage),this.linkService.cachePageRef(pageNum,pdfPage.ref),0==--getPagesLeft&&this._pagesCapability.resolve()},reason=>{console.error(`Unable to get page ${pageNum} to initialize viewer`,reason),0==--getPagesLeft&&this._pagesCapability.resolve()})}}),this.eventBus.dispatch("pagesinit",{source:this}),this.defaultRenderingQueue&&this.update()}).catch(reason=>{console.error("Unable to initialize viewer",reason)})}}setPageLabels(labels){if(this.pdfDocument){labels?Array.isArray(labels)&&this.pdfDocument.numPages===labels.length?this._pageLabels=labels:(this._pageLabels=null,console.error(this._name+".setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let i=0,ii=this._pages.length;i<ii;i++){const pageView=this._pages[i];var label=this._pageLabels&&this._pageLabels[i];pageView.setPageLabel(label)}}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=_ui_utils.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,this._buffer=new PDFPageViewBuffer(10),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._pagesRequests=new WeakMap,this._firstPageCapability=(0,_pdfjsLib.createPromiseCapability)(),this._onePageRenderedCapability=(0,_pdfjsLib.createPromiseCapability)(),this._pagesCapability=(0,_pdfjsLib.createPromiseCapability)(),this._scrollMode=_ui_utils.ScrollMode.VERTICAL,this._spreadMode=_ui_utils.SpreadMode.NONE,this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),this._resetScriptingEvents(),this.viewer.textContent="",this._updateScrollMode()}_scrollUpdate(){0!==this.pagesCount&&this.update()}_scrollIntoView({pageDiv,pageSpot=null}){(0,_ui_utils.scrollIntoView)(pageDiv,pageSpot)}_setScaleUpdatePages(newScale,newValue,noScroll=!1,preset=!1){if(this._currentScaleValue=newValue.toString(),function(oldScale,newScale){return newScale===oldScale||Math.abs(newScale-oldScale)<1e-15}(this._currentScale,newScale))preset&&this.eventBus.dispatch("scalechanging",{source:this,scale:newScale,presetValue:newValue});else{for(let i=0,ii=this._pages.length;i<ii;i++)this._pages[i].update(newScale);if(this._currentScale=newScale,!noScroll){let page=this._currentPageNumber,dest;!this._location||this.isInPresentationMode||this.isChangingPresentationMode||(page=this._location.pageNumber,dest=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:page,destArray:dest,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:newScale,presetValue:preset?newValue:void 0}),this.defaultRenderingQueue&&this.update()}}get _pageWidthScaleFactor(){return this.spreadMode===_ui_utils.SpreadMode.NONE||this.scrollMode===_ui_utils.ScrollMode.HORIZONTAL||this.isInPresentationMode?1:2}_setScale(value,noScroll=!1){let scale=parseFloat(value);if(0<scale)this._setScaleUpdatePages(scale,value,noScroll,!1);else{var currentPage=this._pages[this._currentPageNumber-1];if(currentPage){var noPadding=this.isInPresentationMode||this.removePageBorders;let hPadding=noPadding?0:_ui_utils.SCROLLBAR_PADDING,vPadding=noPadding?0:_ui_utils.VERTICAL_PADDING;!noPadding&&this._isScrollModeHorizontal&&([hPadding,vPadding]=[vPadding,hPadding]);var pageWidthScale=(this.container.clientWidth-hPadding)/currentPage.width*currentPage.scale/this._pageWidthScaleFactor,pageHeightScale=(this.container.clientHeight-vPadding)/currentPage.height*currentPage.scale;switch(value){case"page-actual":scale=1;break;case"page-width":scale=pageWidthScale;break;case"page-height":scale=pageHeightScale;break;case"page-fit":scale=Math.min(pageWidthScale,pageHeightScale);break;case"auto":var horizontalScale=(0,_ui_utils.isPortraitOrientation)(currentPage)?pageWidthScale:Math.min(pageHeightScale,pageWidthScale);scale=Math.min(_ui_utils.MAX_AUTO_SCALE,horizontalScale);break;default:return void console.error(this._name+`._setScale: "${value}" is an unknown zoom value.`)}this._setScaleUpdatePages(scale,value,noScroll,!0)}}}_resetCurrentPageView(){this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0);var pageView=this._pages[this._currentPageNumber-1];this._scrollIntoView({pageDiv:pageView.div})}pageLabelToPageNumber(i){return!this._pageLabels||(i=this._pageLabels.indexOf(i))<0?null:i+1}scrollPageIntoView({pageNumber,destArray=null,allowNegativeOffset=!1,ignoreDestinationZoom:boundingRect=!1}){if(this.pdfDocument){const pageView=Number.isInteger(pageNumber)&&this._pages[pageNumber-1];if(pageView)if(!this.isInPresentationMode&&destArray){let x=0,y=0,width=0,height=0,widthScale,heightScale;var changeOrientation=pageView.rotation%180!=0,pageWidth=(changeOrientation?pageView.height:pageView.width)/pageView.scale/_ui_utils.CSS_UNITS,pageHeight=(changeOrientation?pageView.width:pageView.height)/pageView.scale/_ui_utils.CSS_UNITS;let scale=0;switch(destArray[1].name){case"XYZ":x=destArray[2],y=destArray[3],scale=destArray[4],x=null!==x?x:0,y=null!==y?y:pageHeight;break;case"Fit":case"FitB":scale="page-fit";break;case"FitH":case"FitBH":y=destArray[2],scale="page-width",null===y&&this._location?(x=this._location.left,y=this._location.top):"number"!=typeof y&&(y=pageHeight);break;case"FitV":case"FitBV":x=destArray[2],width=pageWidth,height=pageHeight,scale="page-height";break;case"FitR":x=destArray[2],y=destArray[3],width=destArray[4]-x,height=destArray[5]-y;var hPadding=this.removePageBorders?0:_ui_utils.SCROLLBAR_PADDING,vPadding=this.removePageBorders?0:_ui_utils.VERTICAL_PADDING;widthScale=(this.container.clientWidth-hPadding)/width/_ui_utils.CSS_UNITS,heightScale=(this.container.clientHeight-vPadding)/height/_ui_utils.CSS_UNITS,scale=Math.min(Math.abs(widthScale),Math.abs(heightScale));break;default:return void console.error(this._name+".scrollPageIntoView: "+`"${destArray[1].name}" is not a valid destination type.`)}if(boundingRect||(scale&&scale!==this._currentScale?this.currentScaleValue=scale:this._currentScale===_ui_utils.UNKNOWN_SCALE&&(this.currentScaleValue=_ui_utils.DEFAULT_SCALE_VALUE)),"page-fit"!==scale||destArray[4]){boundingRect=[pageView.viewport.convertToViewportPoint(x,y),pageView.viewport.convertToViewportPoint(x+width,y+height)];let left=Math.min(boundingRect[0][0],boundingRect[1][0]),top=Math.min(boundingRect[0][1],boundingRect[1][1]);allowNegativeOffset||(left=Math.max(left,0),top=Math.max(top,0)),this._scrollIntoView({pageDiv:pageView.div,pageSpot:{left:left,top:top},pageNumber:pageNumber})}else this._scrollIntoView({pageDiv:pageView.div,pageNumber:pageNumber})}else this._setCurrentPageNumber(pageNumber,!0);else console.error(this._name+".scrollPageIntoView: "+`"${pageNumber}" is not a valid pageNumber parameter.`)}}_updateLocation(intLeft){var pdfOpenParams=this._currentScale,intTop=this._currentScaleValue,normalizedScaleValue=parseFloat(intTop)===pdfOpenParams?Math.round(1e4*pdfOpenParams)/100:intTop,pageNumber=intLeft.id,pdfOpenParams="#page="+pageNumber;pdfOpenParams+="&zoom="+normalizedScaleValue;const currentPageView=this._pages[pageNumber-1];intTop=this.container,intTop=currentPageView.getPagePoint(intTop.scrollLeft-intLeft.x,intTop.scrollTop-intLeft.y),intLeft=Math.round(intTop[0]),intTop=Math.round(intTop[1]),this._location={pageNumber:pageNumber,scale:normalizedScaleValue,top:intTop,left:intLeft,rotation:this._pagesRotation,pdfOpenParams:pdfOpenParams+=","+intLeft+","+intTop}}_updateHelper(visiblePages){throw new Error("Not implemented: _updateHelper")}update(){var visible=this._getVisiblePages(),visiblePages=visible.views,newCacheSize=visiblePages.length;0!==newCacheSize&&(newCacheSize=Math.max(10,2*newCacheSize+1),this._buffer.resize(newCacheSize,visiblePages),this.renderingQueue.renderHighestPriority(visible),this._updateHelper(visiblePages),this._updateLocation(visible.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location}))}containsElement(element){return this.container.contains(element)}focus(){this.container.focus()}get _isScrollModeHorizontal(){return!this.isInPresentationMode&&this._scrollMode===_ui_utils.ScrollMode.HORIZONTAL}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===_ui_utils.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===_ui_utils.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getCurrentVisiblePage(){if(!this.pagesCount)return{views:[]};var view=this._pages[this._currentPageNumber-1],element=view.div;return{first:view={id:view.id,x:element.offsetLeft+element.clientLeft,y:element.offsetTop+element.clientTop,view:view},last:view,views:[view]}}_getVisiblePages(){return(0,_ui_utils.getVisibleElements)({scrollEl:this.container,views:this._pages,sortByVisibility:!0,horizontal:this._isScrollModeHorizontal,rtl:this._isScrollModeHorizontal&&this._isContainerRtl})}isPageVisible(pageNumber){return!!this.pdfDocument&&(Number.isInteger(pageNumber)&&0<pageNumber&&pageNumber<=this.pagesCount?this._getVisiblePages().views.some(function(view){return view.id===pageNumber}):(console.error(this._name+`.isPageVisible: "${pageNumber}" is not a valid page.`),!1))}isPageCached(pageView){return!(!this.pdfDocument||!this._buffer)&&(Number.isInteger(pageView)&&0<pageView&&pageView<=this.pagesCount?!!(pageView=this._pages[pageView-1])&&this._buffer.has(pageView):(console.error(this._name+`.isPageCached: "${pageView}" is not a valid page.`),!1))}cleanup(){for(let i=0,ii=this._pages.length;i<ii;i++)this._pages[i]&&this._pages[i].renderingState!==_pdf_rendering_queue.RenderingStates.FINISHED&&this._pages[i].reset()}_cancelRendering(){for(let i=0,ii=this._pages.length;i<ii;i++)this._pages[i]&&this._pages[i].cancelRendering()}_ensurePdfPageLoaded(pageView){if(pageView.pdfPage)return Promise.resolve(pageView.pdfPage);if(this._pagesRequests.has(pageView))return this._pagesRequests.get(pageView);var promise=this.pdfDocument.getPage(pageView.id).then(pdfPage=>(pageView.pdfPage||pageView.setPdfPage(pdfPage),this._pagesRequests.delete(pageView),pdfPage)).catch(reason=>{console.error("Unable to get page for page view",reason),this._pagesRequests.delete(pageView)});return this._pagesRequests.set(pageView,promise),promise}forceRendering(scrollAhead){var visiblePages=scrollAhead||this._getVisiblePages(),scrollAhead=this._isScrollModeHorizontal?this.scroll.right:this.scroll.down;const pageView=this.renderingQueue.getHighestPriority(visiblePages,this._pages,scrollAhead);return!!pageView&&(this._ensurePdfPageLoaded(pageView).then(()=>{this.renderingQueue.renderView(pageView)}),!0)}createTextLayerBuilder(textLayerDiv,pageIndex,viewport,enhanceTextSelection=!1,eventBus){return new _text_layer_builder.TextLayerBuilder({textLayerDiv:textLayerDiv,eventBus:eventBus,pageIndex:pageIndex,viewport:viewport,findController:this.isInPresentationMode?null:this.findController,enhanceTextSelection:!this.isInPresentationMode&&enhanceTextSelection})}createAnnotationLayerBuilder(pageDiv,pdfPage,annotationStorage=null,imageResourcesPath="",renderInteractiveForms=!1,l10n=_ui_utils.NullL10n,enableScripting=!1,hasJSActionsPromise=null,mouseState=null){return new _annotation_layer_builder.AnnotationLayerBuilder({pageDiv:pageDiv,pdfPage:pdfPage,annotationStorage:annotationStorage||this.pdfDocument?.annotationStorage,imageResourcesPath:imageResourcesPath,renderInteractiveForms:renderInteractiveForms,linkService:this.linkService,downloadManager:this.downloadManager,l10n:l10n,enableScripting:enableScripting,hasJSActionsPromise:hasJSActionsPromise||this.pdfDocument?.hasJSActions(),mouseState:mouseState||this._mouseState})}get hasEqualPageSizes(){var firstPageView=this._pages[0];for(let i=1,ii=this._pages.length;i<ii;++i){var pageView=this._pages[i];if(pageView.width!==firstPageView.width||pageView.height!==firstPageView.height)return!1}return!0}getPagesOverview(){const pagesOverview=this._pages.map(function(viewport){return{width:(viewport=viewport.pdfPage.getViewport({scale:1})).width,height:viewport.height,rotation:viewport.rotation}});return this.enablePrintAutoRotate?pagesOverview.map(function(size){return(0,_ui_utils.isPortraitOrientation)(size)?size:{width:size.height,height:size.width,rotation:(size.rotation+90)%360}}):pagesOverview}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise||this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)}set optionalContentConfigPromise(promise){if(!(promise instanceof Promise))throw new Error("Invalid optionalContentConfigPromise: "+promise);if(this.pdfDocument&&this._optionalContentConfigPromise){this._optionalContentConfigPromise=promise;for(const pageView of this._pages)pageView.update(pageView.scale,pageView.rotation,promise);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:promise})}}get scrollMode(){return this._scrollMode}set scrollMode(mode){if(this._scrollMode!==mode){if(!(0,_ui_utils.isValidScrollMode)(mode))throw new Error("Invalid scroll mode: "+mode);this._scrollMode=mode,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:mode}),this._updateScrollMode(this._currentPageNumber)}}_updateScrollMode(pageNumber=null){const scrollMode=this._scrollMode,viewer=this.viewer;viewer.classList.toggle("scrollHorizontal",scrollMode===_ui_utils.ScrollMode.HORIZONTAL),viewer.classList.toggle("scrollWrapped",scrollMode===_ui_utils.ScrollMode.WRAPPED),this.pdfDocument&&pageNumber&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(pageNumber,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(mode){if(this._spreadMode!==mode){if(!(0,_ui_utils.isValidSpreadMode)(mode))throw new Error("Invalid spread mode: "+mode);this._spreadMode=mode,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:mode}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(pageNumber=null){if(this.pdfDocument){const viewer=this.viewer,pages=this._pages;if(viewer.textContent="",this._spreadMode===_ui_utils.SpreadMode.NONE)for(let i=0,iMax=pages.length;i<iMax;++i)viewer.appendChild(pages[i].div);else{var parity=this._spreadMode-1;let spread=null;for(let i=0,iMax=pages.length;i<iMax;++i)null===spread?(spread=document.createElement("div"),spread.className="spread",viewer.appendChild(spread)):i%2==parity&&(spread=spread.cloneNode(!1),viewer.appendChild(spread)),spread.appendChild(pages[i].div)}pageNumber&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(pageNumber,!0),this.update())}}_getPageAdvance(currentPageNumber,previous=!1){if(this.isInPresentationMode)return 1;switch(this._scrollMode){case _ui_utils.ScrollMode.WRAPPED:{const views=this._getVisiblePages().views,pageLayout=new Map;for(var{id,y,percent,widthPercent}of views)if(!(0===percent||widthPercent<100)){let yArray=pageLayout.get(y);yArray||pageLayout.set(y,yArray=yArray||[]),yArray.push(id)}for(const yArray of pageLayout.values()){var firstId=yArray.indexOf(currentPageNumber);if(-1!==firstId){var lastId=yArray.length;if(1===lastId)break;if(previous)for(let i=firstId-1;0<=i;i--){var currentId=yArray[i],expectedId=yArray[i+1]-1;if(currentId<expectedId)return currentPageNumber-expectedId}else for(let i=firstId+1,ii=lastId;i<ii;i++){const currentId=yArray[i],expectedId=yArray[i-1]+1;if(currentId>expectedId)return expectedId-currentPageNumber}if(previous){if((firstId=yArray[0])<currentPageNumber)return currentPageNumber-firstId+1}else if(lastId=yArray[lastId-1],currentPageNumber<lastId)return lastId-currentPageNumber+1;break}}break}case _ui_utils.ScrollMode.HORIZONTAL:break;case _ui_utils.ScrollMode.VERTICAL:{if(this._spreadMode===_ui_utils.SpreadMode.NONE)break;var parity=this._spreadMode-1;if(previous&&currentPageNumber%2!=parity)break;if(!previous&&currentPageNumber%2==parity)break;const views=this._getVisiblePages().views,expectedId=previous?currentPageNumber-1:currentPageNumber+1;for(const{id,percent,widthPercent}of views)if(id===expectedId){if(0<percent&&100===widthPercent)return 2;break}break}}return 1}nextPage(){var currentPageNumber=this._currentPageNumber,pagesCount=this.pagesCount;if(pagesCount<=currentPageNumber)return!1;var advance=this._getPageAdvance(currentPageNumber,!1)||1;return this.currentPageNumber=Math.min(currentPageNumber+advance,pagesCount),!0}previousPage(){var currentPageNumber=this._currentPageNumber;if(currentPageNumber<=1)return!1;var advance=this._getPageAdvance(currentPageNumber,!0)||1;return this.currentPageNumber=Math.max(currentPageNumber-advance,1),!0}initializeScriptingEvents(){if(this.enableScripting&&!this._pageOpenPendingSet){const eventBus=this.eventBus,pageOpenPendingSet=this._pageOpenPendingSet=new Set,scriptingEvents=this._scriptingEvents||(this._scriptingEvents=Object.create(null)),dispatchPageClose=pageNumber=>{pageOpenPendingSet.has(pageNumber)||eventBus.dispatch("pageclose",{source:this,pageNumber:pageNumber})},dispatchPageOpen=pageNumber=>{const pageView=this._pages[pageNumber-1];pageView?.renderingState===_pdf_rendering_queue.RenderingStates.FINISHED?(pageOpenPendingSet.delete(pageNumber),eventBus.dispatch("pageopen",{source:this,pageNumber:pageNumber,actionsPromise:pageView.pdfPage?.getJSActions()})):pageOpenPendingSet.add(pageNumber)};scriptingEvents.onPageChanging=({pageNumber,previous})=>{pageNumber!==previous&&(dispatchPageClose(previous),dispatchPageOpen(pageNumber))},eventBus._on("pagechanging",scriptingEvents.onPageChanging),scriptingEvents.onPageRendered=({pageNumber})=>{pageOpenPendingSet.has(pageNumber)&&pageNumber===this._currentPageNumber&&dispatchPageOpen(pageNumber)},eventBus._on("pagerendered",scriptingEvents.onPageRendered),scriptingEvents.onPagesDestroy=()=>{dispatchPageClose(this._currentPageNumber)},eventBus._on("pagesdestroy",scriptingEvents.onPagesDestroy),dispatchPageOpen(this._currentPageNumber)}}_resetScriptingEvents(){if(this.enableScripting&&this._pageOpenPendingSet){const eventBus=this.eventBus,scriptingEvents=this._scriptingEvents;eventBus._off("pagechanging",scriptingEvents.onPageChanging),scriptingEvents.onPageChanging=null,eventBus._off("pagerendered",scriptingEvents.onPageRendered),scriptingEvents.onPageRendered=null,eventBus._off("pagesdestroy",scriptingEvents.onPagesDestroy),scriptingEvents.onPagesDestroy=null,this._pageOpenPendingSet=null}}}},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultAnnotationLayerFactory=exports.AnnotationLayerBuilder=void 0;var _pdfjsLib=__webpack_require__(5),_ui_utils=__webpack_require__(4),_pdf_link_service=__webpack_require__(19);class AnnotationLayerBuilder{constructor({pageDiv,pdfPage,linkService,downloadManager,annotationStorage=null,imageResourcesPath="",renderInteractiveForms=!0,l10n=_ui_utils.NullL10n,enableScripting=!1,hasJSActionsPromise=null,mouseState=null}){this.pageDiv=pageDiv,this.pdfPage=pdfPage,this.linkService=linkService,this.downloadManager=downloadManager,this.imageResourcesPath=imageResourcesPath,this.renderInteractiveForms=renderInteractiveForms,this.l10n=l10n,this.annotationStorage=annotationStorage,this.enableScripting=enableScripting,this._hasJSActionsPromise=hasJSActionsPromise,this._mouseState=mouseState,this.div=null,this._cancelled=!1}render(viewport,intent="display"){return Promise.all([this.pdfPage.getAnnotations({intent:intent}),this._hasJSActionsPromise]).then(([annotations,hasJSActions=!1])=>{if(!this._cancelled&&0!==annotations.length){const parameters={viewport:viewport.clone({dontFlip:!0}),div:this.div,annotations:annotations,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderInteractiveForms:this.renderInteractiveForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:hasJSActions,mouseState:this._mouseState};this.div?_pdfjsLib.AnnotationLayer.update(parameters):(this.div=document.createElement("div"),this.div.className="annotationLayer",this.pageDiv.appendChild(this.div),parameters.div=this.div,_pdfjsLib.AnnotationLayer.render(parameters),this.l10n.translate(this.div))}})}cancel(){this._cancelled=!0}hide(){this.div&&this.div.setAttribute("hidden","true")}}exports.AnnotationLayerBuilder=AnnotationLayerBuilder;exports.DefaultAnnotationLayerFactory=class{createAnnotationLayerBuilder(pageDiv,pdfPage,annotationStorage=null,imageResourcesPath="",renderInteractiveForms=!0,l10n=_ui_utils.NullL10n,enableScripting=!1,hasJSActionsPromise=null,mouseState=null){return new AnnotationLayerBuilder({pageDiv:pageDiv,pdfPage:pdfPage,imageResourcesPath:imageResourcesPath,renderInteractiveForms:renderInteractiveForms,linkService:new _pdf_link_service.SimpleLinkService,l10n:l10n,annotationStorage:annotationStorage,enableScripting:enableScripting,hasJSActionsPromise:hasJSActionsPromise,mouseState:mouseState})}}},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFPageView=void 0;var _ui_utils=__webpack_require__(4),_pdfjsLib=__webpack_require__(5),_pdf_rendering_queue=__webpack_require__(8);const MAX_CANVAS_PIXELS=__webpack_require__(2).viewerCompatibilityParams.maxCanvasPixels||16777216;exports.PDFPageView=class{constructor(options){const container=options.container;var defaultViewport=options.defaultViewport;this.id=options.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=options.scale||_ui_utils.DEFAULT_SCALE,this.viewport=defaultViewport,this.pdfPageRotate=defaultViewport.rotation,this._optionalContentConfigPromise=options.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=Number.isInteger(options.textLayerMode)?options.textLayerMode:_ui_utils.TextLayerMode.ENABLE,this.imageResourcesPath=options.imageResourcesPath||"",this.renderInteractiveForms="boolean"!=typeof options.renderInteractiveForms||options.renderInteractiveForms,this.useOnlyCssZoom=options.useOnlyCssZoom||!1,this.maxCanvasPixels=options.maxCanvasPixels||MAX_CANVAS_PIXELS,this.eventBus=options.eventBus,this.renderingQueue=options.renderingQueue,this.textLayerFactory=options.textLayerFactory,this.annotationLayerFactory=options.annotationLayerFactory,this.renderer=options.renderer||_ui_utils.RendererType.CANVAS,this.enableWebGL=options.enableWebGL||!1,this.l10n=options.l10n||_ui_utils.NullL10n,this.enableScripting=options.enableScripting||!1,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=_pdf_rendering_queue.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null;const div=document.createElement("div");div.className="page",div.style.width=Math.floor(this.viewport.width)+"px",div.style.height=Math.floor(this.viewport.height)+"px",div.setAttribute("data-page-number",this.id),this.div=div,container.appendChild(div)}setPdfPage(pdfPage){this.pdfPage=pdfPage,this.pdfPageRotate=pdfPage.rotate;var totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=pdfPage.getViewport({scale:this.scale*_ui_utils.CSS_UNITS,rotation:totalRotation}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}async _renderAnnotationLayer(){let error=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(ex){error=ex}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:error})}}_resetZoomLayer(removeFromDOM=!1){if(this.zoomLayer){const zoomLayerCanvas=this.zoomLayer.firstChild;this.paintedViewportMap.delete(zoomLayerCanvas),zoomLayerCanvas.width=0,zoomLayerCanvas.height=0,removeFromDOM&&this.zoomLayer.remove(),this.zoomLayer=null}}reset(keepZoomLayer=!1,keepAnnotations=!1){this.cancelRendering(keepAnnotations),this.renderingState=_pdf_rendering_queue.RenderingStates.INITIAL;const div=this.div;div.style.width=Math.floor(this.viewport.width)+"px",div.style.height=Math.floor(this.viewport.height)+"px";var childNodes=div.childNodes,currentZoomLayerNode=keepZoomLayer&&this.zoomLayer||null,currentAnnotationNode=keepAnnotations&&this.annotationLayer&&this.annotationLayer.div||null;for(let i=childNodes.length-1;0<=i;i--){var node=childNodes[i];currentZoomLayerNode!==node&&currentAnnotationNode!==node&&div.removeChild(node)}div.removeAttribute("data-loaded"),currentAnnotationNode?this.annotationLayer.hide():this.annotationLayer&&(this.annotationLayer.cancel(),this.annotationLayer=null),currentZoomLayerNode||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon",div.appendChild(this.loadingIconDiv)}update(scale,rotation,outputScale=null){this.scale=scale||this.scale,void 0!==rotation&&(this.rotation=rotation),outputScale instanceof Promise&&(this._optionalContentConfigPromise=outputScale);var outputScale=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*_ui_utils.CSS_UNITS,rotation:outputScale}),this.svg)return this.cssTransform(this.svg,!0),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let isScalingRestricted=!1;if(this.canvas&&0<this.maxCanvasPixels&&(outputScale=this.outputScale,(Math.floor(this.viewport.width)*outputScale.sx|0)*(Math.floor(this.viewport.height)*outputScale.sy|0)>this.maxCanvasPixels&&(isScalingRestricted=!0)),this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&isScalingRestricted)return this.cssTransform(this.canvas,!0),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});this.zoomLayer||this.canvas.hasAttribute("hidden")||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform(this.zoomLayer.firstChild),this.reset(!0,!0)}cancelRendering(keepAnnotations=!1){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),!keepAnnotations&&this.annotationLayer&&(this.annotationLayer.cancel(),this.annotationLayer=null)}cssTransform(textLayerViewport,redrawAnnotations=!1){var width=this.viewport.width,height=this.viewport.height;const div=this.div;textLayerViewport.style.width=textLayerViewport.parentNode.style.width=div.style.width=Math.floor(width)+"px",textLayerViewport.style.height=textLayerViewport.parentNode.style.height=div.style.height=Math.floor(height)+"px";var textAbsRotation=this.viewport.rotation-this.paintedViewportMap.get(textLayerViewport).rotation,absRotation=Math.abs(textAbsRotation);let scaleX=1,scaleY=1;if(90!==absRotation&&270!==absRotation||(scaleX=height/width,scaleY=width/height),textLayerViewport.style.transform=`rotate(${textAbsRotation}deg) scale(${scaleX}, ${scaleY})`,this.textLayer){textLayerViewport=this.textLayer.viewport,textAbsRotation=this.viewport.rotation-textLayerViewport.rotation,textAbsRotation=Math.abs(textAbsRotation);let scale=width/textLayerViewport.width;90!==textAbsRotation&&270!==textAbsRotation||(scale=width/textLayerViewport.height);const textLayerDiv=this.textLayer.textLayerDiv;let transX,transY;switch(textAbsRotation){case 0:transX=transY=0;break;case 90:transX=0,transY="-"+textLayerDiv.style.height;break;case 180:transX="-"+textLayerDiv.style.width,transY="-"+textLayerDiv.style.height;break;case 270:transX="-"+textLayerDiv.style.width,transY=0;break;default:console.error("Bad rotation value.")}textLayerDiv.style.transform=`rotate(${textAbsRotation}deg) `+`scale(${scale}) `+`translate(${transX}, ${transY})`,textLayerDiv.style.transformOrigin="0% 0%"}redrawAnnotations&&this.annotationLayer&&this._renderAnnotationLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(x,y){return this.viewport.convertToPdfPoint(x,y)}draw(){this.renderingState!==_pdf_rendering_queue.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div,pdfPage}=this;if(!pdfPage)return this.renderingState=_pdf_rendering_queue.RenderingStates.FINISHED,this.loadingIconDiv&&(div.removeChild(this.loadingIconDiv),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=_pdf_rendering_queue.RenderingStates.RUNNING;const canvasWrapper=document.createElement("div");canvasWrapper.style.width=div.style.width,canvasWrapper.style.height=div.style.height,canvasWrapper.classList.add("canvasWrapper"),this.annotationLayer&&this.annotationLayer.div?div.insertBefore(canvasWrapper,this.annotationLayer.div):div.appendChild(canvasWrapper);let textLayer=null;if(this.textLayerMode!==_ui_utils.TextLayerMode.DISABLE&&this.textLayerFactory){const textLayerDiv=document.createElement("div");textLayerDiv.className="textLayer",textLayerDiv.style.width=canvasWrapper.style.width,textLayerDiv.style.height=canvasWrapper.style.height,this.annotationLayer&&this.annotationLayer.div?div.insertBefore(textLayerDiv,this.annotationLayer.div):div.appendChild(textLayerDiv),textLayer=this.textLayerFactory.createTextLayerBuilder(textLayerDiv,this.id-1,this.viewport,this.textLayerMode===_ui_utils.TextLayerMode.ENABLE_ENHANCE,this.eventBus)}this.textLayer=textLayer;let renderContinueCallback=null;this.renderingQueue&&(renderContinueCallback=cont=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=_pdf_rendering_queue.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=_pdf_rendering_queue.RenderingStates.RUNNING,cont()});cont()});const finishPaintTask=async(error=null)=>{if(paintTask===this.paintTask&&(this.paintTask=null),error instanceof _pdfjsLib.RenderingCancelledException)this._renderError=null;else if(this._renderError=error,this.renderingState=_pdf_rendering_queue.RenderingStates.FINISHED,this.loadingIconDiv&&(div.removeChild(this.loadingIconDiv),delete this.loadingIconDiv),this._resetZoomLayer(!0),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:this._renderError}),error)throw error},paintTask=this.renderer===_ui_utils.RendererType.SVG?this.paintOnSvg(canvasWrapper):this.paintOnCanvas(canvasWrapper);paintTask.onRenderContinue=renderContinueCallback,this.paintTask=paintTask;var resultPromise=paintTask.promise.then(function(){return finishPaintTask(null).then(function(){var readableStream;textLayer&&(readableStream=pdfPage.streamTextContent({normalizeWhitespace:!0}),textLayer.setTextContentStream(readableStream),textLayer.render())})},function(reason){return finishPaintTask(reason)});return this.annotationLayerFactory&&(this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(div,pdfPage,null,this.imageResourcesPath,this.renderInteractiveForms,this.l10n,this.enableScripting,null,null)),this._renderAnnotationLayer()),div.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),resultPromise}paintOnCanvas(actualSizeViewport){const renderCapability=(0,_pdfjsLib.createPromiseCapability)(),result={promise:renderCapability.promise,onRenderContinue(cont){cont()},cancel(){renderTask.cancel()}},viewport=this.viewport,canvas=document.createElement("canvas");this.l10n.get("page_canvas",{page:this.id},"Page {{page}}").then(msg=>{canvas.setAttribute("aria-label",msg)}),canvas.setAttribute("hidden","hidden");let isCanvasHidden=!0;function showCanvas(){isCanvasHidden&&(canvas.removeAttribute("hidden"),isCanvasHidden=!1)}actualSizeViewport.appendChild(canvas),this.canvas=canvas,canvas.mozOpaque=!0;var renderContext=canvas.getContext("2d",{alpha:!1});const outputScale=(0,_ui_utils.getOutputScale)(renderContext);this.outputScale=outputScale,this.useOnlyCssZoom&&(actualSizeViewport=viewport.clone({scale:_ui_utils.CSS_UNITS}),outputScale.sx*=actualSizeViewport.width/viewport.width,outputScale.sy*=actualSizeViewport.height/viewport.height,outputScale.scaled=!0),0<this.maxCanvasPixels&&(sfx=viewport.width*viewport.height,sfy=Math.sqrt(this.maxCanvasPixels/sfx),outputScale.sx>sfy||outputScale.sy>sfy?(outputScale.sx=sfy,outputScale.sy=sfy,outputScale.scaled=!0,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1);var sfx=(0,_ui_utils.approximateFraction)(outputScale.sx),sfy=(0,_ui_utils.approximateFraction)(outputScale.sy);canvas.width=(0,_ui_utils.roundToDivide)(viewport.width*outputScale.sx,sfx[0]),canvas.height=(0,_ui_utils.roundToDivide)(viewport.height*outputScale.sy,sfy[0]),canvas.style.width=(0,_ui_utils.roundToDivide)(viewport.width,sfx[1])+"px",canvas.style.height=(0,_ui_utils.roundToDivide)(viewport.height,sfy[1])+"px",this.paintedViewportMap.set(canvas,viewport);renderContext={canvasContext:renderContext,transform:outputScale.scaled?[outputScale.sx,0,0,outputScale.sy,0,0]:null,viewport:this.viewport,enableWebGL:this.enableWebGL,renderInteractiveForms:this.renderInteractiveForms,optionalContentConfigPromise:this._optionalContentConfigPromise};const renderTask=this.pdfPage.render(renderContext);return renderTask.onContinue=function(cont){showCanvas(),result.onRenderContinue?result.onRenderContinue(cont):cont()},renderTask.promise.then(function(){showCanvas(),renderCapability.resolve(void 0)},function(error){showCanvas(),renderCapability.reject(error)}),result}paintOnSvg(wrapper){let cancelled=!1;const ensureNotCancelled=()=>{if(cancelled)throw new _pdfjsLib.RenderingCancelledException("Rendering cancelled, page "+this.id,"svg")},pdfPage=this.pdfPage,actualSizeViewport=this.viewport.clone({scale:_ui_utils.CSS_UNITS});return{promise:pdfPage.getOperatorList().then(opList=>{ensureNotCancelled();const svgGfx=new _pdfjsLib.SVGGraphics(pdfPage.commonObjs,pdfPage.objs);return svgGfx.getSVG(opList,actualSizeViewport).then(svg=>{ensureNotCancelled(),this.svg=svg,this.paintedViewportMap.set(svg,actualSizeViewport),svg.style.width=wrapper.style.width,svg.style.height=wrapper.style.height,this.renderingState=_pdf_rendering_queue.RenderingStates.FINISHED,wrapper.appendChild(svg)})}),onRenderContinue(cont){cont()},cancel(){cancelled=!0}}}setPageLabel(label){this.pageLabel="string"==typeof label?label:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextLayerBuilder=exports.DefaultTextLayerFactory=void 0;var _pdfjsLib=__webpack_require__(5);class TextLayerBuilder{constructor({textLayerDiv,eventBus,pageIndex,viewport,findController=null,enhanceTextSelection=!1}){this.textLayerDiv=textLayerDiv,this.eventBus=eventBus,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageIdx=pageIndex,this.pageNumber=this.pageIdx+1,this.matches=[],this.viewport=viewport,this.textDivs=[],this.findController=findController,this.textLayerRenderTask=null,this.enhanceTextSelection=enhanceTextSelection,this._onUpdateTextLayerMatches=null,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const endOfContent=document.createElement("div");endOfContent.className="endOfContent",this.textLayerDiv.appendChild(endOfContent)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(timeout=0){if((this.textContent||this.textContentStream)&&!this.renderingDone){this.cancel(),this.textDivs=[];const textLayerFrag=document.createDocumentFragment();this.textLayerRenderTask=(0,_pdfjsLib.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:textLayerFrag,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:timeout,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{this.textLayerDiv.appendChild(textLayerFrag),this._finishRendering(),this._updateMatches()},function(reason){}),this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=evt=>{evt.pageIndex!==this.pageIdx&&-1!==evt.pageIndex||this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches))}}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null)}setTextContentStream(readableStream){this.cancel(),this.textContentStream=readableStream}setTextContent(textContent){this.cancel(),this.textContent=textContent}_convertMatches(matches,matchesLength){if(!matches)return[];var textContentItemsStr=this["textContentItemsStr"];let i=0,iIndex=0;var end=textContentItemsStr.length-1;const result=[];for(let m=0,mm=matches.length;m<mm;m++){let matchIdx=matches[m];for(;i!==end&&matchIdx>=iIndex+textContentItemsStr[i].length;)iIndex+=textContentItemsStr[i].length,i++;i===textContentItemsStr.length&&console.error("Could not find a matching mapping");const match={begin:{divIdx:i,offset:matchIdx-iIndex}};for(matchIdx+=matchesLength[m];i!==end&&matchIdx>iIndex+textContentItemsStr[i].length;)iIndex+=textContentItemsStr[i].length,i++;match.end={divIdx:i,offset:matchIdx-iIndex},result.push(match)}return result}_renderMatches(matches){if(0!==matches.length){const{findController,pageIdx,textContentItemsStr,textDivs}=this;var isSelectedPage=pageIdx===findController.selected.pageIdx,selectedMatchIdx=findController.selected.matchIdx,highlightAll=findController.state.highlightAll;let prevEnd=null;var infinity={divIdx:-1,offset:void 0};let i0=selectedMatchIdx,i1=i0+1;if(highlightAll)i0=0,i1=matches.length;else if(!isSelectedPage)return;for(let i=i0;i<i1;i++){var isSelected=matches[i],begin=isSelected.begin,end=isSelected.end,isSelected=isSelectedPage&&i===selectedMatchIdx,highlightSuffix=isSelected?" selected":"";if(isSelected&&findController.scrollMatchIntoView({element:textDivs[begin.divIdx],pageIndex:pageIdx,matchIndex:selectedMatchIdx}),prevEnd&&begin.divIdx===prevEnd.divIdx?appendTextToDiv(prevEnd.divIdx,prevEnd.offset,begin.offset):(null!==prevEnd&&appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset),beginText(begin)),begin.divIdx===end.divIdx)appendTextToDiv(begin.divIdx,begin.offset,end.offset,"highlight"+highlightSuffix);else{appendTextToDiv(begin.divIdx,begin.offset,infinity.offset,"highlight begin"+highlightSuffix);for(let n0=begin.divIdx+1,n1=end.divIdx;n0<n1;n0++)textDivs[n0].className="highlight middle"+highlightSuffix;beginText(end,"highlight end"+highlightSuffix)}prevEnd=end}function beginText(begin,className){var divIdx=begin.divIdx;textDivs[divIdx].textContent="",appendTextToDiv(divIdx,0,begin.offset,className)}function appendTextToDiv(divIdx,fromOffset,node,className){const div=textDivs[divIdx];node=textContentItemsStr[divIdx].substring(fromOffset,node),node=document.createTextNode(node);if(className){const span=document.createElement("span");return span.className=className,span.appendChild(node),void div.appendChild(span)}div.appendChild(node)}prevEnd&&appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset)}}_updateMatches(){if(this.renderingDone){var pageMatches,{findController,matches,pageIdx:pageMatchesLength,textContentItemsStr,textDivs}=this;let clearedUntilDivIdx=-1;for(let i=0,ii=matches.length;i<ii;i++){var match=matches[i];for(let n=Math.max(clearedUntilDivIdx,match.begin.divIdx),end=match.end.divIdx;n<=end;n++){const div=textDivs[n];div.textContent=textContentItemsStr[n],div.className=""}clearedUntilDivIdx=match.end.divIdx+1}findController&&findController.highlightMatches&&(pageMatches=findController.pageMatches[pageMatchesLength]||null,pageMatchesLength=findController.pageMatchesLength[pageMatchesLength]||null,this.matches=this._convertMatches(pageMatches,pageMatchesLength),this._renderMatches(this.matches))}}_bindMouse(){const div=this.textLayerDiv;let expandDivsTimer=null;div.addEventListener("mousedown",evt=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(expandDivsTimer&&(clearTimeout(expandDivsTimer),expandDivsTimer=null));const end=div.querySelector(".endOfContent");var r;end&&(evt.target!==div&&"none"!==window.getComputedStyle(end).getPropertyValue("-moz-user-select")&&(r=div.getBoundingClientRect(),r=Math.max(0,(evt.pageY-r.top)/r.height),end.style.top=(100*r).toFixed(2)+"%"),end.classList.add("active"))}),div.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)expandDivsTimer=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),expandDivsTimer=null},300);else{const end=div.querySelector(".endOfContent");end&&(end.style.top="",end.classList.remove("active"))}})}}exports.TextLayerBuilder=TextLayerBuilder;exports.DefaultTextLayerFactory=class{createTextLayerBuilder(textLayerDiv,pageIndex,viewport,enhanceTextSelection=!1,eventBus){return new TextLayerBuilder({textLayerDiv:textLayerDiv,pageIndex:pageIndex,viewport:viewport,enhanceTextSelection:enhanceTextSelection,eventBus:eventBus})}}},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.SecondaryToolbar=void 0;var _ui_utils=__webpack_require__(4),_pdf_cursor_tools=__webpack_require__(6),_pdf_single_page_viewer=__webpack_require__(32);exports.SecondaryToolbar=class{constructor(options,mainContainer,eventBus){this.toolbar=options.toolbar,this.toggleButton=options.toggleButton,this.toolbarButtonContainer=options.toolbarButtonContainer,this.buttons=[{element:options.presentationModeButton,eventName:"presentationmode",close:!0},{element:options.openFileButton,eventName:"openfile",close:!0},{element:options.printButton,eventName:"print",close:!0},{element:options.downloadButton,eventName:"download",close:!0},{element:options.viewBookmarkButton,eventName:null,close:!0},{element:options.firstPageButton,eventName:"firstpage",close:!0},{element:options.lastPageButton,eventName:"lastpage",close:!0},{element:options.pageRotateCwButton,eventName:"rotatecw",close:!1},{element:options.pageRotateCcwButton,eventName:"rotateccw",close:!1},{element:options.cursorSelectToolButton,eventName:"switchcursortool",eventDetails:{tool:_pdf_cursor_tools.CursorTool.SELECT},close:!0},{element:options.cursorHandToolButton,eventName:"switchcursortool",eventDetails:{tool:_pdf_cursor_tools.CursorTool.HAND},close:!0},{element:options.scrollVerticalButton,eventName:"switchscrollmode",eventDetails:{mode:_ui_utils.ScrollMode.VERTICAL},close:!0},{element:options.scrollHorizontalButton,eventName:"switchscrollmode",eventDetails:{mode:_ui_utils.ScrollMode.HORIZONTAL},close:!0},{element:options.scrollWrappedButton,eventName:"switchscrollmode",eventDetails:{mode:_ui_utils.ScrollMode.WRAPPED},close:!0},{element:options.spreadNoneButton,eventName:"switchspreadmode",eventDetails:{mode:_ui_utils.SpreadMode.NONE},close:!0},{element:options.spreadOddButton,eventName:"switchspreadmode",eventDetails:{mode:_ui_utils.SpreadMode.ODD},close:!0},{element:options.spreadEvenButton,eventName:"switchspreadmode",eventDetails:{mode:_ui_utils.SpreadMode.EVEN},close:!0},{element:options.documentPropertiesButton,eventName:"documentproperties",close:!0}],this.items={firstPage:options.firstPageButton,lastPage:options.lastPageButton,pageRotateCw:options.pageRotateCwButton,pageRotateCcw:options.pageRotateCcwButton},this.mainContainer=mainContainer,this.eventBus=eventBus,this.opened=!1,this.containerHeight=null,this.previousContainerHeight=null,this.reset(),this._bindClickListeners(),this._bindCursorToolsListener(options),this._bindScrollModeListener(options),this._bindSpreadModeListener(options),this.eventBus._on("resize",this._setMaxHeight.bind(this)),this.eventBus._on("baseviewerinit",evt=>{evt.source instanceof _pdf_single_page_viewer.PDFSinglePageViewer?this.toolbarButtonContainer.classList.add("hiddenScrollModeButtons","hiddenSpreadModeButtons"):this.toolbarButtonContainer.classList.remove("hiddenScrollModeButtons","hiddenSpreadModeButtons")})}get isOpen(){return this.opened}setPageNumber(pageNumber){this.pageNumber=pageNumber,this._updateUIState()}setPagesCount(pagesCount){this.pagesCount=pagesCount,this._updateUIState()}reset(){this.pageNumber=0,this.pagesCount=0,this._updateUIState(),this.eventBus.dispatch("secondarytoolbarreset",{source:this})}_updateUIState(){this.items.firstPage.disabled=this.pageNumber<=1,this.items.lastPage.disabled=this.pageNumber>=this.pagesCount,this.items.pageRotateCw.disabled=0===this.pagesCount,this.items.pageRotateCcw.disabled=0===this.pagesCount}_bindClickListeners(){this.toggleButton.addEventListener("click",this.toggle.bind(this));for(const{element,eventName,close,eventDetails}of this.buttons)element.addEventListener("click",evt=>{if(null!==eventName){const details={source:this};for(const property in eventDetails)details[property]=eventDetails[property];this.eventBus.dispatch(eventName,details)}close&&this.close()})}_bindCursorToolsListener(buttons){this.eventBus._on("cursortoolchanged",function({tool}){buttons.cursorSelectToolButton.classList.toggle("toggled",tool===_pdf_cursor_tools.CursorTool.SELECT),buttons.cursorHandToolButton.classList.toggle("toggled",tool===_pdf_cursor_tools.CursorTool.HAND)})}_bindScrollModeListener(buttons){function scrollModeChanged({mode:isScrollModeHorizontal}){buttons.scrollVerticalButton.classList.toggle("toggled",isScrollModeHorizontal===_ui_utils.ScrollMode.VERTICAL),buttons.scrollHorizontalButton.classList.toggle("toggled",isScrollModeHorizontal===_ui_utils.ScrollMode.HORIZONTAL),buttons.scrollWrappedButton.classList.toggle("toggled",isScrollModeHorizontal===_ui_utils.ScrollMode.WRAPPED);isScrollModeHorizontal=isScrollModeHorizontal===_ui_utils.ScrollMode.HORIZONTAL;buttons.spreadNoneButton.disabled=isScrollModeHorizontal,buttons.spreadOddButton.disabled=isScrollModeHorizontal,buttons.spreadEvenButton.disabled=isScrollModeHorizontal}this.eventBus._on("scrollmodechanged",scrollModeChanged),this.eventBus._on("secondarytoolbarreset",evt=>{evt.source===this&&scrollModeChanged({mode:_ui_utils.ScrollMode.VERTICAL})})}_bindSpreadModeListener(buttons){function spreadModeChanged({mode}){buttons.spreadNoneButton.classList.toggle("toggled",mode===_ui_utils.SpreadMode.NONE),buttons.spreadOddButton.classList.toggle("toggled",mode===_ui_utils.SpreadMode.ODD),buttons.spreadEvenButton.classList.toggle("toggled",mode===_ui_utils.SpreadMode.EVEN)}this.eventBus._on("spreadmodechanged",spreadModeChanged),this.eventBus._on("secondarytoolbarreset",evt=>{evt.source===this&&spreadModeChanged({mode:_ui_utils.SpreadMode.NONE})})}open(){this.opened||(this.opened=!0,this._setMaxHeight(),this.toggleButton.classList.add("toggled"),this.toolbar.classList.remove("hidden"))}close(){this.opened&&(this.opened=!1,this.toolbar.classList.add("hidden"),this.toggleButton.classList.remove("toggled"))}toggle(){this.opened?this.close():this.open()}_setMaxHeight(){this.opened&&(this.containerHeight=this.mainContainer.clientHeight,this.containerHeight!==this.previousContainerHeight&&(this.toolbarButtonContainer.style.maxHeight=this.containerHeight-_ui_utils.SCROLLBAR_PADDING+"px",this.previousContainerHeight=this.containerHeight))}}},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFSinglePageViewer=void 0;var _base_viewer=__webpack_require__(27),_pdfjsLib=__webpack_require__(5);class PDFSinglePageViewer extends _base_viewer.BaseViewer{constructor(options){super(options),this.eventBus._on("pagesinit",evt=>{this._ensurePageViewVisible()})}get _viewerElement(){return(0,_pdfjsLib.shadow)(this,"_viewerElement",this._shadowViewer)}get _pageWidthScaleFactor(){return 1}_resetView(){super._resetView(),this._previousPageNumber=1,this._shadowViewer=document.createDocumentFragment(),this._updateScrollDown=null}_ensurePageViewVisible(){var pageView=this._pages[this._currentPageNumber-1],previousPageView=this._pages[this._previousPageNumber-1],viewerNodes=this.viewer.childNodes;switch(viewerNodes.length){case 0:this.viewer.appendChild(pageView.div);break;case 1:if(viewerNodes[0]!==previousPageView.div)throw new Error("_ensurePageViewVisible: Unexpected previously visible page.");if(pageView===previousPageView)break;this._shadowViewer.appendChild(previousPageView.div),this.viewer.appendChild(pageView.div),this.container.scrollTop=0;break;default:throw new Error("_ensurePageViewVisible: Only one page should be visible at a time.")}this._previousPageNumber=this._currentPageNumber}_scrollUpdate(){this._updateScrollDown&&this._updateScrollDown(),super._scrollUpdate()}_scrollIntoView({pageDiv,pageSpot=null,pageNumber=null}){pageNumber&&this._setCurrentPageNumber(pageNumber);const scrolledDown=this._currentPageNumber>=this._previousPageNumber;this._ensurePageViewVisible(),this.update(),super._scrollIntoView({pageDiv:pageDiv,pageSpot:pageSpot,pageNumber:pageNumber}),this._updateScrollDown=()=>{this.scroll.down=scrolledDown,this._updateScrollDown=null}}_getVisiblePages(){return this._getCurrentVisiblePage()}_updateHelper(visiblePages){}get _isScrollModeHorizontal(){return(0,_pdfjsLib.shadow)(this,"_isScrollModeHorizontal",!1)}_updateScrollMode(){}_updateSpreadMode(){}_getPageAdvance(){return 1}}exports.PDFSinglePageViewer=PDFSinglePageViewer},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.Toolbar=void 0;var _ui_utils=__webpack_require__(4);exports.Toolbar=class{constructor(options,eventBus,l10n=_ui_utils.NullL10n){this.toolbar=options.container,this.eventBus=eventBus,this.l10n=l10n,this.buttons=[{element:options.previous,eventName:"previouspage"},{element:options.next,eventName:"nextpage"},{element:options.zoomIn,eventName:"zoomin"},{element:options.zoomOut,eventName:"zoomout"},{element:options.openFile,eventName:"openfile"},{element:options.print,eventName:"print"},{element:options.presentationModeButton,eventName:"presentationmode"},{element:options.download,eventName:"download"},{element:options.viewBookmark,eventName:null}],this.items={numPages:options.numPages,pageNumber:options.pageNumber,scaleSelectContainer:options.scaleSelectContainer,scaleSelect:options.scaleSelect,customScaleOption:options.customScaleOption,previous:options.previous,next:options.next,zoomIn:options.zoomIn,zoomOut:options.zoomOut},this._wasLocalized=!1,this.reset(),this._bindListeners()}setPageNumber(pageNumber,pageLabel){this.pageNumber=pageNumber,this.pageLabel=pageLabel,this._updateUIState(!1)}setPagesCount(pagesCount,hasPageLabels){this.pagesCount=pagesCount,this.hasPageLabels=hasPageLabels,this._updateUIState(!0)}setPageScale(pageScaleValue,pageScale){this.pageScaleValue=(pageScaleValue||pageScale).toString(),this.pageScale=pageScale,this._updateUIState(!1)}reset(){this.pageNumber=0,this.pageLabel=null,this.hasPageLabels=!1,this.pagesCount=0,this.pageScaleValue=_ui_utils.DEFAULT_SCALE_VALUE,this.pageScale=_ui_utils.DEFAULT_SCALE,this._updateUIState(!0),this.updateLoadingIndicatorState()}_bindListeners(){const{pageNumber,scaleSelect}=this.items,self=this;for(const{element,eventName}of this.buttons)element.addEventListener("click",evt=>{null!==eventName&&this.eventBus.dispatch(eventName,{source:this})});pageNumber.addEventListener("click",function(){this.select()}),pageNumber.addEventListener("change",function(){self.eventBus.dispatch("pagenumberchanged",{source:self,value:this.value})}),scaleSelect.addEventListener("change",function(){"custom"!==this.value&&self.eventBus.dispatch("scalechanged",{source:self,value:this.value})}),scaleSelect.oncontextmenu=_ui_utils.noContextMenuHandler,this.eventBus._on("localized",()=>{this._wasLocalized=!0,this._adjustScaleWidth(),this._updateUIState(!0)})}_updateUIState(customScale=!1){if(this._wasLocalized){const{pageNumber,pagesCount,pageScaleValue,pageScale,items}=this;customScale&&(this.hasPageLabels?items.pageNumber.type="text":(items.pageNumber.type="number",this.l10n.get("of_pages",{pagesCount:pagesCount},"of {{pagesCount}}").then(msg=>{items.numPages.textContent=msg})),items.pageNumber.max=pagesCount),this.hasPageLabels?(items.pageNumber.value=this.pageLabel,this.l10n.get("page_of_pages",{pageNumber:pageNumber,pagesCount:pagesCount},"({{pageNumber}} of {{pagesCount}})").then(msg=>{items.numPages.textContent=msg})):items.pageNumber.value=pageNumber,items.previous.disabled=pageNumber<=1,items.next.disabled=pagesCount<=pageNumber,items.zoomOut.disabled=pageScale<=_ui_utils.MIN_SCALE,items.zoomIn.disabled=pageScale>=_ui_utils.MAX_SCALE;customScale=Math.round(1e4*pageScale)/100;this.l10n.get("page_scale_percent",{scale:customScale},"{{scale}}%").then(msg=>{let predefinedValueFound=!1;for(const option of items.scaleSelect.options)option.value===pageScaleValue?(option.selected=!0,predefinedValueFound=!0):option.selected=!1;predefinedValueFound||(items.customScaleOption.textContent=msg,items.customScaleOption.selected=!0)})}}updateLoadingIndicatorState(loading=!1){const pageNumberInput=this.items.pageNumber;pageNumberInput.classList.toggle("visiblePageIsLoading",loading)}async _adjustScaleWidth(){const{items,l10n}=this;var predefinedValuesPromise=Promise.all([l10n.get("page_scale_auto",null,"Automatic Zoom"),l10n.get("page_scale_actual",null,"Actual Size"),l10n.get("page_scale_fit",null,"Page Fit"),l10n.get("page_scale_width",null,"Page Width")]);let canvas=document.createElement("canvas");canvas.mozOpaque=!0;let ctx=canvas.getContext("2d",{alpha:!1});await _ui_utils.animationStarted;var{fontSize,fontFamily}=getComputedStyle(items.scaleSelect);ctx.font=fontSize+" "+fontFamily;let maxWidth=0;for(const predefinedValue of await predefinedValuesPromise){var width=ctx.measureText(predefinedValue)["width"];width>maxWidth&&(maxWidth=width)}maxWidth+=44,140<maxWidth&&(items.scaleSelect.style.width=maxWidth+22+"px",items.scaleSelectContainer.style.width=maxWidth+"px"),canvas.width=0,canvas.height=0,canvas=ctx=null}}},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.ViewHistory=void 0;exports.ViewHistory=class{constructor(fingerprint,cacheSize=20){this.fingerprint=fingerprint,this.cacheSize=cacheSize,this._initializedPromise=this._readFromStorage().then(databaseStr=>{const database=JSON.parse(databaseStr||"{}");let index=-1;if(Array.isArray(database.files)){for(;database.files.length>=this.cacheSize;)database.files.shift();for(let i=0,ii=database.files.length;i<ii;i++)if(database.files[i].fingerprint===this.fingerprint){index=i;break}}else database.files=[];-1===index&&(index=database.files.push({fingerprint:this.fingerprint})-1),this.file=database.files[index],this.database=database})}async _writeToStorage(){var databaseStr=JSON.stringify(this.database);localStorage.setItem("pdfjs.history",databaseStr)}async _readFromStorage(){return localStorage.getItem("pdfjs.history")}async set(name,val){return await this._initializedPromise,this.file[name]=val,this._writeToStorage()}async setMultiple(properties){await this._initializedPromise;for(const name in properties)this.file[name]=properties[name];return this._writeToStorage()}async get(val,defaultValue){await this._initializedPromise;val=this.file[val];return void 0!==val?val:defaultValue}async getMultiple(properties){await this._initializedPromise;const values=Object.create(null);for(const name in properties){var val=this.file[name];values[name]=void 0!==val?val:properties[name]}return values}}},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.GenericCom=void 0;var _app=__webpack_require__(3),_preferences=__webpack_require__(36),_download_manager=__webpack_require__(37),_genericl10n=__webpack_require__(38),_generic_scripting=__webpack_require__(40);exports.GenericCom={};class GenericPreferences extends _preferences.BasePreferences{async _writeToStorage(prefObj){localStorage.setItem("pdfjs.preferences",JSON.stringify(prefObj))}async _readFromStorage(prefObj){return JSON.parse(localStorage.getItem("pdfjs.preferences"))}}class GenericExternalServices extends _app.DefaultExternalServices{static createDownloadManager(options){return new _download_manager.DownloadManager}static createPreferences(){return new GenericPreferences}static createL10n({locale="en-US"}){return new _genericl10n.GenericL10n(locale)}static createScripting({sandboxBundleSrc}){return new _generic_scripting.GenericScripting(sandboxBundleSrc)}}_app.PDFViewerApplication.externalServices=GenericExternalServices},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.BasePreferences=void 0;__webpack_require__(1);exports.BasePreferences=class BasePreferences{constructor(){if(this.constructor===BasePreferences)throw new Error("Cannot initialize BasePreferences.");Object.defineProperty(this,"defaults",{value:Object.freeze({cursorToolOnLoad:0,defaultZoomValue:"",disablePageLabels:!1,enablePermissions:!1,enablePrintAutoRotate:!1,enableScripting:!1,enableWebGL:!1,externalLinkTarget:0,historyUpdateUrl:!1,ignoreDestinationZoom:!1,pdfBugEnabled:!1,renderer:"canvas",renderInteractiveForms:!0,sidebarViewOnLoad:-1,scrollModeOnLoad:-1,spreadModeOnLoad:-1,textLayerMode:1,useOnlyCssZoom:!1,viewerCssTheme:0,viewOnLoad:0,disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1}),writable:!1,enumerable:!0,configurable:!1}),this.prefs=Object.assign(Object.create(null),this.defaults),this._initializedPromise=this._readFromStorage(this.defaults).then(prefs=>{if(prefs)for(const name in prefs){var defaultValue=this.defaults[name],prefValue=prefs[name];void 0!==defaultValue&&typeof prefValue==typeof defaultValue&&(this.prefs[name]=prefValue)}})}async _writeToStorage(prefObj){throw new Error("Not implemented: _writeToStorage")}async _readFromStorage(prefObj){throw new Error("Not implemented: _readFromStorage")}async reset(){return await this._initializedPromise,this.prefs=Object.assign(Object.create(null),this.defaults),this._writeToStorage(this.defaults)}async set(name,value){await this._initializedPromise;var defaultType=this.defaults[name];if(void 0===defaultType)throw new Error(`Set preference: "${name}" is undefined.`);if(void 0===value)throw new Error("Set preference: no value is specified.");var valueType=typeof value;if(valueType!=(defaultType=typeof defaultType)){if("number"!=valueType||"string"!=defaultType)throw new Error(`Set preference: "${value}" is a ${valueType}, `+`expected a ${defaultType}.`);value=value.toString()}else if("number"==valueType&&!Number.isInteger(value))throw new Error(`Set preference: "${value}" must be an integer.`);return this.prefs[name]=value,this._writeToStorage(this.prefs)}async get(prefValue){await this._initializedPromise;var defaultValue=this.defaults[prefValue];if(void 0===defaultValue)throw new Error(`Get preference: "${prefValue}" is undefined.`);return void 0!==(prefValue=this.prefs[prefValue])?prefValue:defaultValue}async getAll(){return await this._initializedPromise,Object.assign(Object.create(null),this.defaults,this.prefs)}}},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.DownloadManager=void 0;var _pdfjsLib=__webpack_require__(5),_viewer_compatibility=__webpack_require__(2);function download(blobUrl,filename){const a=document.createElement("a");if(!a.click)throw new Error('DownloadManager: "a.click()" is not supported.');a.href=blobUrl,a.target="_parent","download"in a&&(a.download=filename),(document.body||document.documentElement).appendChild(a),a.click(),a.remove()}exports.DownloadManager=class{downloadUrl(url,filename){(0,_pdfjsLib.createValidAbsoluteUrl)(url,"http://example.com")&&download(url+"#pdfjs.action=download",filename)}downloadData(data,filename,contentType){download((0,_pdfjsLib.createObjectURL)(data,contentType,_viewer_compatibility.viewerCompatibilityParams.disableCreateObjectURL),filename)}download(blob,url,filename,sourceEventType=0){_viewer_compatibility.viewerCompatibilityParams.disableCreateObjectURL?this.downloadUrl(url,filename):download(URL.createObjectURL(blob),filename)}}},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.GenericL10n=void 0,__webpack_require__(39);const webL10n=document.webL10n;exports.GenericL10n=class{constructor(lang){this._lang=lang,this._ready=new Promise((resolve,reject)=>{webL10n.setLanguage(lang,()=>{resolve(webL10n)})})}async getLanguage(){const l10n=await this._ready;return l10n.getLanguage()}async getDirection(){const l10n=await this._ready;return l10n.getDirection()}async get(property,args,fallback){const l10n=await this._ready;return l10n.get(property,args,fallback)}async translate(element){const l10n=await this._ready;return l10n.translate(element)}}},()=>{document.webL10n=function(window,document){var gL10nData={},gTextData="",gTextProp="textContent",gLanguage="",gMacros={},gReadyState="loading",gAsyncResourceLoading=!0;function xhrLoadText(url,onSuccess,onFailure){onSuccess=onSuccess||function(data){},onFailure=onFailure||function(){};var xhr=new XMLHttpRequest;xhr.open("GET",url,gAsyncResourceLoading),xhr.overrideMimeType&&xhr.overrideMimeType("text/plain; charset=utf-8"),xhr.onreadystatechange=function(){4==xhr.readyState&&(200==xhr.status||0===xhr.status?onSuccess(xhr.responseText):onFailure())},xhr.onerror=onFailure,xhr.ontimeout=onFailure;try{xhr.send(null)}catch(e){onFailure()}}function parseResource(href,lang,successCallback,failureCallback){var baseURL=href.replace(/[^\/]*$/,"")||"./";function parseProperties(text,parsedPropertiesCallback){var dictionary={},reBlank=/^\s*|\s*$/,reComment=/^\s*#|^\s*$/,reSection=/^\s*\[(.*)\]\s*$/,reImport=/^\s*@import\s+url\((.*)\)\s*$/i,reSplit=/^([^=\s]*)\s*=\s*(.+)$/;function parseRawLines(rawText,extendedSyntax,parsedRawLinesCallback){var entries=rawText.replace(reBlank,"").split(/[\r\n]+/),currentLang="*",genericLang=lang.split("-",1)[0],skipLang=!1,match="";!function nextEntry(){for(;;){if(!entries.length)return void parsedRawLinesCallback();var text=entries.shift();if(!reComment.test(text)){if(extendedSyntax){if(match=reSection.exec(text)){currentLang=match[1].toLowerCase(),skipLang="*"!==currentLang&&currentLang!==lang&&currentLang!==genericLang;continue}if(skipLang)continue;if(match=reImport.exec(text))return void function(url,callback){xhrLoadText(url,function(content){parseRawLines(content,!1,callback)},function(){console.warn(url+" not found."),callback()})}(baseURL+match[1],nextEntry)}(text=text.match(reSplit))&&3==text.length&&(dictionary[text[1]]=(text=text[2]).lastIndexOf("\\")<0?text:text.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'"))}}}()}parseRawLines(text,!0,function(){parsedPropertiesCallback(dictionary)})}xhrLoadText(href,function(response){gTextData+=response,parseProperties(response,function(data){for(var key in data){var id,prop=key.lastIndexOf("."),prop=0<prop?(id=key.substring(0,prop),key.substring(prop+1)):(id=key,gTextProp);gL10nData[id]||(gL10nData[id]={}),gL10nData[id][prop]=data[key]}successCallback&&successCallback()})},failureCallback)}function loadLocale(lang,callback){lang=lang&&lang.toLowerCase(),callback=callback||function(){},gL10nData={},gLanguage=gTextData="",gLanguage=lang;var langLinks=document.querySelectorAll('link[type="application/l10n"]'),langCount=langLinks.length;if(0!==langCount)for(var script,gResourceCount=0,onResourceLoaded=function(){langCount<=++gResourceCount&&(callback(),gReadyState="complete")},i=0;i<langCount;i++)new L10nResourceLink(langLinks[i]).load(lang,onResourceLoaded);else{var dict=(script=document.querySelector('script[type="application/l10n"]'))?JSON.parse(script.innerHTML):null;if(dict&&dict.locales&&dict.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(gL10nData=dict.locales[lang])){var anyCaseLang,defaultLocale=dict.default_locale.toLowerCase();for(anyCaseLang in dict.locales){if((anyCaseLang=anyCaseLang.toLowerCase())===lang){gL10nData=dict.locales[lang];break}anyCaseLang===defaultLocale&&(gL10nData=dict.locales[defaultLocale])}}callback()}else console.log("no resource to load, early way out");gReadyState="complete"}function L10nResourceLink(link){var href=link.href;this.load=function(lang,callback){parseResource(href,lang,callback,function(){console.warn(href+" not found."),console.warn('"'+lang+'" resource not found'),gLanguage="",callback()})}}}function getL10nData(key,args,fallback){var data=gL10nData[key];if(!data){if(console.warn("#"+key+" is undefined."),!fallback)return null;data=fallback}var prop,str,rv={};for(prop in data)str=function(str,args,key){return str.replace(/\{\{\s*(.+?)\s*\}\}/g,function(matched_text,arg){return args&&arg in args?args[arg]:arg in gL10nData?gL10nData[arg]:(console.log("argument {{"+arg+"}} for #"+key+" is undefined."),matched_text)})}(str=function(str,args,key,prop){var paramName=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(str);if(!paramName||!paramName.length)return str;var param,macro=paramName[1],paramName=paramName[2];args&&paramName in args?param=args[paramName]:paramName in gL10nData&&(param=gL10nData[paramName]);macro in gMacros&&(macro=gMacros[macro],str=macro(str,param,key,prop));return str}(str=data[prop],args,key,prop),args,key),rv[prop]=str;return rv}function translateElement(element){var l10n=function(args){if(!args)return{};var l10nId=args.getAttribute("data-l10n-id"),l10nArgs=args.getAttribute("data-l10n-args"),args={};if(l10nArgs)try{args=JSON.parse(l10nArgs)}catch(e){console.warn("could not parse arguments for #"+l10nId)}return{id:l10nId,args:args}}(element);if(l10n.id){var data=getL10nData(l10n.id,l10n.args);if(data){if(data[gTextProp]){if(0===function(element){if(element.children)return element.children.length;if(void 0!==element.childElementCount)return element.childElementCount;for(var count=0,i=0;i<element.childNodes.length;i++)count+=1===element.nodeType?1:0;return count}(element))element[gTextProp]=data[gTextProp];else{for(var textNode,children=element.childNodes,found=!1,i=0,l=children.length;i<l;i++)3===children[i].nodeType&&/\S/.test(children[i].nodeValue)&&(found?children[i].nodeValue="":(children[i].nodeValue=data[gTextProp],found=!0));found||(textNode=document.createTextNode(data[gTextProp]),element.insertBefore(textNode,element.firstChild))}delete data[gTextProp]}for(var k in data)element[k]=data[k]}else console.warn("#"+l10n.id+" is undefined.")}}return gMacros.plural=function(str,index,key,prop){var n=parseFloat(index);if(isNaN(n))return str;if(prop!=gTextProp)return str;gMacros._pluralRules||(gMacros._pluralRules=function(lang){function isIn(n,list){return-1!==list.indexOf(n)}function isBetween(n,start,end){return start<=n&&n<=end}var pluralRules={0:function(n){return"other"},1:function(n){return isBetween(n%100,3,10)?"few":0===n?"zero":isBetween(n%100,11,99)?"many":2==n?"two":1==n?"one":"other"},2:function(n){return 0!==n&&n%10==0?"many":2==n?"two":1==n?"one":"other"},3:function(n){return 1==n?"one":"other"},4:function(n){return isBetween(n,0,1)?"one":"other"},5:function(n){return isBetween(n,0,2)&&2!=n?"one":"other"},6:function(n){return 0===n?"zero":n%10==1&&n%100!=11?"one":"other"},7:function(n){return 2==n?"two":1==n?"one":"other"},8:function(n){return isBetween(n,3,6)?"few":isBetween(n,7,10)?"many":2==n?"two":1==n?"one":"other"},9:function(n){return 0===n||1!=n&&isBetween(n%100,1,19)?"few":1==n?"one":"other"},10:function(n){return isBetween(n%10,2,9)&&!isBetween(n%100,11,19)?"few":n%10!=1||isBetween(n%100,11,19)?"other":"one"},11:function(n){return isBetween(n%10,2,4)&&!isBetween(n%100,12,14)?"few":n%10==0||isBetween(n%10,5,9)||isBetween(n%100,11,14)?"many":n%10==1&&n%100!=11?"one":"other"},12:function(n){return isBetween(n,2,4)?"few":1==n?"one":"other"},13:function(n){return isBetween(n%10,2,4)&&!isBetween(n%100,12,14)?"few":1!=n&&isBetween(n%10,0,1)||isBetween(n%10,5,9)||isBetween(n%100,12,14)?"many":1==n?"one":"other"},14:function(n){return isBetween(n%100,3,4)?"few":n%100==2?"two":n%100==1?"one":"other"},15:function(n){return 0===n||isBetween(n%100,2,10)?"few":isBetween(n%100,11,19)?"many":1==n?"one":"other"},16:function(n){return n%10==1&&11!=n?"one":"other"},17:function(n){return 3==n?"few":0===n?"zero":6==n?"many":2==n?"two":1==n?"one":"other"},18:function(n){return 0===n?"zero":isBetween(n,0,2)&&0!==n&&2!=n?"one":"other"},19:function(n){return isBetween(n,2,10)?"few":isBetween(n,0,1)?"one":"other"},20:function(n){return!isBetween(n%10,3,4)&&n%10!=9||isBetween(n%100,10,19)||isBetween(n%100,70,79)||isBetween(n%100,90,99)?n%1e6==0&&0!==n?"many":n%10!=2||isIn(n%100,[12,72,92])?n%10!=1||isIn(n%100,[11,71,91])?"other":"one":"two":"few"},21:function(n){return 0===n?"zero":1==n?"one":"other"},22:function(n){return isBetween(n,0,1)||isBetween(n,11,99)?"one":"other"},23:function(n){return isBetween(n%10,1,2)||n%20==0?"one":"other"},24:function(n){return isBetween(n,3,10)||isBetween(n,13,19)?"few":isIn(n,[2,12])?"two":isIn(n,[1,11])?"one":"other"}},index={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[lang.replace(/-.*$/,"")];return index in pluralRules?pluralRules[index]:(console.warn("plural form unknown for ["+lang+"]"),function(){return"other"})}(gLanguage));index="["+gMacros._pluralRules(n)+"]";return 0===n&&key+"[zero]"in gL10nData?str=gL10nData[key+"[zero]"][prop]:1==n&&key+"[one]"in gL10nData?str=gL10nData[key+"[one]"][prop]:2==n&&key+"[two]"in gL10nData?str=gL10nData[key+"[two]"][prop]:key+index in gL10nData?str=gL10nData[key+index][prop]:key+"[other]"in gL10nData&&(str=gL10nData[key+"[other]"][prop]),str},{get:function(key,args,fallbackString){var index=key.lastIndexOf("."),prop=gTextProp;0<index&&(prop=key.substring(index+1),key=key.substring(0,index)),fallbackString&&((data={})[prop]=fallbackString);var data=getL10nData(key,args,data);return data&&prop in data?data[prop]:"{{"+key+"}}"},getData:function(){return gL10nData},getText:function(){return gTextData},getLanguage:function(){return gLanguage},setLanguage:function(lang,callback){loadLocale(lang,function(){callback&&callback()})},getDirection:function(){var shortCode=gLanguage.split("-",1)[0];return 0<=["ar","he","fa","ps","ur"].indexOf(shortCode)?"rtl":"ltr"},translate:function(element){for(var children=function(element){return element?element.querySelectorAll("*[data-l10n-id]"):[]}(element=element||document.documentElement),elementCount=children.length,i=0;i<elementCount;i++)translateElement(children[i]);translateElement(element)},getReadyState:function(){return gReadyState},ready:function(callback){callback&&("complete"==gReadyState||"interactive"==gReadyState?window.setTimeout(function(){callback()}):document.addEventListener&&document.addEventListener("localized",function once(){document.removeEventListener("localized",once),callback()}))}}}(window,document)},(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.GenericScripting=void 0;var _pdfjsLib=__webpack_require__(5);exports.GenericScripting=class{constructor(sandboxBundleSrc){this._ready=(0,_pdfjsLib.loadScript)(sandboxBundleSrc,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}async createSandbox(data){const sandbox=await this._ready;sandbox.create(data)}async dispatchEventInSandbox(event){const sandbox=await this._ready;sandbox.dispatchEvent(event)}async destroySandbox(){const sandbox=await this._ready;sandbox.nukeSandbox()}}},(__unused_webpack_module,exports,stopPropagationIfNeeded)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFPrintService=PDFPrintService;var _ui_utils=stopPropagationIfNeeded(4),_app=stopPropagationIfNeeded(3),_viewer_compatibility=stopPropagationIfNeeded(2);let activeService=null,overlayManager=null;function PDFPrintService(pdfDocument,pagesOverview,printContainer,printResolution,optionalContentConfigPromise=null,l10n){this.pdfDocument=pdfDocument,this.pagesOverview=pagesOverview,this.printContainer=printContainer,this._printResolution=printResolution||150,this._optionalContentConfigPromise=optionalContentConfigPromise||pdfDocument.getOptionalContentConfig(),this.l10n=l10n||_ui_utils.NullL10n,this.currentPage=-1,this.scratchCanvas=document.createElement("canvas")}PDFPrintService.prototype={layout(){this.throwIfInactive();const body=document.querySelector("body");body.setAttribute("data-pdfjsprinting",!0),this.pagesOverview.every(function(size){return size.width===this.pagesOverview[0].width&&size.height===this.pagesOverview[0].height},this)||console.warn("Not all pages have the same size. The printed result may be incorrect!"),this.pageStyleSheet=document.createElement("style");var pageSize=this.pagesOverview[0];this.pageStyleSheet.textContent="@supports ((size:A4) and (size:1pt 1pt)) {@page { size: "+pageSize.width+"pt "+pageSize.height+"pt;}}",body.appendChild(this.pageStyleSheet)},destroy(){if(activeService===this){this.printContainer.textContent="";const body=document.querySelector("body");body.removeAttribute("data-pdfjsprinting"),this.pageStyleSheet&&(this.pageStyleSheet.remove(),this.pageStyleSheet=null),this.scratchCanvas.width=this.scratchCanvas.height=0,this.scratchCanvas=null,activeService=null,ensureOverlay().then(function(){"printServiceOverlay"===overlayManager.active&&overlayManager.close("printServiceOverlay")})}},renderPages(){const pageCount=this.pagesOverview.length,renderNextPage=(resolve,reject)=>{if(this.throwIfInactive(),++this.currentPage>=pageCount)return renderProgress(pageCount,pageCount,this.l10n),void resolve();var index=this.currentPage;renderProgress(index,pageCount,this.l10n),function(pdfDocument,pageNumber,size,printResolution,optionalContentConfigPromise){const scratchCanvas=activeService.scratchCanvas,PRINT_UNITS=printResolution/72;scratchCanvas.width=Math.floor(size.width*PRINT_UNITS),scratchCanvas.height=Math.floor(size.height*PRINT_UNITS);const width=Math.floor(size.width*_ui_utils.CSS_UNITS)+"px",height=Math.floor(size.height*_ui_utils.CSS_UNITS)+"px",ctx=scratchCanvas.getContext("2d");return ctx.save(),ctx.fillStyle="rgb(255, 255, 255)",ctx.fillRect(0,0,scratchCanvas.width,scratchCanvas.height),ctx.restore(),pdfDocument.getPage(pageNumber).then(function(pdfPage){var renderContext={canvasContext:ctx,transform:[PRINT_UNITS,0,0,PRINT_UNITS,0,0],viewport:pdfPage.getViewport({scale:1,rotation:size.rotation}),intent:"print",annotationStorage:pdfDocument.annotationStorage,optionalContentConfigPromise:optionalContentConfigPromise};return pdfPage.render(renderContext).promise}).then(function(){return{width:width,height:height}})}(this.pdfDocument,index+1,this.pagesOverview[index],this._printResolution,this._optionalContentConfigPromise).then(this.useRenderedPage.bind(this)).then(function(){renderNextPage(resolve,reject)},reject)};return new Promise(renderNextPage)},useRenderedPage(printItem){this.throwIfInactive();const img=document.createElement("img");img.style.width=printItem.width,img.style.height=printItem.height;const scratchCanvas=this.scratchCanvas;"toBlob"in scratchCanvas&&!_viewer_compatibility.viewerCompatibilityParams.disableCreateObjectURL?scratchCanvas.toBlob(function(blob){img.src=URL.createObjectURL(blob)}):img.src=scratchCanvas.toDataURL();const wrapper=document.createElement("div");return wrapper.appendChild(img),this.printContainer.appendChild(wrapper),new Promise(function(resolve,reject){img.onload=resolve,img.onerror=reject})},performPrint(){return this.throwIfInactive(),new Promise(resolve=>{setTimeout(()=>{this.active?(print.call(window),setTimeout(resolve,20)):resolve()},0)})},get active(){return this===activeService},throwIfInactive(){if(!this.active)throw new Error("This print request was cancelled or completed.")}};const print=window.print;function dispatchEvent(eventType){const event=document.createEvent("CustomEvent");event.initCustomEvent(eventType,!1,!1,"custom"),window.dispatchEvent(event)}function abort(){activeService&&(activeService.destroy(),dispatchEvent("afterprint"))}function renderProgress(index,progress,l10n){const progressContainer=document.getElementById("printServiceOverlay");progress=Math.round(100*index/progress);const progressBar=progressContainer.querySelector("progress"),progressPerc=progressContainer.querySelector(".relative-progress");progressBar.value=progress,l10n.get("print_progress_percent",{progress:progress},progress+"%").then(msg=>{progressPerc.textContent=msg})}window.print=function(){if(activeService)console.warn("Ignored window.print() because of a pending print job.");else{ensureOverlay().then(function(){activeService&&overlayManager.open("printServiceOverlay")});try{dispatchEvent("beforeprint")}finally{if(!activeService)return console.error("Expected print service to be initialized."),void ensureOverlay().then(function(){"printServiceOverlay"===overlayManager.active&&overlayManager.close("printServiceOverlay")});const activeServiceOnEntry=activeService;activeService.renderPages().then(function(){return activeServiceOnEntry.performPrint()}).catch(function(){}).then(function(){activeServiceOnEntry.active&&abort()})}}},window.addEventListener("keydown",function(event){80!==event.keyCode||!event.ctrlKey&&!event.metaKey||event.altKey||event.shiftKey&&!window.chrome&&!window.opera||(window.print(),event.preventDefault(),event.stopImmediatePropagation?event.stopImmediatePropagation():event.stopPropagation())},!0),"onbeforeprint"in window&&(stopPropagationIfNeeded=function(event){"custom"!==event.detail&&event.stopImmediatePropagation&&event.stopImmediatePropagation()},window.addEventListener("beforeprint",stopPropagationIfNeeded),window.addEventListener("afterprint",stopPropagationIfNeeded));let overlayPromise;function ensureOverlay(){if(!overlayPromise){if(overlayManager=_app.PDFViewerApplication.overlayManager,!overlayManager)throw new Error("The overlay manager has not yet been initialized.");overlayPromise=overlayManager.register("printServiceOverlay",document.getElementById("printServiceOverlay"),abort,!0),document.getElementById("printCancel").onclick=abort}return overlayPromise}_app.PDFPrintServiceFactory.instance={supportsPrinting:!0,createPrintService(pdfDocument,pagesOverview,printContainer,printResolution,optionalContentConfigPromise,l10n){if(activeService)throw new Error("The print service is created and active.");return activeService=new PDFPrintService(pdfDocument,pagesOverview,printContainer,printResolution,optionalContentConfigPromise,l10n),activeService}}}],__webpack_module_cache__={};!function __webpack_require__(moduleId){if(__webpack_module_cache__[moduleId])return __webpack_module_cache__[moduleId].exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__webpack_require__),module.exports}(0)})();